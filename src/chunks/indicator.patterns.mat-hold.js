"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.patterns.mat-hold"],{1233:(t,e,o)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,i(n.key),n)}}function i(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function l(t,e,o){return e=s(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,o||[],s(t).constructor):e.apply(t,o))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function c(t,e){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},c(t,e)}o.r(e),o.d(e,{default:()=>u});const u=function(t){function e(t,o,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=l(this,e,[t,o,n])).title="Mat Hold",r.shorttitle="MatHold",r.precision=2,r.minBodyRatio=void 0!==o.minBodyRatio?o.minBodyRatio:60,r.pullbackMax=void 0!==o.pullbackMax?o.pullbackMax:50,r.showLabels=void 0===o.showLabels||o.showLabels,r.matHoldColor=o.matHoldColor||"#00E676",r.panelType="main",r.plots=[{dataKey:"signals",colorKey:"matHoldColor",title:"Mat Hold"}],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(e,t),o=e,i=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"minBodyRatio",label:"Min Body Ratio %",type:"number",default:60,min:50,max:75,step:5},{key:"pullbackMax",label:"Max Pullback %",type:"number",default:50,min:30,max:70,step:5},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"matHoldColor",label:"Mat Hold",type:"color",default:"#00E676"}]}}}],(n=[{key:"calculate",value:function(){var t=this,e=this.engine.data,o=e.map(function(o,n){if(n<4)return null;var r=e[n-4],i=e[n-3],l=e[n-2],a=e[n-1],s=e[n];return t.isMatHold(r,i,l,a,s)?{type:"mat_hold",price:s.low,pattern:"Mat Hold"}:null});this.data={signals:o}}},{key:"isMatHold",value:function(t,e,o,n,r){if(t.close<=t.open)return!1;var i=t.close-t.open,l=t.high-t.low;if(0===l||i/l*100<this.minBodyRatio)return!1;if(e.open<=t.close)return!1;for(var a=1/0,s=0,c=[e,o,n];s<c.length;s++){var u=c[s];a=Math.min(a,u.close,u.open);var f=Math.abs(u.close-u.open),p=u.high-u.low;if(0===p)return!1;if(f/p*100>60)return!1}if((e.open-a)/i*100>this.pullbackMax)return!1;if(a<t.close&&(t.close-a)/i*100>10)return!1;if(r.close<=r.open)return!1;var d=r.close-r.open,h=r.high-r.low;return!(0===h||d/h*100<this.minBodyRatio||r.close<=e.open)}},{key:"render",value:function(t,e){if(this.visible&&this.data){var o=t.ctx,n=t.getDpr(),r=this.engine,i=r.data;if(this.data.signals&&this.data.signals.length===i.length||(this.calculate(),this.data&&this.data.signals)){o.save(),o.scale(n,n);for(var l=r.visibleRange,a=l.start;a<l.end;a++)if(!(a<0||a>=this.data.signals.length)){var s=this.data.signals[a];if(s){var c=r.indexToX(a)+r.candleWidth/2,u=r.priceToY(s.price);this.drawMatHold(o,c,u),this.showLabels&&this.drawLabel(o,c,u,"MAT",this.matHoldColor)}}o.restore()}}}},{key:"drawMatHold",value:function(t,e,o){var n=20;t.strokeStyle=this.matHoldColor,t.fillStyle=this.matHoldColor,t.lineWidth=2,t.fillRect(e-16,o+n,4,12),t.setLineDash([2,2]),t.beginPath(),t.moveTo(e-12,o+n-2),t.lineTo(e-8,o+n-2),t.stroke(),t.setLineDash([]),t.fillRect(e-8,o+n-2,2,4),t.fillRect(e-4,o+n,2,4),t.fillRect(e,o+n-1,2,4),t.fillRect(e+8,o+n-6,4,12),t.beginPath(),t.moveTo(e+14,o+n-12),t.lineTo(e+11,o+n-9),t.lineTo(e+17,o+n-9),t.closePath(),t.fill()}},{key:"drawLabel",value:function(t,e,o,n,r){t.font="bold 9px sans-serif",t.fillStyle=r,t.textAlign="center",t.fillText(n,e,o+40)}}])&&r(o.prototype,n),i&&r(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,n,i}(o(8018).A)}}]);