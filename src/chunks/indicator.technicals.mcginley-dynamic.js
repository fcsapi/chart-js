"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.mcginley-dynamic"],{3368:(e,t,i)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}function o(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}function l(e,t,i){return t=s(t),function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,i||[],s(e).constructor):t.apply(e,i))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}i.r(t),i.d(t,{default:()=>f});const f=function(e){function t(e,i,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=l(this,t,[e,i,n])).title="McGinley Dynamic",r.shorttitle="MD",r.precision=2,r.length=void 0!==i.length?i.length:14,r.src=void 0!==i.src?i.src:"close",r.factor=void 0!==i.factor?i.factor:1,r.linewidth=void 0!==i.linewidth?i.linewidth:2,r.lineColor=i.lineColor||"#2962FF",r.fillColor=i.fillColor||"rgba(41, 98, 255, 0.05)",r.showLine=void 0===i.showLine||i.showLine,r.showFill=void 0!==i.showFill&&i.showFill,r.showLabels=void 0===i.showLabels||i.showLabels,r.panelType="main",r.panelHeight=150,r.plots=[{dataKey:"md",colorKey:"lineColor",title:"MD"}],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),i=t,o=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"length",label:"Length",type:"number",default:14,min:1,max:500,step:1},{key:"src",label:"Source",type:"source",default:"close"},{key:"factor",label:"Adjustment Factor",type:"number",default:1,min:.1,max:2,step:.1},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:5,step:1}],style:[{key:"lineColor",label:"Line",type:"color",default:"#2962FF"},{key:"showLine",label:"Line",type:"checkbox",default:!0},{key:"fillColor",label:"Fill",type:"color",default:"rgba(41, 98, 255, 0.05)"},{key:"showFill",label:"Fill",type:"checkbox",default:!1},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}]}}}],(n=[{key:"calculate",value:function(){var e=this,t=this.engine.data;if(t&&0!==t.length){for(var i=t.map(function(t){return t[e.src]}),n=[],r=0;r<t.length;r++)if(0===r)n[r]=i[r];else{var o=n[r-1],l=i[r];if(0===o||null===o)n[r]=l;else{var a=l/o,s=this.length*Math.pow(a,4)*this.factor;n[r]=0!==s?o+(l-o)/s:o}}this.data={md:n,src:i}}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var i=e.ctx,n=e.getDpr(),r=this.engine,o=r.data;if(this.data.md&&this.data.md.length===o.length||(this.calculate(),this.data&&this.data.md)){if(i.save(),i.scale(n,n),this.showFill&&this.drawFillBetweenPriceAndMD(i,r),this.showLine&&this.drawLine(i,this.data.md,!0,this.lineColor,this.linewidth,0,0,r,t),this.showLabels){i.fillStyle="#d1d4dc",i.font="bold 11px sans-serif";var l=this.shorttitle;i.fillText(l,5,12);var a=r.visibleRange.end-1;if(void 0!==r.hoveredIndex&&null!==r.hoveredIndex&&(a=r.hoveredIndex),a>=0&&a<this.data.md.length){var s=this.data.md[a];if(null!=s){i.font="11px sans-serif";var c=5+i.measureText(l).width+10;i.fillStyle=this.lineColor;var f="".concat(s.toFixed(this.precision));i.fillText(f,c,12)}}}i.restore()}}}},{key:"drawLine",value:function(e,t,i,n,r,o,l,a,s){if(t&&0!==t.length){var c=a.visibleRange,f=Math.max(0,c.start),u=Math.min(t.length,c.end),h=t.slice(f,u),d=f-c.start;e.strokeStyle=n,e.lineWidth=r,e.beginPath();var y=!1;h.forEach(function(t,i){if(null!==t&&!isNaN(t)){var n=c.start+d+i,r=a.indexToX(n)+a.candleWidth/2,o=a.priceToY(t);y?e.lineTo(r,o):(e.moveTo(r,o),y=!0)}}),e.stroke()}}},{key:"drawFillBetweenPriceAndMD",value:function(e,t){if(this.data.md&&this.data.src){var i=t.visibleRange,n=Math.max(0,i.start),r=Math.min(this.data.md.length,i.end),o=n-i.start;e.fillStyle=this.fillColor,e.beginPath();for(var l=!1,a=n;a<r;a++){var s=this.data.src[a];if(null!==s&&!isNaN(s)){var c=i.start+o+(a-n),f=t.indexToX(c)+t.candleWidth/2,u=t.priceToY(s);l?e.lineTo(f,u):(e.moveTo(f,u),l=!0)}}for(var h=r-1;h>=n;h--){var d=this.data.md[h];if(null!==d&&!isNaN(d)){var y=i.start+o+(h-n),p=t.indexToX(y)+t.candleWidth/2,b=t.priceToY(d);e.lineTo(p,b)}}e.closePath(),e.fill()}}}])&&r(i.prototype,n),o&&r(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n,o}(i(8018).A)}}]);