"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.signals.harami-signal"],{2984:(e,t,i)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function n(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,i){return t=s(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,i||[],s(e).constructor):t.apply(e,i))}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}i.r(t),i.d(t,{default:()=>c});const c=function(e){function t(e,i,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,t,[e,i,o])).title="Harami Pattern",r.shorttitle="Harami",r.precision=2,r.minMotherBodySize=void 0!==i.minMotherBodySize?i.minMotherBodySize:50,r.maxChildBodyRatio=void 0!==i.maxChildBodyRatio?i.maxChildBodyRatio:.5,r.showLabels=void 0===i.showLabels||i.showLabels,r.bullishColor=i.bullishColor||"#4CAF50",r.bearishColor=i.bearishColor||"#F44336",r.panelType="main",r.plots=[{dataKey:"signals",colorKey:"bullishColor",title:"Harami Patterns"}],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),i=t,n=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"minMotherBodySize",label:"Min Mother Body %",type:"number",default:50,min:30,max:80,step:5},{key:"maxChildBodyRatio",label:"Max Child/Mother Ratio",type:"number",default:.5,min:.2,max:.7,step:.05},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"bullishColor",label:"Bullish Harami",type:"color",default:"#4CAF50"},{key:"bearishColor",label:"Bearish Harami",type:"color",default:"#F44336"}]}}}],(o=[{key:"calculate",value:function(){var e=this,t=this.engine.data,i=t.map(function(i,o){if(0===o)return null;var r=t[o-1],n=i,a=Math.abs(r.close-r.open),l=Math.abs(n.close-n.open),s=r.high-r.low;if(0===s)return null;if(a/s<e.minMotherBodySize/100)return null;if(l>a*e.maxChildBodyRatio)return null;var u=Math.max(r.open,r.close),c=Math.min(r.open,r.close),h=Math.max(n.open,n.close),f=Math.min(n.open,n.close);if(!(h<=u&&f>=c))return null;var y=r.close<r.open&&n.close>n.open,p=r.close>r.open&&n.close<n.open;return y?{type:"bullish",price:n.low,childRatio:l/a}:p?{type:"bearish",price:n.high,childRatio:l/a}:null});this.data={signals:i}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var i=e.ctx,o=e.getDpr(),r=this.engine,n=r.data;if(this.data.signals&&this.data.signals.length===n.length||(this.calculate(),this.data&&this.data.signals)){i.save(),i.scale(o,o);for(var a=r.visibleRange,l=a.start;l<a.end;l++)if(!(l<0||l>=this.data.signals.length)){var s=this.data.signals[l];if(s){var u=r.indexToX(l)+r.candleWidth/2,c=r.priceToY(s.price);"bullish"===s.type?(this.drawBullishHarami(i,u,c),this.showLabels&&this.drawLabel(i,u,c,"H+",this.bullishColor)):"bearish"===s.type&&(this.drawBearishHarami(i,u,c),this.showLabels&&this.drawLabel(i,u,c,"H-",this.bearishColor))}}i.restore()}}}},{key:"drawBullishHarami",value:function(e,t,i){e.strokeStyle=this.bullishColor,e.fillStyle=this.bullishColor,e.lineWidth=2,e.strokeRect(t-4,i+20,8,8),e.fillRect(t-2,i+20+2,4,4)}},{key:"drawBearishHarami",value:function(e,t,i){e.strokeStyle=this.bearishColor,e.fillStyle=this.bearishColor,e.lineWidth=2,e.strokeRect(t-4,i-20-8,8,8),e.fillRect(t-2,i-20-8+2,4,4)}},{key:"drawLabel",value:function(e,t,i,o,r){e.font="bold 10px sans-serif",e.fillStyle=r,e.textAlign="center";var n="H+"===o?40:-35;e.fillText(o,t,i+n)}}])&&r(i.prototype,o),n&&r(i,n),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o,n}(i(8018).A)}}]);