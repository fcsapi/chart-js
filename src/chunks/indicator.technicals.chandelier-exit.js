"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.chandelier-exit"],{1144:(t,e,o)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function i(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,n(r.key),r)}}function n(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,e||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function l(t,e,o){return e=s(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,o||[],s(t).constructor):e.apply(t,o))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}o.r(e),o.d(e,{default:()=>c});const c=function(t){function e(t,o,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=l(this,e,[t,o,r])).title="Chandelier Exit",i.shorttitle="CE",i.precision=2,i.atrPeriod=void 0!==o.atrPeriod?o.atrPeriod:22,i.atrMultiplier=void 0!==o.atrMultiplier?o.atrMultiplier:3,i.lookback=void 0!==o.lookback?o.lookback:22,i.useClose=void 0===o.useClose||o.useClose,i.linewidth=void 0!==o.linewidth?o.linewidth:2,i.longColor=o.longColor||"#26A69A",i.shortColor=o.shortColor||"#EF5350",i.showLong=void 0===o.showLong||o.showLong,i.showShort=void 0===o.showShort||o.showShort,i.showLabels=void 0===o.showLabels||o.showLabels,i.panelType="main",i.panelHeight=150,i.plots=[{dataKey:"longStop",colorKey:"longColor",title:"Long Stop"},{dataKey:"shortStop",colorKey:"shortColor",title:"Short Stop"}],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),o=e,n=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"atrPeriod",label:"ATR Period",type:"number",default:22,min:1,max:500,step:1},{key:"atrMultiplier",label:"ATR Multiplier",type:"number",default:3,min:.1,max:10,step:.1},{key:"lookback",label:"Lookback Period",type:"number",default:22,min:1,max:500,step:1},{key:"useClose",label:"Use Close Price",type:"checkbox",default:!0},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:5,step:1}],style:[{key:"longColor",label:"Long Stop",type:"color",default:"#26A69A"},{key:"showLong",label:"Long Stop",type:"checkbox",default:!0},{key:"shortColor",label:"Short Stop",type:"color",default:"#EF5350"},{key:"showShort",label:"Short Stop",type:"checkbox",default:!0},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}]}}}],(r=[{key:"calculate",value:function(){var t=this.engine.data,e=this.engine.dataManager;if(t&&0!==t.length){for(var o=e.calculateATR(t,this.atrPeriod),r=[],i=[],n=0;n<t.length;n++)if(n<Math.max(this.atrPeriod,this.lookback)-1||null===o[n])r[n]=null,i[n]=null;else{for(var l=t[n].high,a=t[n].low,s=0;s<this.lookback&&n-s>=0;s++)l=Math.max(l,t[n-s].high),a=Math.min(a,t[n-s].low);if(this.useClose){for(var h=t[n].close,c=t[n].close,u=0;u<this.lookback&&n-u>=0;u++)h=Math.max(h,t[n-u].close),c=Math.min(c,t[n-u].close);l=h,a=c}r[n]=l-this.atrMultiplier*o[n],i[n]=a+this.atrMultiplier*o[n]}this.data={longStop:r,shortStop:i}}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var o=t.ctx,r=t.getDpr(),i=this.engine,n=i.data;if(this.data.longStop&&this.data.longStop.length===n.length||(this.calculate(),this.data&&this.data.longStop)){if(o.save(),o.scale(r,r),this.showLong&&this.drawLine(o,this.data.longStop,!0,this.longColor,this.linewidth,0,0,i,e),this.showShort&&this.drawLine(o,this.data.shortStop,!0,this.shortColor,this.linewidth,0,0,i,e),this.showLabels){o.fillStyle="#d1d4dc",o.font="bold 11px sans-serif";var l=this.shorttitle;o.fillText(l,5,12);var a=i.visibleRange.end-1;if(void 0!==i.hoveredIndex&&null!==i.hoveredIndex&&(a=i.hoveredIndex),a>=0&&a<this.data.longStop.length){o.font="11px sans-serif";var s=5+o.measureText(l).width+10,h=this.data.longStop[a],c=this.data.shortStop[a];if(this.showLong&&null!=h){o.fillStyle=this.longColor;var u="Long: ".concat(h.toFixed(this.precision));o.fillText(u,s,12),s+=o.measureText(u).width+10}if(this.showShort&&null!=c){o.fillStyle=this.shortColor;var f="Short: ".concat(c.toFixed(this.precision));o.fillText(f,s,12)}}}o.restore()}}}},{key:"drawLine",value:function(t,e,o,r,i,n,l,a,s){if(e&&0!==e.length){var h=a.visibleRange,c=Math.max(0,h.start),u=Math.min(e.length,h.end),f=e.slice(c,u),p=c-h.start;t.strokeStyle=r,t.lineWidth=i,t.beginPath();var d=!1;f.forEach(function(e,o){if(null!==e&&!isNaN(e)){var r=h.start+p+o,i=a.indexToX(r)+a.candleWidth/2,n=a.priceToY(e);d?t.lineTo(i,n):(t.moveTo(i,n),d=!0)}}),t.stroke()}}}])&&i(o.prototype,r),n&&i(o,n),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,n}(o(8018).A)}}]);