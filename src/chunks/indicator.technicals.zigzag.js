"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.zigzag"],{140:(t,e,i)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o(n.key),n)}}function o(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,e||"default");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function a(t,e,i){return e=c(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,i||[],c(t).constructor):e.apply(t,i))}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}i.r(e),i.d(e,{default:()=>u});const u=function(t){function e(t,i,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=a(this,e,[t,i,n])).title="Zig Zag",r.shorttitle="ZZ",r.precision=2,r.deviation=void 0!==i.deviation?i.deviation:5,r.depth=void 0!==i.depth?i.depth:12,r.linewidth=void 0!==i.linewidth?i.linewidth:2,r.lineColor=i.lineColor||"#2962FF",r.showLabels=void 0===i.showLabels||i.showLabels,r.panelType="main",r.panelHeight=150,r.plots=[{dataKey:"zigzag",colorKey:"lineColor",title:"ZigZag"}],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,t),i=e,o=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"deviation",label:"Deviation %",type:"number",default:5,min:.1,max:100,step:.1},{key:"depth",label:"Depth",type:"number",default:12,min:1,max:100,step:1},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:5,step:1}],style:[{key:"lineColor",label:"Line",type:"color",default:"#2962FF"},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}]}}}],(n=[{key:"calculate",value:function(){var t=this.engine.data;if(t&&0!==t.length){for(var e=[],i=[],n=0,r=t[0].close,o=0,a=0;a<t.length;a++)if(e[a]=null,!(a<this.depth)){var l=t[a].high,c=t[a].low;0===o?l>r*(1+this.deviation/100)?(o=1,r=l,n=a):c<r*(1-this.deviation/100)&&(o=-1,r=c,n=a):1===o?l>r?(r=l,n=a):c<r*(1-this.deviation/100)&&a-n>=this.depth&&(i.push({idx:n,price:r}),o=-1,r=c,n=a):-1===o&&(c<r?(r=c,n=a):l>r*(1+this.deviation/100)&&a-n>=this.depth&&(i.push({idx:n,price:r}),o=1,r=l,n=a))}0!==o&&i.push({idx:n,price:r});for(var s=0;s<i.length;s++){var u=i[s];if(e[u.idx]=u.price,s>0)for(var f=i[s-1],h=u.idx-f.idx,p=(u.price-f.price)/h,d=1;d<h;d++)e[f.idx+d]=f.price+p*d}this.data={zigzag:e,pivots:i}}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var i=t.ctx,n=t.getDpr(),r=this.engine,o=r.data;if(this.data.zigzag&&this.data.zigzag.length===o.length||(this.calculate(),this.data&&this.data.zigzag)){if(i.save(),i.scale(n,n),this.drawLine(i,this.data.zigzag,!0,this.lineColor,this.linewidth,0,0,r,e),this.showLabels){i.fillStyle="#d1d4dc",i.font="bold 11px sans-serif";var a=this.shorttitle;i.fillText(a,5,12)}i.restore()}}}},{key:"drawLine",value:function(t,e,i,n,r,o,a,l,c){if(e&&0!==e.length){var s=l.visibleRange,u=Math.max(0,s.start),f=Math.min(e.length,s.end),h=e.slice(u,f),p=u-s.start;t.strokeStyle=n,t.lineWidth=r,t.beginPath();var d=!1;h.forEach(function(e,i){if(null!==e&&!isNaN(e)){var n=s.start+p+i,r=l.indexToX(n)+l.candleWidth/2,o=l.priceToY(e);d?t.lineTo(r,o):(t.moveTo(r,o),d=!0)}}),t.stroke()}}}])&&r(i.prototype,n),o&&r(i,o),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n,o}(i(8018).A)}}]);