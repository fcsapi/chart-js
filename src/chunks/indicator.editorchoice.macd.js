"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.editorchoice.macd"],{579:(e,t,o)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=i(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function a(e,t,o){return t=s(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n()?Reflect.construct(t,o||[],s(e).constructor):t.apply(e,o))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}o.r(t),o.d(t,{default:()=>u});const u=function(e){function t(e,o,i){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=a(this,t,[e,o,i])).title="Moving Average Convergence Divergence",l.shorttitle="MACD",l.precision=2,l.fast_length=void 0!==o.fast_length?o.fast_length:12,l.slow_length=void 0!==o.slow_length?o.slow_length:26,l.src=void 0!==o.src?o.src:"close",l.signal_length=void 0!==o.signal_length?o.signal_length:9,l.sma_source=void 0!==o.sma_source?o.sma_source:"EMA",l.sma_signal=void 0!==o.sma_signal?o.sma_signal:"EMA",l.histColor1=o.histColor1||"#26A69A",l.histColor2=o.histColor2||"#B2DFDB",l.histColor3=o.histColor3||"#FFCDD2",l.histColor4=o.histColor4||"#FF5252",l.macdColor=o.macdColor||"#2962FF",l.signalColor=o.signalColor||"#FF6D00",l.zerolineLevel=void 0!==o.zerolineLevel?o.zerolineLevel:0,l.zerolineColor=o.zerolineColor||"rgba(120, 123, 134, 0.5)",l.zerolineVisible=void 0===o.zerolineVisible||o.zerolineVisible,l.panelType="separate",l.panelHeight=150,l.plots=[{dataKey:"hist",colorKey:"histColor",title:"Histogram"},{dataKey:"macd",colorKey:"macdColor",title:"MACD"},{dataKey:"signal",colorKey:"signalColor",title:"Signal"}],l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),o=t,r=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"fast_length",label:"Fast Length",type:"number",default:12,step:1},{key:"slow_length",label:"Slow Length",type:"number",default:26,step:1},{key:"src",label:"Source",type:"source",default:"close"},{key:"signal_length",label:"Signal Smoothing",type:"number",default:9,min:1,max:50,step:1},{key:"sma_source",label:"Oscillator MA Type",type:"select",default:"EMA",options:["SMA","EMA"]},{key:"sma_signal",label:"Signal Line MA Type",type:"select",default:"EMA",options:["SMA","EMA"]}],style:[{key:"histColor1",label:"Histogram #1",type:"color",default:"#26A69A"},{key:"histColor2",label:"Histogram #2",type:"color",default:"#B2DFDB"},{key:"histColor3",label:"Histogram #3",type:"color",default:"#FFCDD2"},{key:"histColor4",label:"Histogram #4",type:"color",default:"#FF5252"},{key:"macdColor",label:"MACD",type:"color",default:"#2962FF"},{key:"signalColor",label:"Signal",type:"color",default:"#FF6D00"},{key:"zerolineLevel",label:"Zero Line",type:"number",default:0,step:1},{key:"zerolineColor",label:"Zero Line",type:"color",default:"rgba(120, 123, 134, 0.5)"},{key:"zerolineVisible",label:"Zero Line",type:"checkbox",default:!0}]}}}],(i=[{key:"calculate",value:function(){var e=this,t=this.engine.data,o=this.engine.dataManager,i=t.map(function(t){return t[e.src]}),l="SMA"==this.sma_source?o.calculateSMAFromArray(i,this.fast_length):o.calculateEMAFromArray(i,this.fast_length),r="SMA"==this.sma_source?o.calculateSMAFromArray(i,this.slow_length):o.calculateEMAFromArray(i,this.slow_length),a=l&&r?l.map(function(e,t){return e-r[t]}):null,n="SMA"==this.sma_signal?o.calculateSMAFromArray(a,this.signal_length):o.calculateEMAFromArray(a,this.signal_length),s=a&&n?a.map(function(e,t){return e-n[t]}):null;this.data={hist:s,macd:a,signal:n}}},{key:"render",value:function(e,t){var o=this;if(this.visible&&this.data){var i=e.ctx,l=e.dpr,r=this.engine,a=r.data;if(this.data.hist&&this.data.hist.length===a.length||(this.calculate(),this.data&&this.data.hist)){var n=t?t.top:0,s=n+0,c=n+(t?t.height:100)-0-s;i.save(),i.scale(l,l),this.zerolineVisible&&this.drawHLine(i,s,c,this.zerolineLevel,this.zerolineColor,r,l,t),this.drawHistogram(i,this.data.hist,this.histColor,s,c,r,t,function(e,t,i){return e>=0?t<e?o.histColor1:o.histColor2:t<e?o.histColor3:o.histColor4}),this.drawLine(i,this.data.macd,!1,this.macdColor,2,s,c,r,t),this.drawLine(i,this.data.signal,!1,this.signalColor,2,s,c,r,t),i.restore()}}}},{key:"drawLine",value:function(e,t,o,i,l,r,a,n,s){if(t&&0!==t.length){var c=n.visibleRange,u=Math.max(0,c.start),h=Math.min(t.length,c.end),f=t.slice(u,h),y=u-c.start;e.strokeStyle=i,e.lineWidth=l,e.beginPath();var d=!1;f.forEach(function(t,i){if(null!==t&&!isNaN(t)){var l,u=c.start+y+i,h=n.indexToX(u)+n.candleWidth/2;if(o)l=n.priceToY(t);else{var f=s&&void 0!==s.minValue?s.minValue:0,g=s&&void 0!==s.maxValue?s.maxValue:100;l=r+a-(t-f)/(g-f)*a}d?e.lineTo(h,l):(e.moveTo(h,l),d=!0)}}),e.stroke()}}},{key:"drawHistogram",value:function(e,t,o,i,l,r,a,n){if(t&&0!==t.length)for(var s=r.visibleRange,c=a&&void 0!==a.minValue?a.minValue:0,u=(a&&void 0!==a.maxValue?a.maxValue:100)-c,h=i+l,f=h-(0-c)/u*l,y=s.start;y<s.end;y++)if(!(y<0||y>=t.length)){var d=t[y];if(null!=d&&!isNaN(d)){var g=r.indexToX(y)+r.candleWidth/2,p=h-(d-c)/u*l,m=Math.max(1,.8*r.candleWidth);if(n){var b=y>0?t[y-1]:d;e.fillStyle=n(d,b)}else e.fillStyle=o;var v=Math.abs(p-f),C=d>=0?p:f;e.fillRect(g-m/2,C,m,v)}}}},{key:"drawHLine",value:function(e,t,o,i,l,r,a,n){var s=n&&void 0!==n.minValue?n.minValue:0,c=t+o-(i-s)/((n&&void 0!==n.maxValue?n.maxValue:100)-s)*o;e.strokeStyle=l,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,c),e.lineTo(r.canvas.width/a,c),e.stroke(),e.setLineDash([])}}])&&l(o.prototype,i),r&&l(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,r}(o(8018).A)}}]);