"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.waddah-attar-explosion"],{2282:(t,e,n)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,i(o.key),o)}}function i(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}function l(t,e,n){return e=u(e),function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],u(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function s(t,e){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},s(t,e)}n.r(e),n.d(e,{default:()=>c});const c=function(t){function e(t,n,o){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=l(this,e,[t,n,o])).title="Waddah Attar Explosion",r.shorttitle="WAE",r.precision=2,r.sensitivity=void 0!==n.sensitivity?n.sensitivity:150,r.fastLength=void 0!==n.fastLength?n.fastLength:20,r.slowLength=void 0!==n.slowLength?n.slowLength:40,r.channelLength=void 0!==n.channelLength?n.channelLength:20,r.mult=void 0!==n.mult?n.mult:2,r.explosionUpColor=n.explosionUpColor||"#26A69A",r.explosionDownColor=n.explosionDownColor||"#EF5350",r.deadZoneColor=n.deadZoneColor||"#FFB74D",r.trendUpColor=n.trendUpColor||"#4CAF50",r.trendDownColor=n.trendDownColor||"#F44336",r.panelType="separate",r.panelHeight=150,r.plots=[{dataKey:"explosion",colorKey:"explosionColor",title:"Explosion"},{dataKey:"deadZone",colorKey:"deadZoneColor",title:"Dead Zone"}],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&s(t,e)}(e,t),n=e,i=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"sensitivity",label:"Sensitivity",type:"number",default:150,min:1,max:300,step:1},{key:"fastLength",label:"Fast Length",type:"number",default:20,min:1,max:500,step:1},{key:"slowLength",label:"Slow Length",type:"number",default:40,min:1,max:500,step:1},{key:"channelLength",label:"Channel Length",type:"number",default:20,min:1,max:500,step:1},{key:"mult",label:"Multiplier",type:"number",default:2,min:.1,max:10,step:.1}],style:[{key:"trendUpColor",label:"Trend Up",type:"color",default:"#4CAF50"},{key:"trendDownColor",label:"Trend Down",type:"color",default:"#F44336"},{key:"deadZoneColor",label:"Dead Zone",type:"color",default:"#FFB74D"}]}}}],(o=[{key:"calculate",value:function(){var t=this,e=this.engine.data,n=this.engine.dataManager;if(e&&0!==e.length){for(var o=e.map(function(t){return t.close}),r=n.calculateEMAFromArray(o,this.fastLength),i=n.calculateEMAFromArray(o,this.slowLength),l=r.map(function(t,e){return null!==t&&null!==i[e]?t-i[e]:null}),a=n.calculateSMAFromArray(o,this.channelLength),u=[],s=0;s<o.length;s++)if(s<this.channelLength-1)u[s]=null;else{for(var c=0,f=0;f<this.channelLength;f++)c+=Math.pow(o[s-f]-a[s],2);u[s]=Math.sqrt(c/this.channelLength)}var p=a.map(function(e,n){return null!==e&&null!==u[n]?e+t.mult*u[n]:null}),d=a.map(function(e,n){return null!==e&&null!==u[n]?e-t.mult*u[n]:null}),h=l.map(function(e){return null!==e?Math.abs(e)*t.sensitivity:null}),y=p.map(function(e,n){return null!==e&&null!==d[n]?(e-d[n])*t.sensitivity:null}),m=l.map(function(t){return null!==t?t>0?1:-1:0});this.data={explosion:h,deadZone:y,trendDirection:m}}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var n=t.ctx,o=t.dpr,r=this.engine;if(this.data.explosion&&this.data.explosion.length===r.data.length||(this.calculate(),this.data&&this.data.explosion)){var i=e?e.top:0,l=i+0,a=i+(e?e.height:100)-0-l;n.save(),n.scale(o,o),this.drawLine(n,this.data.deadZone,this.deadZoneColor,2,l,a,r,e),this.drawExplosionHistogram(n,l,a,r,e),n.restore()}}}},{key:"drawExplosionHistogram",value:function(t,e,n,o,r){var i=this.data.explosion,l=this.data.trendDirection;if(i)for(var a=o.visibleRange,u=Math.max(0,a.start),s=Math.min(i.length,a.end),c=r&&void 0!==r.minValue?r.minValue:0,f=(r&&void 0!==r.maxValue?r.maxValue:100)-c,p=e+n,d=u;d<s;d++){var h=i[d];if(null!==h&&!isNaN(h)){var y=o.indexToX(d),m=.8*o.candleWidth,v=(h-c)/f*n,b=p-v;t.fillStyle=l[d]>0?this.trendUpColor:this.trendDownColor,t.fillRect(y+(o.candleWidth-m)/2,b,m,v)}}}},{key:"drawLine",value:function(t,e,n,o,r,i,l,a){if(e){var u=l.visibleRange,s=Math.max(0,u.start),c=Math.min(e.length,u.end);t.strokeStyle=n,t.lineWidth=o,t.beginPath();for(var f=!1,p=s;p<c;p++){var d=e[p];if(null!==d&&!isNaN(d)){var h=l.indexToX(p)+l.candleWidth/2,y=a&&void 0!==a.minValue?a.minValue:0,m=r+i-(d-y)/((a&&void 0!==a.maxValue?a.maxValue:100)-y)*i;f?t.lineTo(h,m):(t.moveTo(h,m),f=!0)}}t.stroke()}}}])&&r(n.prototype,o),i&&r(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(n(8018).A)}}]);