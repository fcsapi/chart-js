"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.signals.range-breakout-signal"],{8691:(e,t,o)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(e){if("string"==typeof e)return a(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return l=e.done,e},e:function(e){s=!0,i=e},f:function(){try{l||null==o.return||o.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function i(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,o){return t=h(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,o||[],h(e).constructor):t.apply(e,o))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}o.r(t),o.d(t,{default:()=>f});const f=function(e){function t(e,o,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=s(this,t,[e,o,r])).title="Range Breakout",n.shorttitle="Range BO",n.precision=2,n.rangePeriod=void 0!==o.rangePeriod?o.rangePeriod:20,n.rangeThreshold=void 0!==o.rangeThreshold?o.rangeThreshold:3,n.breakoutStrength=void 0!==o.breakoutStrength?o.breakoutStrength:.5,n.showRangeZone=void 0===o.showRangeZone||o.showRangeZone,n.showLabels=void 0===o.showLabels||o.showLabels,n.upBreakoutColor=o.upBreakoutColor||"#00E676",n.downBreakoutColor=o.downBreakoutColor||"#FF1744",n.rangeZoneColor=o.rangeZoneColor||"rgba(158, 158, 158, 0.15)",n.panelType="main",n.plots=[{dataKey:"signals",colorKey:"upBreakoutColor",title:"Range Breakouts"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(t,e),o=t,a=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"rangePeriod",label:"Range Period",type:"number",default:20,min:10,max:100,step:5},{key:"rangeThreshold",label:"Range Threshold %",type:"number",default:3,min:.5,max:10,step:.5},{key:"breakoutStrength",label:"Breakout Strength %",type:"number",default:.5,min:.1,max:2,step:.1},{key:"showRangeZone",label:"Show Range Zone",type:"checkbox",default:!0},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"upBreakoutColor",label:"Upside Breakout",type:"color",default:"#00E676"},{key:"downBreakoutColor",label:"Downside Breakout",type:"color",default:"#FF1744"},{key:"rangeZoneColor",label:"Range Zone",type:"color",default:"rgba(158, 158, 158, 0.15)"}]}}}],(r=[{key:"calculate",value:function(){for(var e=this.engine.data,t=[],o=e.map(function(){return null}),r=this.rangePeriod;r<e.length;r++){for(var n=-1/0,a=1/0,i=0;i<this.rangePeriod;i++){var l=r-i;l>=0&&(n=Math.max(n,e[l].high),a=Math.min(a,e[l].low))}var s=(n+a)/2;if((n-a)/s*100<=this.rangeThreshold){var u=e[r],h=s*(this.breakoutStrength/100);u.close>n+h&&e[r-1].close<=n?(o[r]={type:"up",price:u.high,rangeHigh:n,rangeLow:a,strength:(u.close-n)/n*100},t.push({index:r,high:n,low:a,startIndex:r-this.rangePeriod})):u.close<a-h&&e[r-1].close>=a&&(o[r]={type:"down",price:u.low,rangeHigh:n,rangeLow:a,strength:(a-u.close)/a*100},t.push({index:r,high:n,low:a,startIndex:r-this.rangePeriod}))}}this.data={signals:o,ranges:t}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var o=e.ctx,r=e.getDpr(),a=this.engine,i=a.data;if(this.data.signals&&this.data.signals.length===i.length||(this.calculate(),this.data&&this.data.signals)){o.save(),o.scale(r,r);var l=a.visibleRange;if(this.showRangeZone&&this.data.ranges){var s,u=n(this.data.ranges);try{for(u.s();!(s=u.n()).done;){var h=s.value;h.index>=l.start&&h.startIndex<=l.end&&this.drawRangeZone(o,a,h)}}catch(p){u.e(p)}finally{u.f()}}for(var c=l.start;c<l.end;c++)if(!(c<0||c>=this.data.signals.length)){var f=this.data.signals[c];if(f){var d=a.indexToX(c)+a.candleWidth/2,g=a.priceToY(f.price);"up"===f.type?(this.drawUpBreakout(o,d,g),this.showLabels&&this.drawLabel(o,d,g,"BO↑",this.upBreakoutColor)):"down"===f.type&&(this.drawDownBreakout(o,d,g),this.showLabels&&this.drawLabel(o,d,g,"BO↓",this.downBreakoutColor))}}o.restore()}}}},{key:"drawRangeZone",value:function(e,t,o){var r=t.indexToX(o.startIndex),n=t.indexToX(o.index),a=t.priceToY(o.high),i=t.priceToY(o.low);e.fillStyle=this.rangeZoneColor,e.fillRect(r,a,n-r,i-a),e.strokeStyle="rgba(158, 158, 158, 0.5)",e.lineWidth=1,e.setLineDash([3,3]),e.beginPath(),e.moveTo(r,a),e.lineTo(n,a),e.stroke(),e.beginPath(),e.moveTo(r,i),e.lineTo(n,i),e.stroke(),e.setLineDash([])}},{key:"drawUpBreakout",value:function(e,t,o){var r=15;e.strokeStyle=this.upBreakoutColor,e.fillStyle=this.upBreakoutColor,e.lineWidth=2.5,e.beginPath(),e.moveTo(t,o-r-12),e.lineTo(t-8,o-r-2),e.lineTo(t+8,o-r-2),e.closePath(),e.fill(),e.beginPath(),e.moveTo(t,o-r-2),e.lineTo(t,o-r+8),e.stroke(),e.lineWidth=1.5,e.beginPath(),e.moveTo(t-10,o-r),e.lineTo(t-5,o-r),e.stroke(),e.beginPath(),e.moveTo(t+10,o-r),e.lineTo(t+5,o-r),e.stroke()}},{key:"drawDownBreakout",value:function(e,t,o){var r=15;e.strokeStyle=this.downBreakoutColor,e.fillStyle=this.downBreakoutColor,e.lineWidth=2.5,e.beginPath(),e.moveTo(t,o+r+12),e.lineTo(t-8,o+r+2),e.lineTo(t+8,o+r+2),e.closePath(),e.fill(),e.beginPath(),e.moveTo(t,o+r+2),e.lineTo(t,o+r-8),e.stroke(),e.lineWidth=1.5,e.beginPath(),e.moveTo(t-10,o+r),e.lineTo(t-5,o+r),e.stroke(),e.beginPath(),e.moveTo(t+10,o+r),e.lineTo(t+5,o+r),e.stroke()}},{key:"drawLabel",value:function(e,t,o,r,n){e.font="bold 9px sans-serif",e.fillStyle=n,e.textAlign="center";var a=r.includes("↑")?-35:35;e.fillText(r,t,o+a)}}])&&i(o.prototype,r),a&&i(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,a}(o(8018).A)}}]);