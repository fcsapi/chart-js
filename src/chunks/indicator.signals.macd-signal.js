"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.signals.macd-signal"],{1599:(t,e,n)=>{function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function r(t,e){for(var n=0;n<e.length;n++){var l=e[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(t,o(l.key),l)}}function o(t){var e=function(t,e){if("object"!=l(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==l(e)?e:e+""}function i(t,e,n){return e=s(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}n.r(e),n.d(e,{default:()=>c});const c=function(t){function e(t,n,l){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=i(this,e,[t,n,l])).title="MACD Signal",r.shorttitle="MACD Sig",r.precision=2,r.fastLength=void 0!==n.fastLength?n.fastLength:12,r.slowLength=void 0!==n.slowLength?n.slowLength:26,r.signalLength=void 0!==n.signalLength?n.signalLength:9,r.showLabels=void 0===n.showLabels||n.showLabels,r.buyColor=n.buyColor||"#26A69A",r.sellColor=n.sellColor||"#EF5350",r.panelType="main",r.plots=[{dataKey:"signals",colorKey:"buyColor",title:"Signals"}],r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),n=e,o=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"fastLength",label:"Fast Length",type:"number",default:12,min:1,max:100,step:1},{key:"slowLength",label:"Slow Length",type:"number",default:26,min:1,max:100,step:1},{key:"signalLength",label:"Signal Length",type:"number",default:9,min:1,max:50,step:1},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"buyColor",label:"Buy Signal",type:"color",default:"#26A69A"},{key:"sellColor",label:"Sell Signal",type:"color",default:"#EF5350"}]}}}],(l=[{key:"calculate",value:function(){var t=this.engine.data,e=this.engine.dataManager,n=t.map(function(t){return t.close}),l=e.calculateEMAFromArray(n,this.fastLength),r=e.calculateEMAFromArray(n,this.slowLength),o=l.map(function(t,e){return null===t||null===r[e]?null:t-r[e]}),i=e.calculateEMAFromArray(o,this.signalLength),a=t.map(function(t,e){return 0===e||null===o[e]||null===o[e-1]||null===i[e]||null===i[e-1]?null:o[e-1]<=i[e-1]&&o[e]>i[e]?{type:"buy",price:t.low}:o[e-1]>=i[e-1]&&o[e]<i[e]?{type:"sell",price:t.high}:null});this.data={signals:a,macd:o,signal:i}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var n=t.ctx,l=t.getDpr(),r=this.engine,o=r.data;if(this.data.signals&&this.data.signals.length===o.length||(this.calculate(),this.data&&this.data.signals)){n.save(),n.scale(l,l);for(var i=r.visibleRange,a=i.start;a<i.end;a++)if(!(a<0||a>=this.data.signals.length)){var s=this.data.signals[a];if(s){var u=r.indexToX(a)+r.candleWidth/2,c=r.priceToY(s.price);"buy"===s.type?(this.drawBuyArrow(n,u,c),this.showLabels&&this.drawLabel(n,u,c,"BUY",this.buyColor)):"sell"===s.type&&(this.drawSellArrow(n,u,c),this.showLabels&&this.drawLabel(n,u,c,"SELL",this.sellColor))}}n.restore()}}}},{key:"drawBuyArrow",value:function(t,e,n){t.fillStyle=this.buyColor,t.beginPath(),t.moveTo(e,n+15),t.lineTo(e-8,n+15+8),t.lineTo(e+8,n+15+8),t.closePath(),t.fill(),t.fillRect(e-2,n+15,4,10)}},{key:"drawSellArrow",value:function(t,e,n){t.fillStyle=this.sellColor,t.beginPath(),t.moveTo(e,n-15),t.lineTo(e-8,n-15-8),t.lineTo(e+8,n-15-8),t.closePath(),t.fill(),t.fillRect(e-2,n-15-10,4,10)}},{key:"drawLabel",value:function(t,e,n,l,r){t.font="bold 10px sans-serif",t.fillStyle=r,t.textAlign="center";var o="BUY"===l?35:-25;t.fillText(l,e,n+o)}}])&&r(n.prototype,l),o&&r(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,l,o}(n(8018).A)}}]);