"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.squeeze-momentum"],{1965:(e,t,n)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var l=n.call(e,t||"default");if("object"!=o(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function i(e,t,n){return t=a(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,u()?Reflect.construct(t,n||[],a(e).constructor):t.apply(e,n))}function u(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(u=function(){return!!e})()}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}n.r(t),n.d(t,{default:()=>c});const c=function(e){function t(e,n,o){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=i(this,t,[e,n,o])).title="Squeeze Momentum",l.shorttitle="Squeeze",l.precision=2,l.bbLength=void 0!==n.bbLength?n.bbLength:20,l.bbMult=void 0!==n.bbMult?n.bbMult:2,l.kcLength=void 0!==n.kcLength?n.kcLength:20,l.kcMult=void 0!==n.kcMult?n.kcMult:1.5,l.linewidth=void 0!==n.linewidth?n.linewidth:2,l.momentumPosColor=n.momentumPosColor||"#26A69A",l.momentumNegColor=n.momentumNegColor||"#EF5350",l.squeezeOnColor=n.squeezeOnColor||"#FF0000",l.squeezeOffColor=n.squeezeOffColor||"#00FF00",l.zerolineLevel=void 0!==n.zerolineLevel?n.zerolineLevel:0,l.zerolineColor=n.zerolineColor||"#787B86",l.zerolineVisible=void 0===n.zerolineVisible||n.zerolineVisible,l.panelType="separate",l.panelHeight=150,l.plots=[{dataKey:"momentum",colorKey:"momentumPosColor",title:"Momentum"},{dataKey:"squeeze",colorKey:"squeezeOnColor",title:"Squeeze"}],l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),n=t,r=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"bbLength",label:"BB Length",type:"number",default:20,min:1,max:100,step:1},{key:"bbMult",label:"BB Multiplier",type:"number",default:2,min:.5,max:5,step:.1},{key:"kcLength",label:"KC Length",type:"number",default:20,min:1,max:100,step:1},{key:"kcMult",label:"KC Multiplier",type:"number",default:1.5,min:.5,max:5,step:.1},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:10,step:1}],style:[{key:"momentumPosColor",label:"Momentum Positive",type:"color",default:"#26A69A"},{key:"momentumNegColor",label:"Momentum Negative",type:"color",default:"#EF5350"},{key:"squeezeOnColor",label:"Squeeze On",type:"color",default:"#FF0000"},{key:"squeezeOffColor",label:"Squeeze Off",type:"color",default:"#00FF00"},{key:"zerolineColor",label:"Zero Line",type:"color",default:"#787B86"},{key:"zerolineVisible",label:"Zero Line",type:"checkbox",default:!0}]}}}],(o=[{key:"calculate",value:function(){var e=this,t=this.engine.data,n=this.engine.dataManager,o=t.map(function(e){return e.close}),l=t.map(function(e){return e.high}),r=t.map(function(e){return e.low}),i=n.calculateSMAFromArray(o,this.bbLength),u=this.calculateStdDev(o,i,this.bbLength),a=i.map(function(t,n){return null===t||null===u[n]?null:t+e.bbMult*u[n]}),s=i.map(function(t,n){return null===t||null===u[n]?null:t-e.bbMult*u[n]}),c=n.calculateSMAFromArray(o,this.kcLength),m=n.calculateATR(t,this.kcLength),f=c.map(function(t,n){return null===t||null===m[n]?null:t+e.kcMult*m[n]}),h=c.map(function(t,n){return null===t||null===m[n]?null:t-e.kcMult*m[n]}),d=t.map(function(e,t){return null===s[t]||null===a[t]||null===h[t]||null===f[t]?null:s[t]>h[t]&&a[t]<f[t]?1:0}),b=this.calculateLinearRegMomentum(l,r,o,this.kcLength);this.data={momentum:b,squeeze:d}}},{key:"calculateStdDev",value:function(e,t,n){return e.map(function(o,l){if(l<n-1||null===t[l])return null;for(var r=t[l],i=0,u=0;u<n;u++){var a=e[l-u]-r;i+=a*a}return i/=n,Math.sqrt(i)})}},{key:"calculateLinearRegMomentum",value:function(e,t,n,o){return n.map(function(l,r){if(r<o-1)return null;for(var i=-1/0,u=1/0,a=0;a<o;a++)e[r-a]>i&&(i=e[r-a]),t[r-a]<u&&(u=t[r-a]);for(var s=(i+u)/2,c=[],m=0;m<o;m++)c.push(n[r-m]-s);for(var f=0,h=0,d=0,b=0,p=0;p<o;p++){var y=p,v=c[o-1-p];f+=y,h+=v,d+=y*v,b+=y*y}return(o*d-f*h)/(o*b-f*f)})}},{key:"render",value:function(e,t){if(this.visible&&this.data){var n=e.ctx,o=e.dpr,l=this.engine,r=l.data;if(this.data.momentum&&this.data.momentum.length===r.length||(this.calculate(),this.data&&this.data.momentum)){var i=t?t.top:0,u=i+0,a=i+(t?t.height:100)-0-u;n.save(),n.scale(o,o),this.zerolineVisible&&this.drawHLine(n,u,a,this.zerolineLevel,this.zerolineColor,l,o,t),this.drawMomentumHistogram(n,u,a,l,t),this.drawSqueezeDots(n,u,l,t),n.fillStyle="#d1d4dc",n.font="bold 11px sans-serif";var s=this.shorttitle;n.fillText(s,5,i+12);var c=l.visibleRange.end-1;if(t&&void 0!==t.hoveredIndex&&null!==t.hoveredIndex&&(c=t.hoveredIndex),c>=0&&c<this.data.momentum.length){n.font="11px sans-serif";var m=5+n.measureText(s).width+10,f=this.data.momentum[c];if(null!=f){var h=f>=0?this.momentumPosColor:this.momentumNegColor;n.fillStyle=h;var d="Momentum: "+f.toFixed(4);n.fillText(d,m,i+12),m+=n.measureText(d).width+10}var b=this.data.squeeze[c];if(null!=b){var p=1===b?"SQUEEZE ON":"SQUEEZE OFF";n.fillStyle=1===b?this.squeezeOnColor:this.squeezeOffColor,n.fillText(p,m,i+12)}}n.restore()}}}},{key:"drawMomentumHistogram",value:function(e,t,n,o,l){if(this.data.momentum&&0!==this.data.momentum.length)for(var r=o.visibleRange,i=l&&void 0!==l.minValue?l.minValue:0,u=(l&&void 0!==l.maxValue?l.maxValue:100)-i,a=t+n,s=a-(0-i)/u*n,c=r.start;c<r.end;c++)if(!(c<0||c>=this.data.momentum.length)){var m=this.data.momentum[c];if(null!=m&&!isNaN(m)){var f=c>0?this.data.momentum[c-1]:m,h=o.indexToX(c)+o.candleWidth/2,d=a-(m-i)/u*n,b=Math.max(1,.6*o.candleWidth),p=void 0;p=m>=0?m>=f?"#26A69A":"#26A69ACC":m<=f?"#EF5350":"#EF5350CC",e.fillStyle=p;var y=Math.abs(d-s),v=m>=0?d:s;e.fillRect(h-b/2,v,b,y)}}}},{key:"drawSqueezeDots",value:function(e,t,n,o){if(this.data.squeeze&&0!==this.data.squeeze.length)for(var l=n.visibleRange,r=t-8,i=l.start;i<l.end;i++)if(!(i<0||i>=this.data.squeeze.length)){var u=this.data.squeeze[i];if(null!=u){var a=n.indexToX(i)+n.candleWidth/2,s=1===u?this.squeezeOnColor:this.squeezeOffColor;e.fillStyle=s,e.beginPath(),e.arc(a,r,3,0,2*Math.PI),e.fill()}}}},{key:"drawHLine",value:function(e,t,n,o,l,r,i,u){var a=u&&void 0!==u.minValue?u.minValue:0,s=t+n-(o-a)/((u&&void 0!==u.maxValue?u.maxValue:100)-a)*n;e.strokeStyle=l,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,s),e.lineTo(r.canvas.width/i,s),e.stroke(),e.setLineDash([])}}])&&l(n.prototype,o),r&&l(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}(n(8018).A)}}]);