"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.editorchoice.stochastic"],{7599:(e,t,o)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,a(i.key),i)}}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function l(e,t,o){return t=d(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n()?Reflect.construct(t,o||[],d(e).constructor):t.apply(e,o))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n=function(){return!!e})()}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}o.r(t),o.d(t,{default:()=>b});const b=function(e){function t(e,o,i){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=l(this,t,[e,o,i])).title="Stochastic",r.shorttitle="Stoch",r.precision=2,r.periodK=void 0!==o.periodK?o.periodK:14,r.smoothK=void 0!==o.smoothK?o.smoothK:1,r.periodD=void 0!==o.periodD?o.periodD:3,r.kColor=o.kColor||"#2962FF",r.dColor=o.dColor||"#FF6D00",r.upperbandLevel=void 0!==o.upperbandLevel?o.upperbandLevel:80,r.upperbandColor=o.upperbandColor||"#787B86",r.upperbandVisible=void 0===o.upperbandVisible||o.upperbandVisible,r.middlebandLevel=void 0!==o.middlebandLevel?o.middlebandLevel:50,r.middlebandColor=o.middlebandColor||"rgba(120, 123, 134, 0.5)",r.middlebandVisible=void 0===o.middlebandVisible||o.middlebandVisible,r.lowerbandLevel=void 0!==o.lowerbandLevel?o.lowerbandLevel:20,r.lowerbandColor=o.lowerbandColor||"#787B86",r.lowerbandVisible=void 0===o.lowerbandVisible||o.lowerbandVisible,r.backgroundColor=o.backgroundColor||"rgba(33, 150, 243, 0.1)",r.backgroundVisible=void 0===o.backgroundVisible||o.backgroundVisible,r.panelType="separate",r.panelHeight=150,r.plots=[{dataKey:"k",colorKey:"kColor",title:"%K"},{dataKey:"d",colorKey:"dColor",title:"%D"}],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),o=t,a=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"periodK",label:"%K Length",type:"number",default:14,min:1,step:1},{key:"smoothK",label:"%K Smoothing",type:"number",default:1,min:1,step:1},{key:"periodD",label:"%D Smoothing",type:"number",default:3,min:1,step:1}],style:[{key:"kColor",label:"%K",type:"color",default:"#2962FF"},{key:"dColor",label:"%D",type:"color",default:"#FF6D00"},{key:"upperbandLevel",label:"Upper Band",type:"number",default:80,step:1},{key:"upperbandColor",label:"Upper Band",type:"color",default:"#787B86"},{key:"upperbandVisible",label:"Upper Band",type:"checkbox",default:!0},{key:"middlebandLevel",label:"Middle Band",type:"number",default:50,step:1},{key:"middlebandColor",label:"Middle Band",type:"color",default:"rgba(120, 123, 134, 0.5)"},{key:"middlebandVisible",label:"Middle Band",type:"checkbox",default:!0},{key:"lowerbandLevel",label:"Lower Band",type:"number",default:20,step:1},{key:"lowerbandColor",label:"Lower Band",type:"color",default:"#787B86"},{key:"lowerbandVisible",label:"Lower Band",type:"checkbox",default:!0},{key:"backgroundColor",label:"Background",type:"color",default:"rgba(33, 150, 243, 0.1)"},{key:"backgroundVisible",label:"Background",type:"checkbox",default:!0}]}}}],(i=[{key:"calculate",value:function(){var e=this,t=this.engine.data,o=this.engine.dataManager,i=o.calculateSMAFromArray(t.map(function(o,i){if(i<e.periodK-1)return null;for(var r=-1/0,a=1/0,l=0;l<e.periodK;l++){var n=i-l;r=Math.max(r,t[n].high),a=Math.min(a,t[n].low)}var d=r-a;return 0!==d?(t[i].close-a)/d*100:50}),this.smoothK),r=o.calculateSMAFromArray(i,this.periodD);this.data={k:i,d:r}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var o=e.ctx,i=e.dpr,r=this.engine,a=r.data;if(this.data.k&&this.data.k.length===a.length||(this.calculate(),this.data&&this.data.k)){var l=t?t.top:0,n=l+0,d=l+(t?t.height:100)-0-n;o.save(),o.scale(i,i),this.backgroundVisible&&this.drawFill(o,n,d,this.upperbandLevel,this.lowerbandLevel,this.backgroundColor,r,i,t),this.upperbandVisible&&this.drawHLine(o,n,d,this.upperbandLevel,this.upperbandColor,r,i,t),this.middlebandVisible&&this.drawHLine(o,n,d,this.middlebandLevel,this.middlebandColor,r,i,t),this.lowerbandVisible&&this.drawHLine(o,n,d,this.lowerbandLevel,this.lowerbandColor,r,i,t),this.drawLine(o,this.data.k,!1,this.kColor,2,n,d,r,t),this.drawLine(o,this.data.d,!1,this.dColor,2,n,d,r,t),o.restore()}}}},{key:"drawLine",value:function(e,t,o,i,r,a,l,n,d){if(t&&0!==t.length){var u=n.visibleRange,b=Math.max(0,u.start),s=Math.min(t.length,u.end),c=t.slice(b,s),p=b-u.start;e.strokeStyle=i,e.lineWidth=r,e.beginPath();var f=!1;c.forEach(function(t,i){if(null!==t&&!isNaN(t)){var r,b=u.start+p+i,s=n.indexToX(b)+n.candleWidth/2;if(o)r=n.priceToY(t);else{var c=d&&void 0!==d.minValue?d.minValue:0,h=d&&void 0!==d.maxValue?d.maxValue:100;r=a+l-(t-c)/(h-c)*l}f?e.lineTo(s,r):(e.moveTo(s,r),f=!0)}}),e.stroke()}}},{key:"drawHistogram",value:function(e,t,o,i,r,a,l,n){if(t&&0!==t.length)for(var d=a.visibleRange,u=l&&void 0!==l.minValue?l.minValue:0,b=(l&&void 0!==l.maxValue?l.maxValue:100)-u,s=i+r,c=s-(0-u)/b*r,p=d.start;p<d.end;p++)if(!(p<0||p>=t.length)){var f=t[p];if(null!=f&&!isNaN(f)){var h=a.indexToX(p)+a.candleWidth/2,y=s-(f-u)/b*r,v=Math.max(1,.8*a.candleWidth);if(n){var m=p>0?t[p-1]:f;e.fillStyle=n(f,m)}else e.fillStyle=o;var k=Math.abs(y-c),g=f>=0?y:c;e.fillRect(h-v/2,g,v,k)}}}},{key:"drawHLine",value:function(e,t,o,i,r,a,l,n){var d=n&&void 0!==n.minValue?n.minValue:0,u=t+o-(i-d)/((n&&void 0!==n.maxValue?n.maxValue:100)-d)*o;e.strokeStyle=r,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,u),e.lineTo(a.canvas.width/l,u),e.stroke(),e.setLineDash([])}},{key:"drawFill",value:function(e,t,o,i,r,a,l,n,d){var u=d&&void 0!==d.minValue?d.minValue:0,b=(d&&void 0!==d.maxValue?d.maxValue:100)-u,s=t+o,c=s-(i-u)/b*o,p=s-(r-u)/b*o;e.fillStyle=a,e.fillRect(0,Math.min(c,p),l.canvas.width/n,Math.abs(p-c))}}])&&r(o.prototype,i),a&&r(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,a}(o(8018).A)}}]);