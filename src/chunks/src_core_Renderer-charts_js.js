"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["src_core_Renderer-charts_js"],{4259:(e,t,o)=>{o.r(t),o.d(t,{attachRendererCharts:()=>a,default:()=>i});var r={renderLineWithMarkers:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("line-with-markers")||this.themeManager.getChartTypeColors("line"),r=this.ctx,a=e.data,i=e.visibleRange,n=this.getDpr();r.save(),r.scale(n,n);var h=o.upColor||t.upColor;r.strokeStyle=h,r.fillStyle=h,r.lineWidth=2;var l=Math.max(0,i.start),s=Math.min(a.length,i.end),c=a.slice(l,s),g=l-i.start,d=[];r.beginPath();var T=!1;c.forEach(function(t,o){var a=i.start+g+o,n=e.indexToX(a),h=e.priceToY(t.close);d.push({x:n,y:h}),T?r.lineTo(n,h):(r.moveTo(n,h),T=!0)}),r.stroke();var v=Math.max(2,Math.min(4,.3*e.candleWidth));d.forEach(function(e){r.beginPath(),r.arc(e.x,e.y,v,0,2*Math.PI),r.fill()}),r.restore()},renderStepLine:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("step-line")||this.themeManager.getChartTypeColors("line"),r=this.ctx,a=e.data,i=e.visibleRange,n=this.getDpr();r.save(),r.scale(n,n);var h=o.upColor||t.upColor;r.strokeStyle=h,r.lineWidth=2;var l=Math.max(0,i.start),s=Math.min(a.length,i.end),c=a.slice(l,s),g=l-i.start;r.beginPath();var d=!1,T=0;c.forEach(function(t,o){var a=i.start+g+o,n=e.indexToX(a),h=e.priceToY(t.close);d?(r.lineTo(n,T),r.lineTo(n,h)):(r.moveTo(n,h),d=!0),T=h}),r.stroke(),r.restore()},renderColoredLine:function(e){var t=this.themeManager.getCurrentTheme(),o=this.ctx,r=e.data,a=e.visibleRange,i=this.getDpr();o.save(),o.scale(i,i);var n=t.upColor||"#26a69a",h=t.downColor||"#ef5350";o.lineWidth=2;for(var l=Math.max(0,a.start),s=Math.min(r.length,a.end),c=r.slice(l,s),g=l-a.start,d=1;d<c.length;d++){var T=c[d-1],v=c[d],f=a.start+g+d-1,p=a.start+g+d,m=e.indexToX(f),C=e.priceToY(T.close),u=e.indexToX(p),M=e.priceToY(v.close);o.strokeStyle=v.close>=T.close?n:h,o.beginPath(),o.moveTo(m,C),o.lineTo(u,M),o.stroke()}o.restore()},renderHLC:function(e){var t=this.themeManager.getCurrentTheme(),o=this.ctx,r=e.data,a=e.visibleRange,i=e.candleWidth,n=this.getDpr();o.save(),o.scale(n,n);var h=t.upColor||"#26a69a",l=t.downColor||"#ef5350",s=t.textColor||"#888888",c=Math.max(0,a.start),g=Math.min(r.length,a.end),d=r.slice(c,g),T=c-a.start,v=[],f=[],p=[];if(d.forEach(function(t,o){var r=a.start+T+o,n=e.indexToX(r)+i/2;v.push({x:n,y:e.priceToY(t.high)}),f.push({x:n,y:e.priceToY(t.low)}),p.push({x:n,y:e.priceToY(t.close)})}),o.lineWidth=1.5,v.length>0){o.strokeStyle=h,o.beginPath(),o.moveTo(v[0].x,v[0].y);for(var m=1;m<v.length;m++)o.lineTo(v[m].x,v[m].y);o.stroke()}if(f.length>0){o.strokeStyle=l,o.beginPath(),o.moveTo(f[0].x,f[0].y);for(var C=1;C<f.length;C++)o.lineTo(f[C].x,f[C].y);o.stroke()}if(p.length>0){o.strokeStyle=s,o.beginPath(),o.moveTo(p[0].x,p[0].y);for(var u=1;u<p.length;u++)o.lineTo(p[u].x,p[u].y);o.stroke()}o.restore()},renderColumns:function(e){var t=this.themeManager.getCurrentTheme(),o=this.ctx,r=e.data,a=e.visibleRange,i=e.candleWidth,n=this.getDpr();o.save(),o.scale(n,n);var h=t.upColor||"#26a69a",l=t.downColor||"#ef5350",s=Math.max(0,a.start),c=Math.min(r.length,a.end),g=r.slice(s,c),d=s-a.start,T=e.height-30;g.forEach(function(t,r){var n=a.start+d+r,s=e.indexToX(n)+i/2,c=e.priceToY(t.close),g=t.close>=t.open?h:l;o.fillStyle=g;var v=Math.max(1,.8*i),f=T-c;o.fillRect(s-v/2,c,v,f)}),o.restore()},renderDots:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("dots")||this.themeManager.getChartTypeColors("line"),r=this.ctx,a=e.data,i=e.visibleRange,n=e.candleWidth,h=this.getDpr();r.save(),r.scale(h,h);var l=o.upColor||t.upColor||"#2196F3";r.fillStyle=l;var s=Math.max(0,i.start),c=Math.min(a.length,i.end),g=a.slice(s,c),d=s-i.start,T=Math.max(2,Math.min(5,.35*n));g.forEach(function(t,o){var a=i.start+d+o,h=e.indexToX(a)+n/2,l=e.priceToY(t.close);r.beginPath(),r.arc(h,l,T,0,2*Math.PI),r.fill()}),r.restore()},renderBaseline:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("baseline")||{},r=this.ctx,a=e.data,i=e.visibleRange,n=this.getDpr();r.save(),r.scale(n,n);var h=Math.max(0,i.start),l=Math.min(a.length,i.end),s=a.slice(h,l),c=h-i.start;if(0!==s.length){var g=(30+(e.height-30))/2,d=o.upColor||t.upColor||"#26a69a",T=o.downColor||t.downColor||"#ef5350",v=[];s.forEach(function(t,o){var r=i.start+c+o,a=e.indexToX(r),n=e.priceToY(t.close);v.push({x:a,y:n})}),r.beginPath(),r.moveTo(v[0].x,g),v.forEach(function(e){r.lineTo(e.x,Math.min(e.y,g))}),r.lineTo(v[v.length-1].x,g),r.closePath(),r.fillStyle=this.hexToRgba(d,.3),r.fill(),r.beginPath(),r.moveTo(v[0].x,g),v.forEach(function(e){r.lineTo(e.x,Math.max(e.y,g))}),r.lineTo(v[v.length-1].x,g),r.closePath(),r.fillStyle=this.hexToRgba(T,.3),r.fill(),r.beginPath(),r.strokeStyle=t.textColor||"#999",r.lineWidth=2,v.forEach(function(e,t){0===t?r.moveTo(e.x,e.y):r.lineTo(e.x,e.y)}),r.stroke(),r.beginPath(),r.setLineDash([4,4]),r.strokeStyle=t.textColor||"#888",r.lineWidth=1,r.moveTo(0,g),r.lineTo(e.width,g),r.stroke(),r.setLineDash([]),r.restore()}else r.restore()},renderAreaChart:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("area"),r=this.ctx,a=e.data,i=e.visibleRange,n=this.getDpr();r.save(),r.scale(n,n);var h=Math.max(0,i.start),l=Math.min(a.length,i.end),s=a.slice(h,l),c=h-i.start,g=o.upColor||t.upColor,d=this.parseColorToRgb(g);if(this.cachedGradient&&this.cachedGradientColor===g&&this.cachedGradientHeight===e.height||(this.cachedGradient=r.createLinearGradient(0,30,0,e.height-30),this.cachedGradient.addColorStop(0,"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", 0.4)")),this.cachedGradient.addColorStop(1,"rgba(".concat(d.r,", ").concat(d.g,", ").concat(d.b,", 0.01)")),this.cachedGradientColor=g,this.cachedGradientHeight=e.height),r.fillStyle=this.cachedGradient,r.beginPath(),s.length>0){var T=i.start+c,v=e.indexToX(T),f=e.height-30;r.moveTo(v,f),s.forEach(function(t,o){var a=i.start+c+o,n=e.indexToX(a),h=e.priceToY(t.close);r.lineTo(n,h)});var p=i.start+c+s.length-1,m=e.indexToX(p);r.lineTo(m,f),r.closePath(),r.fill(),r.strokeStyle=g,r.lineWidth=2,r.beginPath(),s.forEach(function(t,o){var a=e.indexToX(i.start+o),n=e.priceToY(t.close);0===o?r.moveTo(a,n):r.lineTo(a,n)}),r.stroke()}r.restore()},renderBars:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("bars"),r=this.ctx,a=e.data,i=e.visibleRange,n=e.candleWidth,h=this.getDpr();r.save(),r.scale(h,h);var l=Math.max(0,i.start),s=Math.min(a.length,i.end),c=a.slice(l,s),g=l-i.start,d=o.upColor||t.upColor,T=o.downColor||t.downColor,v=n/2;r.lineWidth=2,r.beginPath(),r.strokeStyle=d;for(var f=0;f<c.length;f++){var p=c[f];if(!(p.close<p.open)){var m=i.start+g+f,C=e.indexToX(m),u=e.priceToY(p.open),M=e.priceToY(p.close),x=e.priceToY(p.high),k=e.priceToY(p.low),y=C+v;r.moveTo(y,x),r.lineTo(y,k),r.moveTo(C,u),r.lineTo(y,u),r.moveTo(y,M),r.lineTo(C+n,M)}}r.stroke(),r.beginPath(),r.strokeStyle=T;for(var b=0;b<c.length;b++){var w=c[b];if(!(w.close>=w.open)){var Y=i.start+g+b,S=e.indexToX(Y),R=e.priceToY(w.open),P=e.priceToY(w.close),W=e.priceToY(w.high),D=e.priceToY(w.low),E=S+v;r.moveTo(E,W),r.lineTo(E,D),r.moveTo(S,R),r.lineTo(E,R),r.moveTo(E,P),r.lineTo(S+n,P)}}r.stroke(),r.restore()},renderHollowCandles:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("hollow-candles"),r=this.ctx,a=e.data,i=e.visibleRange,n=e.candleWidth,h=this.getDpr();r.save(),r.scale(h,h);var l=Math.max(0,i.start),s=Math.min(a.length,i.end),c=a.slice(l,s),g=l-i.start,d=t.background;d||(d="light"!==this.themeManager.currentTheme?"#0f0f0f":"#ffffff");var T=o.hollowFill||d;c.forEach(function(a,h){var l=i.start+g+h,s=e.indexToX(l),c=e.priceToY(a.open),d=e.priceToY(a.close),v=e.priceToY(a.high),f=e.priceToY(a.low),p=a.close>=a.open,m=p?o.upBorder||o.upColor||t.upColor:o.downBorder||o.downColor||t.downColor,C=p?T:o.downColor||t.downColor,u=Math.abs(d-c),M=Math.min(c,d),x=M,k=M+u;r.strokeStyle=m,r.lineWidth=1,v<x&&(r.beginPath(),r.moveTo(s+n/2,v),r.lineTo(s+n/2,x),r.stroke()),f>k&&(r.beginPath(),r.moveTo(s+n/2,k),r.lineTo(s+n/2,f),r.stroke()),u<1?(r.strokeStyle=m,r.lineWidth=1,r.beginPath(),r.moveTo(s,M),r.lineTo(s+n,M),r.stroke()):(r.fillStyle=C,r.fillRect(s+.5,M+.5,n-1,u-1),r.strokeStyle=m,r.lineWidth=1,r.strokeRect(s+.5,M+.5,n-1,u-1))}),r.restore()},renderHeikinAshi:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("heikin-ashi"),r=this.ctx,a=e.data,i=e.visibleRange,n=e.candleWidth,h=this.getDpr();r.save(),r.scale(h,h),this.cachedHeikinAshiSourceData!==a&&(this.cachedHeikinAshiData=this.calculateHeikinAshi(a),this.cachedHeikinAshiSourceData=a),this.cachedHeikinAshiData.slice(i.start,i.end).forEach(function(a,h){if(a){var l=e.indexToX(i.start+h),s=e.priceToY(a.open),c=e.priceToY(a.close),g=e.priceToY(a.high),d=e.priceToY(a.low),T=a.close>=a.open?o.upColor||t.upColor:o.downColor||t.downColor;r.strokeStyle=T,r.lineWidth=1,r.beginPath(),r.moveTo(l+n/2,g),r.lineTo(l+n/2,d),r.stroke(),r.fillStyle=T;var v=Math.abs(c-s),f=Math.min(s,c);v<1?r.fillRect(l,f,n,1):r.fillRect(l,f,n,v)}}),r.restore()},renderHighLow:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("high-low"),r=this.ctx,a=e.data,i=e.visibleRange,n=e.candleWidth,h=this.getDpr();r.save(),r.scale(h,h);var l=Math.max(0,i.start),s=Math.min(a.length,i.end),c=a.slice(l,s),g=l-i.start;c.forEach(function(a,h){var l=i.start+g+h,s=e.indexToX(l),c=e.priceToY(a.high),d=e.priceToY(a.low),T=a.close>=a.open?o.upColor||t.upColor:o.downColor||t.downColor,v=Math.abs(d-c),f=c;r.fillStyle=T,r.fillRect(s,f,n,v)}),r.restore()},renderRenko:function(e){var t=this.themeManager.getCurrentTheme(),o=this.themeManager.getChartTypeColors("renko"),r=this.ctx,a=e.visibleRange,i=e.candleWidth,n=this.getDpr();r.save(),r.scale(n,n);var h=e.getRenderData();if(h&&0!==h.length){var l=o.upColor||t.upColor||"#26a69a",s=o.downColor||t.downColor||"#ef5350",c=Math.max(0,Math.floor(a.start)),g=Math.min(h.length,Math.ceil(a.end)),d=h.slice(c,g);if(0!==d.length){var T=Math.max(2,.85*i),v=(i-T)/2,f=!1!==e.renkoShowWicks;d.forEach(function(t,o){var a=c+o,i=e.indexToX(a)+v,n=i+T/2,h=t.isUp?l:s;if(r.fillStyle=h,r.strokeStyle=h,f&&void 0!==t.wickHigh&&void 0!==t.wickLow){var g=e.priceToY(t.wickHigh),d=e.priceToY(t.wickLow);r.beginPath(),r.lineWidth=1,r.moveTo(n,g),r.lineTo(n,d),r.stroke()}var p=e.priceToY(t.high),m=e.priceToY(t.low),C=Math.max(1,Math.abs(m-p));r.fillRect(i,p,T,C),r.lineWidth=1,r.strokeRect(i,p,T,C)}),r.restore()}else r.restore()}else r.restore()},renderVolumeCandles:function(e){var t=this,o=this.themeManager.getCurrentTheme(),r=this.themeManager.getChartTypeColors("volume-candles"),a=this.ctx,i=e.data,n=e.visibleRange,h=e.candleWidth,l=this.getDpr();a.save(),a.scale(l,l);var s=Math.max(0,n.start),c=Math.min(i.length,n.end),g=i.slice(s,c),d=s-n.start,T=0;if(g.forEach(function(e){e.volume&&e.volume>T&&(T=e.volume)}),0===T)return this.renderCandles(e),void a.restore();g.forEach(function(i,l){var s=n.start+d+l,c=e.indexToX(s),g=i.volume?i.volume/T:.2,v=Math.max(2,h*(.2+.8*g)),f=c+(h-v)/2,p=e.priceToY(i.open),m=e.priceToY(i.close),C=e.priceToY(i.high),u=e.priceToY(i.low),M=i.close>=i.open,x=M?r.upColor||o.upColor:r.downColor||o.downColor;a.strokeStyle=x,a.fillStyle=x,a.lineWidth=1;var k=f+v/2;a.beginPath(),a.moveTo(k,C),a.lineTo(k,u),a.stroke();var y=Math.abs(m-p),b=Math.min(p,m);if(M){var w=o.background;if(!w)w="light"!==t.themeManager.currentTheme?"#0f0f0f":"#ffffff";a.fillStyle=w,a.fillRect(f,b,v,Math.max(1,y)),a.strokeRect(f,b,v,Math.max(1,y))}else a.fillRect(f,b,v,Math.max(1,y))}),a.restore()}};function a(e){Object.keys(r).forEach(function(t){e.prototype[t]=r[t]})}const i=r}}]);