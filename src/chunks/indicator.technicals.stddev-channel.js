"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.stddev-channel"],{2934:(t,e,r)=>{function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function l(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function o(t,e,r){return e=s(e),function(t,e){if(e&&("object"==i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a()?Reflect.construct(e,r||[],s(t).constructor):e.apply(t,r))}function a(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(a=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}r.r(e),r.d(e,{default:()=>c});const c=function(t){function e(t,r,i){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=o(this,e,[t,r,i])).title="Standard Deviation Channel",n.shorttitle="StdDev",n.precision=2,n.length=void 0!==r.length?r.length:20,n.mult=void 0!==r.mult?r.mult:2,n.maType=void 0!==r.maType?r.maType:"SMA",n.src=void 0!==r.src?r.src:"close",n.linewidth=void 0!==r.linewidth?r.linewidth:1,n.basisColor=r.basisColor||"#2962FF",n.upperColor=r.upperColor||"#26A69A",n.lowerColor=r.lowerColor||"#EF5350",n.fillColor=r.fillColor||"rgba(41, 98, 255, 0.05)",n.showFill=void 0===r.showFill||r.showFill,n.panelType="main",n.panelHeight=150,n.plots=[{dataKey:"basis",colorKey:"basisColor",title:"Basis"}],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),r=e,l=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"length",label:"Length",type:"number",default:20,min:2,max:500,step:1},{key:"mult",label:"Multiplier",type:"number",default:2,min:.1,max:10,step:.1},{key:"maType",label:"MA Type",type:"select",default:"SMA",options:["SMA","EMA"]},{key:"src",label:"Source",type:"source",default:"close"},{key:"linewidth",label:"Line Width",type:"number",default:1,min:1,max:5,step:1}],style:[{key:"basisColor",label:"Basis",type:"color",default:"#2962FF"},{key:"upperColor",label:"Upper",type:"color",default:"#26A69A"},{key:"lowerColor",label:"Lower",type:"color",default:"#EF5350"},{key:"fillColor",label:"Fill",type:"color",default:"rgba(41, 98, 255, 0.05)"},{key:"showFill",label:"Fill",type:"checkbox",default:!0}]}}}],(i=[{key:"calculate",value:function(){var t=this,e=this.engine.data,r=this.engine.dataManager;if(e&&0!==e.length){for(var i=e.map(function(e){return e[t.src]}),n="EMA"===this.maType?r.calculateEMAFromArray(i,this.length):r.calculateSMAFromArray(i,this.length),l=[],o=function(){if(a<t.length-1)return l[a]=null,1;var e=i.slice(a-t.length+1,a+1),r=n[a],o=e.map(function(t){return Math.pow(t-r,2)}).reduce(function(t,e){return t+e},0)/t.length;l[a]=Math.sqrt(o)},a=0;a<i.length;a++)o();var s=n.map(function(e,r){return null!==e&&null!==l[r]?e+l[r]*t.mult:null}),u=n.map(function(e,r){return null!==e&&null!==l[r]?e-l[r]*t.mult:null});this.data={basis:n,upper:s,lower:u}}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var r=t.ctx,i=t.getDpr(),n=this.engine,l=n.data;(this.data.basis&&this.data.basis.length===l.length||(this.calculate(),this.data&&this.data.basis))&&(r.save(),r.scale(i,i),this.showFill&&this.drawFill(r,this.data.upper,this.data.lower,this.fillColor,n),this.drawLine(r,this.data.upper,this.upperColor,this.linewidth,n),this.drawLine(r,this.data.lower,this.lowerColor,this.linewidth,n),this.drawLine(r,this.data.basis,this.basisColor,this.linewidth,n),r.fillStyle="#d1d4dc",r.font="bold 11px sans-serif",r.fillText(this.shorttitle,5,12),r.restore())}}},{key:"drawLine",value:function(t,e,r,i,n){if(e&&0!==e.length){var l=n.visibleRange,o=Math.max(0,l.start),a=Math.min(e.length,l.end);t.strokeStyle=r,t.lineWidth=i,t.beginPath();for(var s=!1,u=o;u<a;u++){var c=e[u];if(null!==c&&!isNaN(c)){var f=n.indexToX(u)+n.candleWidth/2,h=n.priceToY(c);s?t.lineTo(f,h):(t.moveTo(f,h),s=!0)}}t.stroke()}}},{key:"drawFill",value:function(t,e,r,i,n){if(e&&r){var l=n.visibleRange,o=Math.max(0,l.start),a=Math.min(e.length,l.end);t.fillStyle=i,t.beginPath();for(var s=!1,u=o;u<a;u++){var c=e[u];if(null!==c&&!isNaN(c)){var f=n.indexToX(u)+n.candleWidth/2,h=n.priceToY(c);s?t.lineTo(f,h):(t.moveTo(f,h),s=!0)}}for(var p=a-1;p>=o;p--){var d=r[p];if(null!==d&&!isNaN(d)){var y=n.indexToX(p)+n.candleWidth/2,b=n.priceToY(d);t.lineTo(y,b)}}t.closePath(),t.fill()}}}])&&n(r.prototype,i),l&&n(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,l}(r(8018).A)}}]);