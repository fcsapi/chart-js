"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.klinger"],{5292:(e,t,i)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function n(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,l(o.key),o)}}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function r(e,t,i){return t=s(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,i||[],s(e).constructor):t.apply(e,i))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}i.r(t),i.d(t,{default:()=>u});const u=function(e){function t(e,i,o){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=r(this,t,[e,i,o])).title="Klinger Volume Oscillator",n.shorttitle="KVO",n.precision=2,n.fastLength=void 0!==i.fastLength?i.fastLength:34,n.slowLength=void 0!==i.slowLength?i.slowLength:55,n.signalLength=void 0!==i.signalLength?i.signalLength:13,n.linewidth=void 0!==i.linewidth?i.linewidth:2,n.kvoColor=i.kvoColor||"#2962FF",n.signalColor=i.signalColor||"#FF6D00",n.histogramColor=i.histogramColor||"#26A69A",n.showHistogram=void 0===i.showHistogram||i.showHistogram,n.zerolineLevel=void 0!==i.zerolineLevel?i.zerolineLevel:0,n.zerolineColor=i.zerolineColor||"#787B86",n.zerolineVisible=void 0===i.zerolineVisible||i.zerolineVisible,n.panelType="separate",n.panelHeight=150,n.plots=[{dataKey:"kvo",colorKey:"kvoColor",title:"KVO"},{dataKey:"signal",colorKey:"signalColor",title:"Signal"},{dataKey:"histogram",colorKey:"histogramColor",title:"Histogram"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),i=t,l=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"fastLength",label:"Fast Length",type:"number",default:34,min:1,max:100,step:1},{key:"slowLength",label:"Slow Length",type:"number",default:55,min:1,max:200,step:1},{key:"signalLength",label:"Signal Length",type:"number",default:13,min:1,max:50,step:1},{key:"showHistogram",label:"Show Histogram",type:"checkbox",default:!0},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:10,step:1}],style:[{key:"kvoColor",label:"KVO",type:"color",default:"#2962FF"},{key:"signalColor",label:"Signal",type:"color",default:"#FF6D00"},{key:"histogramColor",label:"Histogram",type:"color",default:"#26A69A"},{key:"zerolineColor",label:"Zero Line",type:"color",default:"#787B86"},{key:"zerolineVisible",label:"Zero Line",type:"checkbox",default:!0}]}}}],(o=[{key:"calculate",value:function(){for(var e=this.engine.data,t=this.engine.dataManager,i=[],o=0;o<e.length;o++)if(0!==o){var n=(e[o].high+e[o].low+e[o].close)/3,l=(e[o-1].high+e[o-1].low+e[o-1].close)/3;i.push(n>l?1:-1)}else i.push(0);for(var r=[],a=0,s=0;s<e.length;s++)0!==s?(i[s]===i[s-1]?a+=e[s].high-e[s].low:a=e[s].high-e[s].low,r.push(a)):(r.push(e[s].high-e[s].low),a=e[s].high-e[s].low);var h=e.map(function(e,t){var o=e.high-e.low;return 0===o?0:e.volume*Math.abs((o-(e.high-e.close))/o*2-1)*i[t]*100}),u=t.calculateEMAFromArray(h,this.fastLength),c=t.calculateEMAFromArray(h,this.slowLength),f=u.map(function(e,t){return null===e||null===c[t]?null:e-c[t]}),d=t.calculateEMAFromArray(f,this.signalLength),g=f.map(function(e,t){return null===e||null===d[t]?null:e-d[t]});this.data={kvo:f,signal:d,histogram:g}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var i=e.ctx,o=e.dpr,n=this.engine,l=n.data;if(this.data.kvo&&this.data.kvo.length===l.length||(this.calculate(),this.data&&this.data.kvo)){var r=t?t.top:0,a=r+0,s=r+(t?t.height:100)-0-a;i.save(),i.scale(o,o),this.zerolineVisible&&this.drawHLine(i,a,s,this.zerolineLevel,this.zerolineColor,n,o,t),this.showHistogram&&this.drawHistogram(i,this.data.histogram,a,s,n,t),this.drawLine(i,this.data.kvo,!1,this.kvoColor,this.linewidth,a,s,n,t),this.drawLine(i,this.data.signal,!1,this.signalColor,this.linewidth,a,s,n,t),i.fillStyle="#d1d4dc",i.font="bold 11px sans-serif";var h=this.shorttitle;i.fillText(h,5,r+12);var u=n.visibleRange.end-1;if(t&&void 0!==t.hoveredIndex&&null!==t.hoveredIndex&&(u=t.hoveredIndex),u>=0&&u<this.data.kvo.length){i.font="11px sans-serif";var c=5+i.measureText(h).width+10,f=this.data.kvo[u];if(null!=f){i.fillStyle=this.kvoColor;var d="KVO: "+f.toFixed(0);i.fillText(d,c,r+12),c+=i.measureText(d).width+10}var g=this.data.signal[u];if(null!=g){i.fillStyle=this.signalColor;var v="Signal: "+g.toFixed(0);i.fillText(v,c,r+12),c+=i.measureText(v).width+10}if(this.showHistogram){var y=this.data.histogram[u];if(null!=y){i.fillStyle=y>=0?"#26A69A":"#EF5350";var p="Hist: "+y.toFixed(0);i.fillText(p,c,r+12)}}}i.restore()}}}},{key:"drawHistogram",value:function(e,t,i,o,n,l){if(t&&0!==t.length)for(var r=n.visibleRange,a=l&&void 0!==l.minValue?l.minValue:0,s=(l&&void 0!==l.maxValue?l.maxValue:100)-a,h=i+o,u=h-(0-a)/s*o,c=r.start;c<r.end;c++)if(!(c<0||c>=t.length)){var f=t[c];if(null!=f&&!isNaN(f)){var d=n.indexToX(c)+n.candleWidth/2,g=h-(f-a)/s*o,v=Math.max(1,.6*n.candleWidth);e.fillStyle=f>=0?"rgba(38, 166, 154, 0.5)":"rgba(239, 83, 80, 0.5)";var y=Math.abs(g-u),p=f>=0?g:u;e.fillRect(d-v/2,p,v,y)}}}},{key:"drawLine",value:function(e,t,i,o,n,l,r,a,s){if(t&&0!==t.length){var h=a.visibleRange,u=Math.max(0,h.start),c=Math.min(t.length,h.end),f=t.slice(u,c),d=u-h.start;e.strokeStyle=o,e.lineWidth=n,e.beginPath();var g=!1;f.forEach(function(t,o){if(null!==t&&!isNaN(t)){var n,u=h.start+d+o,c=a.indexToX(u)+a.candleWidth/2;if(i)n=a.priceToY(t);else{var f=s&&void 0!==s.minValue?s.minValue:0,v=s&&void 0!==s.maxValue?s.maxValue:100;n=l+r-(t-f)/(v-f)*r}g?e.lineTo(c,n):(e.moveTo(c,n),g=!0)}}),e.stroke()}}},{key:"drawHLine",value:function(e,t,i,o,n,l,r,a){var s=a&&void 0!==a.minValue?a.minValue:0,h=t+i-(o-s)/((a&&void 0!==a.maxValue?a.maxValue:100)-s)*i;e.strokeStyle=n,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,h),e.lineTo(l.canvas.width/r,h),e.stroke(),e.setLineDash([])}}])&&n(i.prototype,o),l&&n(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,o,l}(i(8018).A)}}]);