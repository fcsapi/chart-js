"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.signals.ma-cross-signal"],{2393:(t,e,o)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,l(r.key),r)}}function l(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function a(t,e,o){return e=s(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,o||[],s(t).constructor):e.apply(t,o))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}o.r(e),o.d(e,{default:()=>c});const c=function(t){function e(t,o,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=a(this,e,[t,o,r])).title="MA Crossover Signal",n.shorttitle="MA Cross",n.precision=2,n.fastLength=void 0!==o.fastLength?o.fastLength:9,n.slowLength=void 0!==o.slowLength?o.slowLength:21,n.maType=o.maType||"EMA",n.showLabels=void 0===o.showLabels||o.showLabels,n.buyColor=o.buyColor||"#26A69A",n.sellColor=o.sellColor||"#EF5350",n.panelType="main",n.plots=[{dataKey:"signals",colorKey:"buyColor",title:"Signals"}],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),o=e,l=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"fastLength",label:"Fast MA Length",type:"number",default:9,min:1,max:200,step:1},{key:"slowLength",label:"Slow MA Length",type:"number",default:21,min:1,max:200,step:1},{key:"maType",label:"MA Type",type:"select",options:["SMA","EMA"],default:"EMA"},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"buyColor",label:"Buy Signal",type:"color",default:"#26A69A"},{key:"sellColor",label:"Sell Signal",type:"color",default:"#EF5350"}]}}}],(r=[{key:"calculate",value:function(){var t,e,o=this.engine.data,r=this.engine.dataManager,n=o.map(function(t){return t.close});"EMA"===this.maType?(t=r.calculateEMAFromArray(n,this.fastLength),e=r.calculateEMAFromArray(n,this.slowLength)):(t=r.calculateSMAFromArray(n,this.fastLength),e=r.calculateSMAFromArray(n,this.slowLength));var l=o.map(function(o,r){return 0===r||null===t[r]||null===t[r-1]||null===e[r]||null===e[r-1]?null:t[r-1]<=e[r-1]&&t[r]>e[r]?{type:"buy",price:o.low}:t[r-1]>=e[r-1]&&t[r]<e[r]?{type:"sell",price:o.high}:null});this.data={signals:l,fastMA:t,slowMA:e}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var o=t.ctx,r=t.getDpr(),n=this.engine,l=n.data;if(this.data.signals&&this.data.signals.length===l.length||(this.calculate(),this.data&&this.data.signals)){o.save(),o.scale(r,r);for(var a=n.visibleRange,i=a.start;i<a.end;i++)if(!(i<0||i>=this.data.signals.length)){var s=this.data.signals[i];if(s){var u=n.indexToX(i)+n.candleWidth/2,c=n.priceToY(s.price);"buy"===s.type?(this.drawBuyArrow(o,u,c),this.showLabels&&this.drawLabel(o,u,c,"BUY",this.buyColor)):"sell"===s.type&&(this.drawSellArrow(o,u,c),this.showLabels&&this.drawLabel(o,u,c,"SELL",this.sellColor))}}o.restore()}}}},{key:"drawBuyArrow",value:function(t,e,o){t.fillStyle=this.buyColor,t.beginPath(),t.moveTo(e,o+15),t.lineTo(e-8,o+15+8),t.lineTo(e+8,o+15+8),t.closePath(),t.fill(),t.fillRect(e-2,o+15,4,10)}},{key:"drawSellArrow",value:function(t,e,o){t.fillStyle=this.sellColor,t.beginPath(),t.moveTo(e,o-15),t.lineTo(e-8,o-15-8),t.lineTo(e+8,o-15-8),t.closePath(),t.fill(),t.fillRect(e-2,o-15-10,4,10)}},{key:"drawLabel",value:function(t,e,o,r,n){t.font="bold 10px sans-serif",t.fillStyle=n,t.textAlign="center";var l="BUY"===r?35:-25;t.fillText(r,e,o+l)}}])&&n(o.prototype,r),l&&n(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,l}(o(8018).A)}}]);