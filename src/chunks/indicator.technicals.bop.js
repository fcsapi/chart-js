"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.bop"],{5167:(e,t,o)=>{function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function n(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function l(e,t,o){return t=u(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(t,o||[],u(e).constructor):t.apply(e,o))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}o.r(t),o.d(t,{default:()=>c});const c=function(e){function t(e,o,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=l(this,t,[e,o,i])).title="Balance of Power",n.shorttitle="BOP",n.precision=3,n.linewidth=void 0!==o.linewidth?o.linewidth:2,n.bopColor=o.bopColor||"#2962FF",n.zerolineLevel=void 0!==o.zerolineLevel?o.zerolineLevel:0,n.zerolineColor=o.zerolineColor||"#787B86",n.zerolineVisible=void 0===o.zerolineVisible||o.zerolineVisible,n.panelType="separate",n.panelHeight=150,n.plots=[{dataKey:"bop",colorKey:"bopColor",title:"BOP"}],n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(t,e),o=t,r=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:10,step:1}],style:[{key:"bopColor",label:"BOP",type:"color",default:"#2962FF"},{key:"zerolineLevel",label:"Zero Line",type:"number",default:0,step:1},{key:"zerolineColor",label:"Zero Line",type:"color",default:"#787B86"},{key:"zerolineVisible",label:"Zero Line",type:"checkbox",default:!0}]}}}],(i=[{key:"calculate",value:function(){var e=this.engine.data.map(function(e){var t=e.high-e.low;return 0===t?0:(e.close-e.open)/t});this.data={bop:e}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var o=e.ctx,i=e.dpr,n=this.engine,r=n.data;if(this.data.bop&&this.data.bop.length===r.length||(this.calculate(),this.data&&this.data.bop)){var l=t?t.top:0,a=l+0,u=l+(t?t.height:100)-0-a;o.save(),o.scale(i,i),this.zerolineVisible&&this.drawHLine(o,a,u,this.zerolineLevel,this.zerolineColor,n,i,t),this.drawLine(o,this.data.bop,!1,this.bopColor,this.linewidth,a,u,n,t),o.fillStyle="#d1d4dc",o.font="bold 11px sans-serif";var s=this.shorttitle;o.fillText(s,5,l+12);var c=n.visibleRange.end-1;if(t&&void 0!==t.hoveredIndex&&null!==t.hoveredIndex&&(c=t.hoveredIndex),c>=0&&c<this.data.bop.length){o.font="11px sans-serif";var f=5+o.measureText(s).width+10,p=this.data.bop[c];if(null!=p){o.fillStyle=this.bopColor;var h="BOP: "+p.toFixed(3);o.fillText(h,f,l+12),f+=o.measureText(h).width+10}}o.restore()}}}},{key:"drawLine",value:function(e,t,o,i,n,r,l,a,u){if(t&&0!==t.length){var s=a.visibleRange,c=Math.max(0,s.start),f=Math.min(t.length,s.end),p=t.slice(c,f),h=c-s.start;e.strokeStyle=i,e.lineWidth=n,e.beginPath();var d=!1;p.forEach(function(t,i){if(null!==t&&!isNaN(t)){var n,c=s.start+h+i,f=a.indexToX(c)+a.candleWidth/2;if(o)n=a.priceToY(t);else{var p=u&&void 0!==u.minValue?u.minValue:0,b=u&&void 0!==u.maxValue?u.maxValue:100;n=r+l-(t-p)/(b-p)*l}d?e.lineTo(f,n):(e.moveTo(f,n),d=!0)}}),e.stroke()}}},{key:"drawHLine",value:function(e,t,o,i,n,r,l,a){var u=a&&void 0!==a.minValue?a.minValue:0,s=t+o-(i-u)/((a&&void 0!==a.maxValue?a.maxValue:100)-u)*o;e.strokeStyle=n,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,s),e.lineTo(r.canvas.width/l,s),e.stroke(),e.setLineDash([])}}])&&n(o.prototype,i),r&&n(o,r),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,r}(o(8018).A)}}]);