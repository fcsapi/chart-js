"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.signals.higher-high-lower-low-signal"],{2043:(e,o,t)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,o){for(var t=0;t<o.length;t++){var r=o[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function n(e){var o=function(e,o){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,o||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(e)}(e,"string");return"symbol"==r(o)?o:o+""}function l(e,o,t){return o=s(o),function(e,o){if(o&&("object"==r(o)||"function"==typeof o))return o;if(void 0!==o)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,a()?Reflect.construct(o,t||[],s(e).constructor):o.apply(e,t))}function a(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(a=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function h(e,o){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,o){return e.__proto__=o,e},h(e,o)}t.r(o),t.d(o,{default:()=>c});const c=function(e){function o(e,t,r){var i;return function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),(i=l(this,o,[e,t,r])).title="Higher High/Lower Low",i.shorttitle="HH/LL",i.precision=2,i.swingLookback=void 0!==t.swingLookback?t.swingLookback:5,i.showType=void 0!==t.showType?t.showType:"All",i.showLabels=void 0===t.showLabels||t.showLabels,i.higherHighColor=t.higherHighColor||"#00E676",i.higherLowColor=t.higherLowColor||"#4CAF50",i.lowerHighColor=t.lowerHighColor||"#FF5722",i.lowerLowColor=t.lowerLowColor||"#FF1744",i.panelType="main",i.plots=[{dataKey:"signals",colorKey:"higherHighColor",title:"HH/LL"}],i}return function(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),o&&h(e,o)}(o,e),t=o,n=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"swingLookback",label:"Swing Lookback",type:"number",default:5,min:3,max:20,step:1},{key:"showType",label:"Show Type",type:"select",options:["All","Highs Only","Lows Only","Trend Change Only"],default:"All"},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}],style:[{key:"higherHighColor",label:"Higher High",type:"color",default:"#00E676"},{key:"higherLowColor",label:"Higher Low",type:"color",default:"#4CAF50"},{key:"lowerHighColor",label:"Lower High",type:"color",default:"#FF5722"},{key:"lowerLowColor",label:"Lower Low",type:"color",default:"#FF1744"}]}}}],(r=[{key:"calculate",value:function(){for(var e=this.engine.data,o=[],t=[],r=this.swingLookback;r<e.length-this.swingLookback;r++){for(var i=!0,n=1;n<=this.swingLookback;n++)if(e[r-n].high>=e[r].high||e[r+n].high>=e[r].high){i=!1;break}i&&o.push({index:r,price:e[r].high});for(var l=!0,a=1;a<=this.swingLookback;a++)if(e[r-a].low<=e[r].low||e[r+a].low<=e[r].low){l=!1;break}l&&t.push({index:r,price:e[r].low})}for(var s=e.map(function(){return null}),h=1;h<o.length;h++){var c=o[h-1],u=o[h];u.price>c.price?"All"!==this.showType&&"Highs Only"!==this.showType||(s[u.index]={type:"HH",price:u.price,color:this.higherHighColor}):"All"!==this.showType&&"Highs Only"!==this.showType&&"Trend Change Only"!==this.showType||(s[u.index]={type:"LH",price:u.price,color:this.lowerHighColor})}for(var p=1;p<t.length;p++){var f=t[p-1],y=t[p];y.price>f.price?"All"!==this.showType&&"Lows Only"!==this.showType||(s[y.index]={type:"HL",price:y.price,color:this.higherLowColor}):"All"!==this.showType&&"Lows Only"!==this.showType&&"Trend Change Only"!==this.showType||(s[y.index]={type:"LL",price:y.price,color:this.lowerLowColor})}this.data={signals:s}}},{key:"render",value:function(e,o){if(this.visible&&this.data){var t=e.ctx,r=e.getDpr(),i=this.engine,n=i.data;if(this.data.signals&&this.data.signals.length===n.length||(this.calculate(),this.data&&this.data.signals)){t.save(),t.scale(r,r);for(var l=i.visibleRange,a=l.start;a<l.end;a++)if(!(a<0||a>=this.data.signals.length)){var s=this.data.signals[a];if(s){var h=i.indexToX(a)+i.candleWidth/2,c=i.priceToY(s.price);this.drawSignal(t,h,c,s.type,s.color),this.showLabels&&this.drawLabel(t,h,c,s.type,s.color)}}t.restore()}}}},{key:"drawSignal",value:function(e,o,t,r,i){var n=r.includes("H")?-15:15;e.fillStyle=i,e.strokeStyle=i,e.lineWidth=2,e.beginPath(),"HH"===r||"HL"===r?(e.moveTo(o,t+n-6),e.lineTo(o-6,t+n),e.lineTo(o+6,t+n)):(e.moveTo(o,t+n+6),e.lineTo(o-6,t+n),e.lineTo(o+6,t+n)),e.closePath(),e.fill()}},{key:"drawLabel",value:function(e,o,t,r,i){e.font="bold 8px sans-serif",e.fillStyle=i,e.textAlign="center";var n=r.includes("H")?-25:30;e.fillText(r,o,t+n)}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r,n}(t(8018).A)}}]);