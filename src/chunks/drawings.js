"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["drawings"],{72:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="ray",this.points=[],this.color="#00e676",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price),c=a-s,f=h-l;t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]);var p=e.width-e.calculatePriceAxisWidth(),u=e.canvas.height,d=!0;if(0===c)if(s<0||s>p)d=!1;else{t.beginPath(),t.moveTo(s,l);var m=f>0?u:0;t.lineTo(s,m),t.stroke()}else{var y,v,b=f/c,x=s,g=l;c>0?(v=l+b*((y=p)-s),s>p&&(d=!1)):(v=l+b*((y=0)-s),s<0&&(d=!1)),d&&(v<0?y=s+((v=0)-l)/b:v>u&&(y=s+((v=u)-l)/b),x>p?g=l+b*((x=p)-s):x<0&&(g=l+b*((x=0)-s)),t.beginPath(),t.moveTo(x,g),t.lineTo(y,v),t.stroke())}if(t.setLineDash([]),this.selected&&(t.fillStyle=this.color,s>=0&&s<=p&&l>=0&&l<=u&&(t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill()),a>=0&&a<=p&&h>=0&&h<=u&&(t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill())),this.text&&""!==this.text.trim()){var T=this.textPosition||"above-center",S=this.textSize||12,P=this.textColor||"#ffffff",w=(s+a)/2,k=(l+h)/2,M=Math.atan2(h-l,a-s),W=15,C=w,L=k;if(T.includes("above")?(C=w+Math.sin(M)*W,L=k-Math.cos(M)*W):T.includes("below")?(C=w-Math.sin(M)*W,L=k+Math.cos(M)*W):"center"===T&&(C=w,L=k),T.includes("left")){var I=s+.25*(a-s),A=l+.25*(h-l);T.includes("above")?(C=I+Math.sin(M)*W,L=A-Math.cos(M)*W):T.includes("below")?(C=I-Math.sin(M)*W,L=A+Math.cos(M)*W):(C=I,L=A)}else if(T.includes("right")){var O=s+.75*(a-s),j=l+.75*(h-l);T.includes("above")?(C=O+Math.sin(M)*W,L=j-Math.cos(M)*W):T.includes("below")?(C=O-Math.sin(M)*W,L=j+Math.cos(M)*W):(C=O,L=j)}t.save(),t.translate(C,L);var D=M;(M>Math.PI/2||M<-Math.PI/2)&&(D=M+Math.PI),t.rotate(D),t.font="".concat(S,"px Arial, sans-serif"),t.fillStyle=P,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},201:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="gannfan",this.points=[],this.color="#2962ff",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=11,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.angles=[{name:"1x8",angle:7.5,color:"#ff5252"},{name:"1x4",angle:15,color:"#ff9800"},{name:"1x3",angle:18.75,color:"#ffc107"},{name:"1x2",angle:26.25,color:"#ffeb3b"},{name:"1x1",angle:45,color:"#4caf50"},{name:"2x1",angle:63.75,color:"#00bcd4"},{name:"3x1",angle:71.25,color:"#2196f3"},{name:"4x1",angle:75,color:"#3f51b5"},{name:"8x1",angle:82.5,color:"#9c27b0"}]}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#2962ff",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||11,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);if(this.points.length<2)return t.fillStyle=this.color,t.beginPath(),t.arc(r,s,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(r,s,2,0,2*Math.PI),void t.fill();var l=this.points[1],a=l.timestamp?e.timestampToIndex(l.timestamp):l.index;if(null!==a){var h=e.indexToX(a)+e.candleWidth/2,c=e.priceToY(l.price),f=(Math.atan2(c-s,h-r),Math.PI,c<s),p=(e.chartX,e.chartWidth||e.canvas.width),u=e.canvas.height;Math.sqrt(Math.pow(h-r,2)+Math.pow(c-s,2)),this.angles.forEach(function(e){var o=(f?-e.angle:e.angle)*Math.PI/180,n=Math.cos(o),l=Math.sin(o),a=2*Math.max(p,u),h=r+n*a,c=s+l*a;t.strokeStyle=i.selected?i.color:e.color||i.color,t.lineWidth=45===e.angle?i.lineWidth+1:i.lineWidth,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=45===e.angle?1:.6,t.beginPath(),t.moveTo(r,s),t.lineTo(h,c),t.stroke(),t.globalAlpha=1;var d=r+60*n,m=s+60*l;t.font="".concat(i.textSize-2,"px Arial, sans-serif"),t.fillStyle=e.color||i.color,t.textAlign="left",t.textBaseline="middle";var y=e.name,v=t.measureText(y);t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(d-2,m-(i.textSize-2)/2-2,v.width+4,i.textSize-2+4),t.fillStyle="#ffffff",t.fillText(y,d,m)}),t.setLineDash([]),t.strokeStyle=this.color,t.lineWidth=1,t.setLineDash([3,3]),t.globalAlpha=.4,t.beginPath(),t.moveTo(r,s),t.lineTo(h,c),t.stroke(),t.setLineDash([]),t.globalAlpha=1,t.fillStyle=this.color,t.beginPath(),t.arc(r,s,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(r,s,2,0,2*Math.PI),t.fill(),t.fillStyle=this.color,t.beginPath(),t.arc(h,c,5,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(h,c,2,0,2*Math.PI),t.fill(),t.font="bold 9px Arial, sans-serif",t.fillStyle="rgba(0, 0, 0, 0.75)";var d=f?"UP":"DOWN",m=t.measureText(d).width;if(t.fillRect(h-m/2-3,c-18,m+6,12),t.fillStyle=f?"#4caf50":"#f44336",t.textAlign="center",t.textBaseline="bottom",t.fillText(d,h,c-8),this.text&&""!==this.text.trim()){var y=r,v=s-20;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom";var b=t.measureText(this.text).width;t.fillStyle="rgba(0, 0, 0, 0.7)",t.fillRect(y-b/2-4,v-this.textSize-2,b+8,this.textSize+4),t.fillStyle=this.textColor,t.fillText(this.text,y,v)}}}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},207:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pitchforkschiff",this.points=[],this.color="#9c27b0",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#9c27b0",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=r+(s-r)/2,m=i.price+(o.price-i.price)/2,y=e.indexToX(d)+e.candleWidth/2,v=e.priceToY(m),b=(s+f)/2,x=(o.price+n.price)/2,g=e.indexToX(b)+e.candleWidth/2-y,T=e.priceToY(x)-v,S=100,P=y+g*S,w=v+T*S;t.strokeStyle=this.color,t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(y,v),t.lineTo(P,w),t.stroke(),t.lineWidth=this.lineWidth,t.globalAlpha=.5,t.setLineDash([3,3]),t.beginPath(),t.moveTo(y,v),t.lineTo(l,a),t.stroke(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=1,t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.beginPath(),t.moveTo(h,c),t.lineTo(p,u),t.stroke(),t.beginPath(),t.moveTo(p,u),t.lineTo(l,a),t.stroke(),t.globalAlpha=.7;var k=h+g*S,M=c+T*S;t.beginPath(),t.moveTo(h,c),t.lineTo(k,M),t.stroke();var W=p+g*S,C=u+T*S;if(t.beginPath(),t.moveTo(p,u),t.lineTo(W,C),t.stroke(),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var L=l,I=a-15;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,L,I)}}else t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill();t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},326:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibwedge",this.points=[],this.color="#ffd700",this.lineWidth=2,this.lineStyle="solid",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this.showInfoBox=!0,this.levels=[.236,.382,.5,.618,.786,1],this.levelColors={.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"},this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0})}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#ffd700",i.lineWidth=e.lineWidth||2,i.lineStyle=e.lineStyle||"solid",i.isLocked=e.isLocked||!1,i.tooltipMode=e.tooltipMode||"auto",i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.levels=e.levels||[.236,.382,.5,.618,.786,1],i.levelColors=e.levelColors||i.levelColors,i.visibleLevels=e.visibleLevels||i.visibleLevels,i.customLevels=e.customLevels,i.point2Confirmed=void 0===e.point2Confirmed||e.point2Confirmed,i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t),2===this.points.length&&(this.point2Confirmed=!1)}},{key:"updatePoint",value:function(t,e){if(1===this.points.length)this.points.push(t);else if(2!==this.points.length||this.point2Confirmed){if(2===this.points.length&&this.point2Confirmed)this.points.push(t);else if(3===this.points.length&&e){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=t.timestamp?e.timestampToIndex(t.timestamp):t.index;if(null===n||null===r||null===s)return;var l=e.indexToX(n)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(r)+e.candleWidth/2,c=e.priceToY(o.price),f=e.indexToX(s)+e.candleWidth/2,p=e.priceToY(t.price),u=h-l,d=c-a,m=Math.sqrt(u*u+d*d),y=f-l,v=p-a,b=Math.atan2(v,y),x=l+m*Math.cos(b),g=a+m*Math.sin(b),T=e.xToIndex(x-e.candleWidth/2),S=e.yToPrice(g);this.points[2]={index:T,price:S,timestamp:t.timestamp}}}else this.points[1]=t}},{key:"isComplete",value:function(){return 3===this.points.length&&this.point2Confirmed}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=this.points[2],s=o.timestamp?e.timestampToIndex(o.timestamp):o.index,l=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==s&&null!==l){var a=e.indexToX(s)+e.candleWidth/2,h=e.priceToY(o.price),c=e.indexToX(l)+e.candleWidth/2,f=e.priceToY(n.price),p=c-a,u=f-h,d=Math.sqrt(p*p+u*u),m=Math.atan2(u,p),y=m,v=c,b=f;if(r){var x=r.timestamp?e.timestampToIndex(r.timestamp):r.index;if(null!==x){v=e.indexToX(x)+e.candleWidth/2,b=e.priceToY(r.price);var g=v-a,T=b-h;y=Math.atan2(T,g)}}Math.abs(n.price-o.price),this.visibleLevels||(this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0}));var S=this.customLevels||this.levels;t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.strokeStyle=this.color,t.globalAlpha=.3,t.setLineDash([3,3]),t.beginPath(),t.moveTo(a,h),t.lineTo(c,f),r&&(t.moveTo(a,h),t.lineTo(v,b)),t.stroke(),t.setLineDash([]),t.globalAlpha=1,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),S.forEach(function(e){if(!1!==i.visibleLevels[e]){var o=d*e,n=i.levelColors[e]||i.color;t.strokeStyle=n,t.globalAlpha=.7,t.beginPath(),t.arc(a,h,o,m,y),t.stroke(),r&&(t.globalAlpha=.3,t.beginPath(),t.moveTo(a,h),t.lineTo(a+o*Math.cos(m),h+o*Math.sin(m)),t.moveTo(a,h),t.lineTo(a+o*Math.cos(y),h+o*Math.sin(y)),t.stroke(),t.globalAlpha=.7);var s=(100*e).toFixed(1),l=y;y<m&&(l=y+2*Math.PI);var c=(m+l)/2,f=a+o*Math.cos(c),p=h+o*Math.sin(c);t.font="bold 10px Arial, sans-serif",t.fillStyle=n,t.textAlign="center",t.textBaseline="middle",t.globalAlpha=1,t.fillText("".concat(s,"%"),f+15*Math.cos(c),p+15*Math.sin(c))}}),t.globalAlpha=1,t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(a,h,5,0,2*Math.PI),t.fill(),t.strokeStyle=this.color,t.lineWidth=1,t.globalAlpha=.5,t.beginPath(),t.moveTo(a-10,h),t.lineTo(a+10,h),t.moveTo(a,h-10),t.lineTo(a,h+10),t.stroke(),t.globalAlpha=1,t.fillStyle=this.color,t.beginPath(),t.arc(c,f,4,0,2*Math.PI),t.fill(),r&&(t.fillStyle=this.color,t.beginPath(),t.arc(v,b,4,0,2*Math.PI),t.fill()))}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,isLocked:this.isLocked,tooltipMode:this.tooltipMode,showInfoBox:this.showInfoBox,levels:this.levels,levelColors:this.levelColors,visibleLevels:this.visibleLevels,customLevels:this.customLevels,point2Confirmed:this.point2Confirmed}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},416:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>a});const a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="infoline",this.points=[],this.color="#2962ff",this.lineWidth=2,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=11,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#2962ff",i.lineWidth=e.lineWidth||2,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||11,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"calculateVolumeSum",value:function(t,e,i){if(!t.data||0===t.data.length)return 0;for(var o=Math.max(0,Math.min(e,i)),n=Math.min(t.data.length-1,Math.max(e,i)),r=0,s=o;s<=n;s++){var l=t.data[s];l&&l.volume&&(r+=l.volume)}return r}},{key:"formatVolume",value:function(t){return t>=1e9?(t/1e9).toFixed(2)+"B":t>=1e6?(t/1e6).toFixed(2)+"M":t>=1e3?(t/1e3).toFixed(2)+"K":t.toFixed(0)}},{key:"calculateTimeDuration",value:function(t,e){var i,o=t.currentPeriod||(null===(i=t.options)||void 0===i?void 0:i.period)||"1H",n=parseInt(o)||1,r=e*(o.includes("m")?60*n*1e3:o.includes("H")||o.includes("h")?60*n*60*1e3:o.includes("D")||o.includes("d")?24*n*60*60*1e3:o.includes("W")||o.includes("w")?7*n*24*60*60*1e3:o.includes("M")?30*n*24*60*60*1e3:36e5),s=r/6e4,l=r/36e5,a=r/864e5,h=r/6048e5;return o.includes("W")||o.includes("w")?h>=1?h.toFixed(1)+" weeks":a.toFixed(1)+" days":o.includes("D")||o.includes("d")?a>=7?(a/7).toFixed(1)+" weeks":a.toFixed(1)+" days":o.includes("H")||o.includes("h")?l>=24?(l/24).toFixed(1)+" days":l.toFixed(1)+" hours":o.includes("m")?s>=60?(s/60).toFixed(1)+" hours":s.toFixed(0)+" min":o.includes("M")?(r/2592e6).toFixed(1)+" months":l.toFixed(1)+" hours"}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],r=this.points[1],s=o.timestamp?e.timestampToIndex(o.timestamp):o.index,l=r.timestamp?e.timestampToIndex(r.timestamp):r.index;if(null!==s&&null!==l){var a=e.indexToX(s)+e.candleWidth/2,h=e.priceToY(o.price),c=e.indexToX(l)+e.candleWidth/2,f=e.priceToY(r.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(a,h),t.lineTo(c,f),t.stroke(),t.setLineDash([]),t.fillStyle=this.color,t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(c,f,4,0,2*Math.PI),t.fill();var p=r.price-o.price,u=p/o.price*100,d=Math.abs(l-s),m=this.calculateVolumeSum(e,s,l),y=this.calculateTimeDuration(e,d),v=p>=0,b=v?"#26a69a":"#ef5350";if(this.showInfoBox){var x=(a+c)/2,g=(h+f)/2,T=c-a,S=f-h,P=(Math.sqrt(T*T+S*S),Math.atan2(S,T)),w=["".concat(v?"+":"").concat(p.toFixed(e.pricePrecision||2)," (").concat(v?"+":"").concat(u.toFixed(2),"%)"),"".concat(d," bars | ").concat(y),"Vol: ".concat(this.formatVolume(m))];t.font="bold ".concat(this.textSize||11,"px Arial, sans-serif");var k=(this.textSize||11)+4,M=Math.max.apply(Math,n(w.map(function(e){return t.measureText(e).width}))),W=M+16,C=w.length*k+16,L=C/2+10,I=P-Math.PI/2,A=Math.cos(I)*L,O=Math.sin(I)*L,j=x+A,D=j-W/2,B=g+O-C/2;t.fillStyle="rgba(30, 30, 30, 0.9)",t.beginPath(),t.roundRect(D,B,W,C,4),t.fill(),t.strokeStyle=this.color,t.lineWidth=1,t.stroke(),t.textAlign="center",t.textBaseline="top",w.forEach(function(e,o){var n=B+8+o*k;0===o?(t.fillStyle=b,t.font="bold ".concat(i.textSize||11,"px Arial, sans-serif")):(t.fillStyle="#ffffff",t.font="".concat(i.textSize||11,"px Arial, sans-serif")),t.fillText(e,j,n)})}if(this.text&&""!==this.text.trim()){var X=(a+c)/2,E=(h+f)/2;t.font="".concat(this.textSize||12,"px Arial, sans-serif"),t.fillStyle=this.textColor||"#ffffff",t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,X,E-10)}}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&s(e.prototype,i),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},603:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="plaintext",this.points=[],this.text="",this.textColor="#999999",this.textSize=14,this.backgroundColor="transparent",this.padding=8,this.bold=!1,this.italic=!1,this.editing=!1},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price),s="";this.italic&&(s+="italic "),this.bold&&(s+="bold "),t.font="".concat(s).concat(this.textSize,"px Arial, sans-serif"),t.textAlign="center",t.textBaseline="middle";var l=this.text.split("\n"),a=1.4*this.textSize,h=0;l.forEach(function(e){var i=t.measureText(e);i.width>h&&(h=i.width)});var c=l.length*a;if(!this.isEditing&&this.backgroundColor&&"transparent"!==this.backgroundColor&&(t.fillStyle=this.backgroundColor,t.fillRect(n-h/2-this.padding,r-c/2-this.padding,h+2*this.padding,c+2*this.padding)),this.text&&""!==this.text.trim()){t.fillStyle=this.textColor,this.isEditing&&(t.shadowColor="#2962ff",t.shadowBlur=10);var f=r-c/2+a/2;l.forEach(function(e,i){t.fillText(e,n,f+i*a)}),t.shadowBlur=0}!this.isEditing&&this.selected&&(t.fillStyle=this.textColor,t.globalAlpha=.5,t.beginPath(),t.arc(n,r,3,0,2*Math.PI),t.fill(),t.globalAlpha=1)}}}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d"),a="";this.italic&&(a+="italic "),this.bold&&(a+="bold "),l.font="".concat(a).concat(this.textSize,"px Arial, sans-serif");var h=this.text.split("\n"),c=1.4*this.textSize,f=0;h.forEach(function(t){var e=l.measureText(t);e.width>f&&(f=e.width)});var p=h.length*c,u=r-f/2-this.padding,d=r+f/2+this.padding,m=s-p/2-this.padding,y=s+p/2+this.padding;return t>=u&&t<=d&&e>=m&&e<=y}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},729:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibarcs",this.points=[],this.color="#ff5722",this.lineWidth=1,this.lineStyle="solid",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this.showInfoBox=!0,this.levels=[.382,.5,.618],this.levelColors={.382:"#ffa500",.5:"#ffd700",.618:"#4caf50"},this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0})}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#ff5722",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.isLocked=e.isLocked||!1,i.tooltipMode=e.tooltipMode||"auto",i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.levels=e.levels||[.382,.5,.618],i.levelColors=e.levelColors||i.levelColors,i.visibleLevels=e.visibleLevels||i.visibleLevels,i.customLevels=e.customLevels,i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(o.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(n.price),f=h-l,p=c-a,u=Math.sqrt(f*f+p*p),d=Math.atan2(p,f),m=p>0;if(t.lineWidth=this.lineWidth,this.visibleLevels||(this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0})),t.strokeStyle=this.color,t.globalAlpha=.5,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.setLineDash([]),t.globalAlpha=1,(this.customLevels||this.levels).forEach(function(e){if(!1!==i.visibleLevels[e]){var o=u*e,n=i.levelColors[e]||i.color;t.strokeStyle=n,t.globalAlpha=.7,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]);var r=m?d-Math.PI:d,s=m?d:d+Math.PI;t.beginPath(),t.arc(l,a,o,r,s),t.stroke();var h=(100*e).toFixed(1),c=m?d-Math.PI/2:d+Math.PI/2,f=l+o*Math.cos(c),p=a+o*Math.sin(c);t.font="bold 10px Arial, sans-serif",t.fillStyle=n,t.textAlign="center",t.textBaseline="middle",t.globalAlpha=1,t.fillText("".concat(h,"%"),f,p)}}),t.globalAlpha=1,t.setLineDash([]),this.selected){t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,5,0,2*Math.PI),t.fill(),t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=2;var y=l+.5*f,v=a+.5*p;t.save(),t.translate(y,v),t.rotate(d),t.beginPath(),t.moveTo(0,0),t.lineTo(-10,-5),t.lineTo(-10,5),t.closePath(),t.fill(),t.restore()}}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,isLocked:this.isLocked,tooltipMode:this.tooltipMode,showInfoBox:this.showInfoBox,levels:this.levels,levelColors:this.levelColors,visibleLevels:this.visibleLevels,customLevels:this.customLevels}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},809:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="trendline",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),this.points.length>=2){var l=this.points[1],a=l.timestamp?e.timestampToIndex(l.timestamp):l.index;if(null===a)return;var h=e.indexToX(a)+e.candleWidth/2,c=e.priceToY(l.price);t.beginPath(),t.moveTo(r,s),t.lineTo(h,c),t.stroke()}if(t.setLineDash([]),this.selected&&this.points.forEach(function(o){var n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.fillStyle=i.color,t.beginPath(),t.arc(r,s,4,0,2*Math.PI),t.fill()}}),this.text&&""!==this.text.trim()&&this.points.length>=2){var f=this.points[1],p=f.timestamp?e.timestampToIndex(f.timestamp):f.index;if(null!==p){var u=e.indexToX(p)+e.candleWidth/2,d=e.priceToY(f.price),m=this.textPosition||"above-center",y=this.textSize||12,v=this.textColor||"#ffffff",b=(r+u)/2,x=(s+d)/2,g=Math.atan2(d-s,u-r),T=15,S=b,P=x;if(m.includes("above")?(S=b+Math.sin(g)*T,P=x-Math.cos(g)*T):m.includes("below")?(S=b-Math.sin(g)*T,P=x+Math.cos(g)*T):"center"===m&&(S=b,P=x),m.includes("left")){var w=r+.25*(u-r),k=s+.25*(d-s);m.includes("above")?(S=w+Math.sin(g)*T,P=k-Math.cos(g)*T):m.includes("below")?(S=w-Math.sin(g)*T,P=k+Math.cos(g)*T):(S=w,P=k)}else if(m.includes("right")){var M=r+.75*(u-r),W=s+.75*(d-s);m.includes("above")?(S=M+Math.sin(g)*T,P=W-Math.cos(g)*T):m.includes("below")?(S=M-Math.sin(g)*T,P=W+Math.cos(g)*T):(S=M,P=W)}t.save(),t.translate(S,P);var C=g;(g>Math.PI/2||g<-Math.PI/2)&&(C=g+Math.PI),t.rotate(C),t.font="".concat(y,"px Arial, sans-serif"),t.fillStyle=v,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1028:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="barspattern",this.points=[],this.color="#9c27b0",this.selected=!1,this.isLocked=!1,this.candles=[],this.startTimestamp=null,this.endTimestamp=null,this.indexOffset=0,this.priceOffset=0}return e=t,o=[{key:"fromJSON",value:function(e){var i,o,n=new t(e.id);return n.points=e.points||[],n.color=e.color||"#9c27b0",n.isLocked=e.isLocked||!1,n.candles=e.candles||[],n.startTimestamp=null!==(i=e.startTimestamp)&&void 0!==i?i:null,n.endTimestamp=null!==(o=e.endTimestamp)&&void 0!==o?o:null,n.indexOffset=e.indexOffset||0,n.priceOffset=e.priceOffset||0,n}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"finalize",value:function(t){if(!(this.candles.length>0)){var e=this.points[0],i=this.points[1],o=e.timestamp?t.timestampToIndex(e.timestamp):Math.floor(e.index),n=i.timestamp?t.timestampToIndex(i.timestamp):Math.floor(i.index);if(null!==o&&null!==n){for(var r=Math.min(o,n),s=Math.max(o,n),l=r;l<=s&&l<t.data.length;l++)if(!(l<0)){var a=t.data[l];a&&this.candles.push({timestamp:a.timestamp,open:a.open,high:a.high,low:a.low,close:a.close})}this.candles.length>0&&(this.startTimestamp=this.candles[0].timestamp,this.endTimestamp=this.candles[this.candles.length-1].timestamp)}}}},{key:"render",value:function(t,e){this.points.length<2||(0!==this.candles.length?(this._drawCandles(t,e),this.selected&&this._drawControls(t,e)):this._drawDottedLine(t,e))}},{key:"_drawDottedLine",value:function(t,e){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.priceToY(o.price);t.strokeStyle=this.color,t.lineWidth=2,t.setLineDash([5,5]),t.beginPath(),t.moveTo(s,a),t.lineTo(l,h),t.stroke(),t.setLineDash([]),t.fillStyle=this.color,t.beginPath(),t.arc(s,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(l,h,4,0,2*Math.PI),t.fill()}}},{key:"_drawCandles",value:function(t,e){var i=this,o=e.timestampToIndex(this.startTimestamp),n=e.timestampToIndex(this.endTimestamp);if(null===o||null===n){if(!(e.data.length>0&&e.data[0].timestamp))return;var r=e.data[0].timestamp,s=e.data.length>1?e.data[1].timestamp-e.data[0].timestamp:36e5;o=(this.startTimestamp-r)/s,n=(this.endTimestamp-r)/s}o+=this.indexOffset,n+=this.indexOffset;var l=Math.max(1,n-o+1)/this.candles.length;this.candles.forEach(function(n,r){var s=o+r*l,a=e.indexToX(s);if(!(a<-50||a>e.canvas.width+50)){var h=e.priceToY(n.open+i.priceOffset),c=e.priceToY(n.high+i.priceOffset),f=e.priceToY(n.low+i.priceOffset),p=e.priceToY(n.close+i.priceOffset),u=n.close>=n.open,d=Math.min(h,p),m=Math.abs(p-h)||1,y=Math.max(e.candleWidth*l-2,1),v=a+e.candleWidth*l/2;t.strokeStyle=i.color,t.lineWidth=3,t.beginPath(),t.moveTo(v,c),t.lineTo(v,f),t.stroke(),t.lineWidth=2,t.strokeRect(a+1,d,y,m),t.globalAlpha=.4,t.fillStyle=u?"#26a69a":"#ef5350",t.fillRect(a+1,d,y,m),t.globalAlpha=1}})}},{key:"_drawControls",value:function(t,e){if(0!==this.candles.length){var i=e.timestampToIndex(this.startTimestamp),o=e.timestampToIndex(this.endTimestamp);if(null===i||null===o){if(!(e.data.length>0&&e.data[0].timestamp))return;var n=e.data[0].timestamp,r=e.data.length>1?e.data[1].timestamp-e.data[0].timestamp:36e5;i=(this.startTimestamp-n)/r,o=(this.endTimestamp-n)/r}i+=this.indexOffset,o+=this.indexOffset;var s=this.candles[0],l=this.candles[this.candles.length-1],a=e.indexToX(i)+e.candleWidth/2,h=e.indexToX(o)+e.candleWidth/2,c=e.priceToY((s.high+s.low)/2+this.priceOffset),f=e.priceToY((l.high+l.low)/2+this.priceOffset);t.fillStyle=this.color,t.strokeStyle="#fff",t.lineWidth=1.5,[{x:a,y:c},{x:h,y:f}].forEach(function(e){t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI),t.fill(),t.stroke()})}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,isLocked:this.isLocked,candles:this.candles,startTimestamp:this.startTimestamp,endTimestamp:this.endTimestamp,indexOffset:this.indexOffset,priceOffset:this.priceOffset}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},1065:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="extended",this.points=[],this.color="#9c27b0",this.lineWidth=1,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s,l,a,h,c=e.indexToX(n)+e.candleWidth/2,f=e.priceToY(i.price),p=e.indexToX(r)+e.candleWidth/2,u=e.priceToY(o.price),d=p-c,m=u-f,y=e.width-e.calculatePriceAxisWidth(),v=e.height-30;if(Math.abs(d)>.01){var b=m/d;s=0,a=y,(l=f-b*(c-0))<30?s=c+((l=30)-f)/b:l>v&&(s=c+((l=v)-f)/b),(h=f+b*(y-c))<30?a=c+((h=30)-f)/b:h>v&&(a=c+((h=v)-f)/b)}else s=c,l=30,a=c,h=v;if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(s,l),t.lineTo(a,h),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,[{x:c,y:f},{x:p,y:u}].forEach(function(e){t.beginPath(),t.arc(e.x,e.y,4,0,2*Math.PI),t.fill()})),this.text&&""!==this.text.trim()){var x=this.textPosition||"above-center",g=this.textSize||12,T=this.textColor||"#ffffff",S=(c+p)/2,P=(f+u)/2,w=Math.atan2(u-f,p-c),k=15,M=S,W=P;if(x.includes("above")?(M=S+Math.sin(w)*k,W=P-Math.cos(w)*k):x.includes("below")?(M=S-Math.sin(w)*k,W=P+Math.cos(w)*k):"center"===x&&(M=S,W=P),x.includes("left")){var C=c+.25*(p-c),L=f+.25*(u-f);x.includes("above")?(M=C+Math.sin(w)*k,W=L-Math.cos(w)*k):x.includes("below")?(M=C-Math.sin(w)*k,W=L+Math.cos(w)*k):(M=C,W=L)}else if(x.includes("right")){var I=c+.75*(p-c),A=f+.75*(u-f);x.includes("above")?(M=I+Math.sin(w)*k,W=A-Math.cos(w)*k):x.includes("below")?(M=I-Math.sin(w)*k,W=A+Math.cos(w)*k):(M=I,W=A)}t.save(),t.translate(M,W);var O=w;(w>Math.PI/2||w<-Math.PI/2)&&(O=w+Math.PI),t.rotate(O),t.font="".concat(g,"px Arial, sans-serif"),t.fillStyle=T,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1110:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="ellipse",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto",this.fillEnabled=!1,this.fillOpacity=.1},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price),c=(s+a)/2,f=(l+h)/2,p=Math.abs(a-s)/2,u=Math.abs(h-l)/2;if("dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),this.fillEnabled&&(t.fillStyle=this.color+Math.floor(255*this.fillOpacity).toString(16).padStart(2,"0"),t.beginPath(),t.ellipse(c,f,p,u,0,0,2*Math.PI),t.fill()),t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),t.ellipse(c,f,p,u,0,0,2*Math.PI),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(c,f,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(s,h,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var d=this.textPosition||"above-center",m=this.textSize||12,y=this.textColor||"#ffffff",v=c,b=f;d.includes("above")?b=f-u-15:d.includes("below")?b=f+u+15:"center"===d&&(b=f),t.font="".concat(m,"px Arial, sans-serif"),t.fillStyle=y,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,v,b)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1191:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="xyz",this.points=[],this.color="#2962ff",this.lineWidth=2,this.accuracyBadgeBounds=null},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length?this.point6Confirmed?this.points.push(t):this.points[5]=t:7===this.points.length&&(this.points[6]=t)}},{key:"isComplete",value:function(){return 7===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<7)return null;Math.abs(this.points[1].price-this.points[0].price),Math.abs(this.points[2].price-this.points[1].price),Math.abs(this.points[3].price-this.points[2].price),Math.abs(this.points[4].price-this.points[3].price),Math.abs(this.points[5].price-this.points[4].price),Math.abs(this.points[6].price-this.points[5].price);var t,e,i=Math.abs(this.points[2].price-this.points[0].price),o=Math.abs(this.points[6].price-this.points[4].price),n=Math.abs(this.points[4].price-this.points[2].price),r=0!==i?n/i:0,s=0!==i?o/i:0;if(r>=.5&&r<=.786)t=100-Math.abs(r-.618)/.618*100;else{var l=r<.5?.5-r:r-.786;t=Math.max(0,100-l/.618*150)}if(s>=.618&&s<=1.618)e=100-Math.abs(s-1)/1*100;else{var a=s<.618?.618-s:s-1.618;e=Math.max(0,100-a/1*120)}var h=.4*t+.6*e,c=this.points[2].price<this.points[0].price;return{total:Math.round(h),accuracyX:Math.round(t),accuracyY:Math.round(e),ratioXtoW:r,ratioYtoW:s,totalWaveW:i,totalWaveX:n,totalWaveY:o,isUptrend:c}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"isHoveringBadge",value:function(t,e){if(!this.accuracyBadgeBounds)return!1;var i=this.accuracyBadgeBounds;return t>=i.x-20&&t<=i.x+i.width+20&&e>=i.y-20&&e<=i.y+i.height+20}},{key:"getQualityText",value:function(t){return t>=90?"Excellent":t>=75?"Good":t>=60?"Fair":"Weak"}},{key:"getXIndicator",value:function(t){var e=(100*t).toFixed(1);return t>=.5&&t<=.786?"✓ ".concat(e,"%"):"✗ ".concat(e,"%")}},{key:"getYIndicator",value:function(t){var e=(100*t).toFixed(1);return t>=.618&&t<=1.618?"✓ ".concat(e,"%"):"✗ ".concat(e,"%")}},{key:"getXColor",value:function(t){return t>=.5&&t<=.786?"#26a69a":"#ef5350"}},{key:"getYColor",value:function(t){return t>=.618&&t<=1.618?"#26a69a":"#ef5350"}},{key:"getXValidation",value:function(t){return"(Should be 50-78.6%)"}},{key:"getYValidation",value:function(t){return"(Should be 61.8-161.8%)"}},{key:"drawHoverTooltip",value:function(t,e,i,o,n){var r,s=10,l=[{text:"Wave Structure",style:"header"},{text:"W Wave: ".concat(i.totalWaveW.toFixed(2)),style:"normal"},{text:"X Wave: ".concat(this.getXIndicator(i.ratioXtoW)," ").concat(this.getXValidation(i.ratioXtoW)),style:"validation",color:this.getXColor(i.ratioXtoW)},{text:"Y Wave: ".concat(this.getYIndicator(i.ratioYtoW)," ").concat(this.getYValidation(i.ratioYtoW)),style:"validation",color:this.getYColor(i.ratioYtoW)},{text:"",style:"spacer"},{text:"Accuracy: ".concat(i.total,"% (").concat(this.getQualityText(i.total),")"),style:"accuracy",color:this.getAccuracyColor(i.total)}],a=18*l.length+20,h=e.canvas.height,c=o+10;r=h-n<a+50?n-a-15:n+40,c+220>e.canvas.width-10&&(c=o-220-10),r<10&&(r=10),t.save(),t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=10,t.shadowOffsetX=0,t.shadowOffsetY=2,t.fillStyle="rgba(30, 30, 30, 0.95)",t.beginPath(),t.roundRect(c,r,220,a,6),t.fill(),t.restore(),t.textAlign="left",t.textBaseline="top";var f=r+s;l.forEach(function(e){if("spacer"!==e.style){if("header"===e.style)t.font="bold 12px Arial",t.fillStyle="#ffffff",t.fillText(e.text,c+s,f);else if("validation"===e.style){t.font="11px Arial";var i=e.text.split(" "),o=i[0],n=i.slice(1).join(" ");t.fillStyle=e.color,t.fillText(o,c+s,f);var r=t.measureText(o+" ").width;t.fillStyle="#b8bcc5",t.fillText(n,c+s+r,f)}else if("accuracy"===e.style){t.font="bold 11px Arial";var l=e.text.split(": ");t.fillStyle="#b8bcc5",t.fillText(l[0]+": ",c+s,f);var a=t.measureText(l[0]+": ").width;t.fillStyle=e.color,t.fillText(l[1],c+s+a,f)}else t.font="11px Arial",t.fillStyle="#b8bcc5",t.fillText(e.text,c+s,f);f+=18}else f+=18*.3})}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=[null,"W",null,"X",null,"Y",null],o=[null,"#2962ff",null,"#ff6b6b",null,"#4caf50",null],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke(),t.setLineDash([])}}}}if(this.points.length>=3){var d,m,y,v=this.color||"#2962ff",b=1;if(v.startsWith("#"))d=parseInt(v.slice(1,3),16),m=parseInt(v.slice(3,5),16),y=parseInt(v.slice(5,7),16);else if(v.startsWith("rgb")){var x=v.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);x&&(d=parseInt(x[1]),m=parseInt(x[2]),y=parseInt(x[3]),b=x[4]?parseFloat(x[4]):1)}var g=Math.min(.12*b,.12),T="rgba(".concat(d,", ").concat(m,", ").concat(y,", ").concat(g,")");t.fillStyle=T,n.length>=3&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.closePath(),t.fill()),n.length>=7&&(t.beginPath(),t.moveTo(n[4].x,n[4].y),t.lineTo(n[5].x,n[5].y),t.lineTo(n[6].x,n[6].y),t.closePath(),t.fill())}if(!1!==this.showProjections&&this.points.length>=4){var S=this.points.length>=3?Math.abs(this.points[2].price-this.points[0].price):0,P=this.points.length>=5?Math.abs(this.points[4].price-this.points[2].price):0,w=this.points.length>=7?Math.abs(this.points[6].price-this.points[4].price):0;if(t.font="10px Arial",t.textAlign="center",t.textBaseline="middle",n.length>=3){var k=(n[0].x+n[2].x)/2,M=(n[0].y+n[2].y)/2;t.fillStyle="rgba(41, 98, 255, 0.9)",t.fillText("W (Corrective)",k-20,M)}if(n.length>=5){var W=(n[2].x+n[4].x)/2,C=(n[2].y+n[4].y)/2,L=0!==S?(P/S*100).toFixed(1):"0.0",I=L>=50&&L<=78.6;t.fillStyle=I?"rgba(255, 107, 107, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("X (".concat(L,"%)"),W+20,C),t.strokeStyle="rgba(255, 107, 107, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[2].x,n[2].y),t.lineTo(n[4].x,n[4].y),t.stroke(),t.setLineDash([]);var A=0!==S?(P/S).toFixed(2):"0.00",O=A>=.5&&A<=.786,j="".concat(A," → ").concat("0.62");t.font="bold 11px Arial",t.fillStyle=O?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(j,W,C-10)}if(n.length>=7){var D=(n[4].x+n[6].x)/2,B=(n[4].y+n[6].y)/2,X=0!==S?(w/S*100).toFixed(1):"0.0",E=X>=61.8&&X<=161.8;t.fillStyle=E?"rgba(76, 175, 80, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("Y (".concat(X,"%)"),D-20,B),t.strokeStyle="rgba(76, 175, 80, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[4].x,n[4].y),t.lineTo(n[6].x,n[6].y),t.stroke(),t.setLineDash([]);var Y=0!==S?(w/S).toFixed(2):"0.00",z=Y>=.618&&Y<=1.618,R="".concat(Y," → ").concat("1.00");t.font="bold 11px Arial",t.fillStyle=z?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(R,D,B-10)}}if(!1!==this.showProjections&&7===this.points.length&&7===n.length){var F=this.calculateAccuracy();if(F){var N=F.isUptrend?"↑ Bullish":"↓ Bearish",_=F.isUptrend?"#26a69a":"#ef5350",q=n[0].x,H=n[0].y;t.font="bold 11px Arial",t.textAlign="left",t.textBaseline="middle";var V="".concat(N," Double Combo (WXY)"),J=t.measureText(V).width+12,Z=q-J-15,U=H-25;t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect(Z,U-10,J,20,3),t.fill(),t.fillStyle=_,t.fillText(V,Z+6,U);var Q=n[6],G=Q.x+15,K=Q.y,$=this.getAccuracyColor(F.total),tt="Accuracy: ".concat(F.total,"%");t.font="12px Arial",t.textAlign="left",t.textBaseline="middle";var et=t.measureText(tt).width+10;t.fillStyle="rgba(0, 0, 0, 0.8)",t.beginPath(),t.roundRect(G-5,K-12,et+10,24,4),t.fill(),t.fillStyle=$,t.fillRect(G-5,K-12,3,24),t.font="12px Arial",t.fillStyle="#b8bcc5";var it="Accuracy: ";t.fillText(it,G+3,K);var ot=t.measureText(it).width;t.fillStyle=$,t.fillText("".concat(F.total,"%"),G+3+ot,K)}}if(this.selected)for(var nt=0;nt<n.length;nt++){var rt=n[nt];t.fillStyle=this.color,t.beginPath(),t.arc(rt.x,rt.y,4,0,2*Math.PI),t.fill()}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var st=0;st<n.length;st++)if(i[st]){var lt=n[st],at=Math.round(lt.x-10),ht=Math.round(lt.y-15);t.beginPath(),t.arc(at,ht,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=o[st],t.lineWidth=1.5,t.stroke(),t.fillStyle=o[st],t.fillText(i[st],at,ht)}if(this.text&&""!==this.text.trim()&&n.length>=2){for(var ct=this.textSize||12,ft=this.textColor||"#ffffff",pt=this.textPosition||"above-center",ut=0,dt=0,mt=0;mt<n.length;mt++)ut+=n[mt].x,dt+=n[mt].y;var yt=ut/n.length,vt=dt/n.length,bt=yt,xt=vt;pt.includes("above")?xt=vt-20:pt.includes("below")&&(xt=vt+20),pt.includes("left")?bt=yt-20:pt.includes("right")&&(bt=yt+20),t.font="".concat(ct,"px Arial, sans-serif"),t.fillStyle=ft,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,bt,xt)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1371:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="flatbottomchannel",this.points=[],this.color="#9c27b0",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#9c27b0",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(i.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=i.price,m=e.priceToY(d),y=Math.min(r,s,f),v=Math.max(r,s,f),b=v-y,x=y-2*b,g=v+2*b,T=e.indexToX(x)+e.candleWidth/2,S=e.indexToX(g)+e.candleWidth/2;t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(T,m),t.lineTo(S,m),t.stroke();var P=Math.min(r,s),w=e.indexToX(P)+e.candleWidth/2,k=(u-m)/(p-w),M=T,W=m+k*(M-w),C=S,L=m+k*(C-w);t.lineWidth=this.lineWidth,t.globalAlpha=.8,t.beginPath(),t.moveTo(M,W),t.lineTo(C,L),t.stroke(),t.globalAlpha=1,t.globalAlpha=.3,t.setLineDash([3,3]);var I=m+k*(T-w);t.beginPath(),t.moveTo(T,m),t.lineTo(T,I),t.stroke();var A=m+k*(S-w);t.beginPath(),t.moveTo(S,m),t.lineTo(S,A),t.stroke();var O=(y+v)/2,j=e.indexToX(O)+e.candleWidth/2,D=m+k*(j-w);if(t.beginPath(),t.moveTo(j,m),t.lineTo(j,D),t.stroke(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,m,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,m,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,5,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var B=(T+S)/2,X=m+35;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="top",t.fillText(this.text,B,X)}}else{var E=Math.min(l,h),Y=Math.max(l,h);t.beginPath(),t.moveTo(E,a),t.lineTo(Y,a),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill()}t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},1556:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibonacci",this.points=[],this.color="#651fff",this.lineWidth=1,this.tooltipMode="auto",this.levels=[0,.236,.382,.5,.618,.786,1],this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"}},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.indexToX(s)+e.candleWidth/2,h=Math.min(l,a),c=Math.max(l,a),f=n.price-o.price;t.font="11px Arial",t.textAlign="right",this.levelColors||(this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"});var p=this.customLevels||this.levels;if(this.visibleLevels||(this.visibleLevels={},p.forEach(function(t){i.visibleLevels[t]=!0})),p.forEach(function(n,r){if(!1!==i.visibleLevels[n]){var s,l=o.price+f*n,a=e.priceToY(l);s=i.levelColors[n]?i.levelColors[n]:(i.color,i.color);for(var u=null,d=r+1;d<p.length;d++)if(!1!==i.visibleLevels[p[d]]){u=p[d];break}if(u){var m,y,v,b=o.price+f*u,x=e.priceToY(b);if(s.startsWith("rgba")||s.startsWith("rgb")){var g=s.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);g?(m=parseInt(g[1]),y=parseInt(g[2]),v=parseInt(g[3])):m=y=v=0}else{var T=s.replace("#","");m=parseInt(T.substr(0,2),16),y=parseInt(T.substr(2,2),16),v=parseInt(T.substr(4,2),16)}t.fillStyle="rgba(".concat(m,", ").concat(y,", ").concat(v,", 0.08)"),t.fillRect(h,a,c-h,x-a)}t.strokeStyle=s,t.lineWidth=i.lineWidth,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(h,a),t.lineTo(c,a),t.stroke(),t.setLineDash([]),t.fillStyle=s;var S=e.formatPrice?e.formatPrice(l):l.toFixed(4);t.fillText("".concat(n.toFixed(3)," (").concat(S,")"),h-5,a+4)}}),this.selected&&(t.fillStyle=this.color,[o,n].forEach(function(i){var o=e.indexToX(i.index)+e.candleWidth/2,n=e.priceToY(i.price);t.beginPath(),t.arc(o,n,4,0,2*Math.PI),t.fill()})),this.text&&""!==this.text.trim()){var u=this.textPosition||"above-center",d=this.textSize||12,m=this.textColor||"#ffffff",y=e.priceToY(o.price),v=e.priceToY(n.price),b=(l+a)/2,x=(y+v)/2,g=(Math.atan2(v-y,a-l),b),T=x;"center"===u?(g=b,T=x):"above-left"===u?(g=h+.2*(c-h),T=Math.min(y,v)-15):"above-center"===u?(g=b,T=Math.min(y,v)-15):"above-right"===u?(g=h+.8*(c-h),T=Math.min(y,v)-15):"below-left"===u?(g=h+.2*(c-h),T=Math.max(y,v)+20):"below-center"===u?(g=b,T=Math.max(y,v)+20):"below-right"===u&&(g=h+.8*(c-h),T=Math.max(y,v)+20),t.font="".concat(d,"px Arial, sans-serif"),t.fillStyle=m,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,g,T)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1632:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pricerange",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto",this.fillOpacity=.3},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=e.priceToY(i.price),r=e.priceToY(o.price),s=e.chartX||0,l=e.chartWidth||e.canvas.width,a=Math.min(n,r),h=Math.max(n,r),c=h-a;if(t.globalAlpha=this.fillOpacity||.2,t.fillStyle=this.color,t.fillRect(s,a,l,c),t.globalAlpha=1,t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(s,a),t.lineTo(s+l,a),t.stroke(),t.beginPath(),t.moveTo(s,h),t.lineTo(s+l,h),t.stroke(),t.setLineDash([]),this.selected){t.fillStyle=this.color;var f=s+l/2;t.beginPath(),t.arc(f,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(f,h,4,0,2*Math.PI),t.fill()}var p=Math.max(i.price,o.price),u=Math.min(i.price,o.price),d=p-u,m=d/u*100,y=this.textSize||11,v=this.textColor||"#ffffff",b=e.formatPrice?function(t){return e.formatPrice(t)}:function(t){return t.toFixed(2)},x="".concat(b(d)," (").concat(m.toFixed(2),"%)");t.font="bold ".concat(y,"px Arial, sans-serif");var g=t.measureText(x).width,T=s+10,S=a-(y+12)/2;t.fillStyle="rgba(30, 30, 30, 0.9)",t.beginPath(),t.roundRect(T,S,g+12,y+12,3),t.fill(),t.strokeStyle=this.color,t.lineWidth=1,t.stroke(),t.fillStyle=this.color,t.textAlign="left",t.textBaseline="middle",t.fillText(x,T+6,a);var P=s+l-10;t.font="".concat(y,"px Arial, sans-serif"),t.fillStyle=v,t.textAlign="right",t.textBaseline="middle";var w=b(p);t.fillText(w,P,a);var k=b(u);if(t.fillText(k,P,h),this.text&&""!==this.text.trim()){var M=this.textPosition||"center",W=s+l/2,C=(a+h)/2;M.includes("above")?C=a-15:M.includes("below")&&(C=h+15),t.font="".concat(y+2,"px Arial, sans-serif"),t.fillStyle=v,t.textAlign="center",t.textBaseline="middle";var L=t.measureText(this.text).width;t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(W-L/2-5,C-(y+2)/2-3,L+10,y+2+6),t.fillStyle=v,t.fillText(this.text,W,C)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},1665:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="texttable",this.points=[],this.textColor="#ffffff",this.textSize=12,this.backgroundColor="rgba(30, 30, 30, 0.3)",this.borderColor="#555555",this.headerColor="rgba(60, 60, 60, 0.5)",this.cellPadding=6,this.borderWidth=1,this.hasHeader=!0,this.cells=[[{text:"",isHeader:!0},{text:"",isHeader:!0},{text:"",isHeader:!0}],[{text:"",isHeader:!1},{text:"",isHeader:!1},{text:"",isHeader:!1}],[{text:"",isHeader:!1},{text:"",isHeader:!1},{text:"",isHeader:!1}]],this.columnWidths=[80,80,80],this.rowHeights=[25,25,25],this.resizing=null},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"addRow",value:function(){for(var t=[],e=0;e<this.cells[0].length;e++)t.push({text:"",isHeader:!1});this.cells.push(t),this.rowHeights.push(25)}},{key:"addColumn",value:function(){var t=this;this.cells[0].length,this.cells.forEach(function(e,i){e.push({text:"",isHeader:0===i&&t.hasHeader})}),this.columnWidths.push(80)}},{key:"removeHeader",value:function(){this.hasHeader&&this.cells.length>0&&(this.cells[0].forEach(function(t){t.isHeader=!1}),this.hasHeader=!1)}},{key:"removeRow",value:function(t){this.cells.length>2&&t>0&&(this.cells.splice(t,1),this.rowHeights.splice(t,1))}},{key:"removeColumn",value:function(t){this.cells[0].length>2&&(this.cells.forEach(function(e){e.splice(t,1)}),this.columnWidths.splice(t,1))}},{key:"getTableDimensions",value:function(){return{width:this.columnWidths.reduce(function(t,e){return t+e},0),height:this.rowHeights.reduce(function(t,e){return t+e},0)}}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.save(),t.font="".concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="middle";var l=s;if(this.cells.forEach(function(e,o){var n=r,s=i.rowHeights[o];e.forEach(function(e,o){var r=i.columnWidths[o];if(t.fillStyle=e.isHeader?i.headerColor:i.backgroundColor,t.fillRect(n,l,r,s),t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.strokeRect(n,l,r,s),t.fillStyle=i.textColor,e.text){var a=e.text.split("\n"),h=1.4*i.textSize,c=a.length*h,f=l+s/2-c/2+h/2;a.forEach(function(e,o){t.fillText(e,n+i.cellPadding,f+o*h)})}n+=r}),l+=s}),this.selected){var a=this.getTableDimensions(),h=r+a.width/2-15,c=s+a.height+5;this.drawAddButton(t,h,c,"+Row");var f=r+a.width+5,p=s+a.height/2-15;if(this.drawAddButton(t,f,p,"+Col"),this.hasHeader){var u=r+a.width+5,d=s;this.drawRemoveButton(t,u,d,"-Header")}}t.restore()}}}},{key:"drawAddButton",value:function(t,e,i,o){t.fillStyle="rgba(41, 98, 255, 0.8)",t.fillRect(e,i,50,20),t.strokeStyle="#2962ff",t.lineWidth=1,t.strokeRect(e,i,50,20),t.fillStyle="#ffffff",t.font="10px Arial, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(o,e+25,i+10)}},{key:"drawRemoveButton",value:function(t,e,i,o){t.fillStyle="rgba(255, 59, 48, 0.8)",t.fillRect(e,i,60,20),t.strokeStyle="#ff3b30",t.lineWidth=1,t.strokeRect(e,i,60,20),t.fillStyle="#ffffff",t.font="10px Arial, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(o,e+30,i+10)}},{key:"isClickOnAddRow",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=this.getTableDimensions(),a=r+l.width/2-15,h=s+l.height+5;return t>=a&&t<=a+50&&e>=h&&e<=h+20}},{key:"isClickOnAddColumn",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=this.getTableDimensions(),a=r+l.width+5,h=s+l.height/2-15;return t>=a&&t<=a+50&&e>=h&&e<=h+20}},{key:"isClickOnRemoveHeader",value:function(t,e,i){if(this.points.length<1||!this.hasHeader)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=r+this.getTableDimensions().width+5;return t>=l&&t<=l+60&&e>=s&&e<=s+20}},{key:"getCellAtPosition",value:function(t,e,i){if(this.points.length<1)return null;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return null;for(var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=0;l<this.cells.length;l++){for(var a=r,h=this.cells[l],c=this.rowHeights[l],f=0;f<h.length;f++){var p=this.columnWidths[f];if(t>=a&&t<=a+p&&e>=s&&e<=s+c)return{rowIndex:l,colIndex:f,cell:h[f]};a+=p}s+=c}return null}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=this.getTableDimensions();return t>=r&&t<=r+l.width&&e>=s&&e<=s+l.height}},{key:"getResizeHandle",value:function(t,e,i){if(this.points.length<1)return null;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return null;for(var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=this.getTableDimensions(),a=r,h=0;h<this.columnWidths.length;h++)if(a+=this.columnWidths[h],Math.abs(t-a)<=5&&e>=s&&e<=s+l.height)return{type:"column",index:h};for(var c=s,f=0;f<this.cells.length;f++)if(c+=this.rowHeights[f],Math.abs(e-c)<=5&&t>=r&&t<=r+l.width)return{type:"row",index:f};return null}},{key:"resizeColumn",value:function(t,e){t>=0&&t<this.columnWidths.length&&(this.columnWidths[t]=Math.max(30,e))}},{key:"resizeRowHeight",value:function(t,e){t>=0&&t<this.rowHeights.length&&(this.rowHeights[t]=Math.max(20,e))}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},2116:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="brush",this.points=[],this.color="#2962ff",this.lineWidth=2},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){this.points.push(t)}},{key:"isComplete",value:function(){return this.points.length>=2}},{key:"render",value:function(t,e){if(!(this.points.length<2)){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.lineCap="round",t.lineJoin="round","dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath();var i,o=this.points[0];if(o.timestamp){var n=e.timestampToIndex(o.timestamp);if(null===n)return;i=n+(o.indexOffset||0)}else i=o.index;var r=e.indexToX(i)+e.candleWidth/2,s=e.priceToY(o.price);t.moveTo(r,s);for(var l=1;l<this.points.length;l++){var a=this.points[l],h=void 0;if(a.timestamp){var c=e.timestampToIndex(a.timestamp);if(null===c)continue;h=c+(a.indexOffset||0)}else h=a.index;var f=e.indexToX(h)+e.candleWidth/2,p=e.priceToY(a.price);t.lineTo(f,p)}if(t.stroke(),t.setLineDash([]),this.text&&""!==this.text.trim()){var u,d=this.textPosition||"above-center",m=this.textSize||12,y=this.textColor||"#ffffff",v=Math.floor(this.points.length/2),b=this.points[v];if(b.timestamp){var x=e.timestampToIndex(b.timestamp);if(null===x)return;u=x+(b.indexOffset||0)}else u=b.index;var g=e.indexToX(u)+e.candleWidth/2,T=e.priceToY(b.price),S=g,P=T-20;d.includes("below")&&(P=T+20),t.font="".concat(m,"px Arial, sans-serif"),t.fillStyle=y,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,S,P)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},2205:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="arrow",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price);t.strokeStyle=this.color,t.fillStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(s,l),t.lineTo(a,h),t.stroke(),t.setLineDash([]);var c=Math.atan2(h-l,a-s);if(t.beginPath(),t.moveTo(a,h),t.lineTo(a-15*Math.cos(c)-8*Math.sin(c),h-15*Math.sin(c)+8*Math.cos(c)),t.lineTo(a-15*Math.cos(c)+8*Math.sin(c),h-15*Math.sin(c)-8*Math.cos(c)),t.closePath(),t.fill(),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var f=this.textPosition||"above-center",p=this.textSize||12,u=this.textColor||"#ffffff",d=(s+a)/2,m=(l+h)/2,y=d,v=m;f.includes("above")?(y=d+15*Math.sin(c),v=m-15*Math.cos(c)):f.includes("below")&&(y=d-15*Math.sin(c),v=m+15*Math.cos(c)),t.save(),t.translate(y,v);var b=c;(c>Math.PI/2||c<-Math.PI/2)&&(b=c+Math.PI),t.rotate(b),t.font="".concat(p,"px Arial, sans-serif"),t.fillStyle=u,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},3078:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="abc",this.points=[],this.color="#2962ff",this.lineWidth=2,this.accuracyBadgeBounds=null},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length&&(this.points[3]=t)}},{key:"isComplete",value:function(){return 4===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<4)return null;var t,e,i=Math.abs(this.points[1].price-this.points[0].price),o=Math.abs(this.points[2].price-this.points[1].price),n=Math.abs(this.points[3].price-this.points[2].price),r=.382,s=.618,l=0!==i?o/i:0,a=0!==i?n/i:0;if(l>=r&&l<=.618)t=100-Math.abs(l-.5)/.5*100;else{var h=l<r?r-l:l-.618;t=Math.max(0,100-h/.5*150)}if(a>=s&&a<=1.618)e=100-Math.abs(a-1)/1*100;else{var c=a<s?s-a:a-1.618;e=Math.max(0,100-c/1*120)}var f=.6*t+.4*e;return{total:Math.round(f),waveB:Math.round(t),waveC:Math.round(e),ratioBtoA:l,ratioCtoA:a,waveAValue:i,waveBValue:o,waveCValue:n}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"isHoveringBadge",value:function(t,e){if(!this.accuracyBadgeBounds)return!1;var i=this.accuracyBadgeBounds;return t>=i.x-20&&t<=i.x+i.width+20&&e>=i.y-20&&e<=i.y+i.height+20}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=[null,"A","B","C"],o=[null,"#2962ff","#ff6b6b","#4caf50"],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke(),t.setLineDash([])}}}}if(4===this.points.length&&4===n.length){var d,m,y,v=this.color||"#2962ff",b=1;if(v.startsWith("#"))d=parseInt(v.slice(1,3),16),m=parseInt(v.slice(3,5),16),y=parseInt(v.slice(5,7),16);else if(v.startsWith("rgb")){var x=v.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);x&&(d=parseInt(x[1]),m=parseInt(x[2]),y=parseInt(x[3]),b=x[4]?parseFloat(x[4]):1)}var g=Math.min(.12*b,.12),T="rgba(".concat(d,", ").concat(m,", ").concat(y,", ").concat(g,")");t.fillStyle=T,t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.lineTo(n[3].x,n[3].y),t.closePath(),t.fill()}if(!1!==this.showProjections&&4===this.points.length&&4===n.length){var S=Math.abs(this.points[1].price-this.points[0].price),P=Math.abs(this.points[2].price-this.points[1].price),w=Math.abs(this.points[3].price-this.points[2].price),k=0!==S?(P/S*100).toFixed(1):"0.0",M=0!==S?(w/S*100).toFixed(1):"0.0";t.strokeStyle="rgba(76, 175, 80, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[1].x,n[1].y),t.lineTo(n[3].x,n[3].y),t.stroke(),t.setLineDash([]),t.font="10px Arial",t.textAlign="center",t.textBaseline="middle";var W=(n[0].x+n[1].x)/2,C=(n[0].y+n[1].y)/2;t.fillStyle="rgba(41, 98, 255, 0.9)",t.fillText("A",W-20,C);var L=(n[1].x+n[2].x)/2,I=(n[1].y+n[2].y)/2,A=k>=38.2&&k<=61.8;t.fillStyle=A?"rgba(255, 152, 0, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("B (".concat(k,"%)"),L+20,I);var O=(n[2].x+n[3].x)/2,j=(n[2].y+n[3].y)/2,D=M>=61.8&&M<=161.8;t.fillStyle=D?"rgba(76, 175, 80, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("C (".concat(M,"%)"),O-20,j);var B=(n[1].x+n[3].x)/2,X=(n[1].y+n[3].y)/2,E=0!==S?(w/S).toFixed(2):"0.00";t.fillStyle="rgba(76, 175, 80, 0.9)",t.font="bold 11px Arial",t.fillText(E,B,X-10)}if(!1!==this.showProjections&&4===this.points.length&&4===n.length){var Y=this.calculateAccuracy();if(Y){var z=this.points[1].price>this.points[0].price,R=z?"↑ Bullish":"↓ Bearish",F=z?"#26a69a":"#ef5350",N=n[0].x,_=n[0].y;t.font="bold 11px Arial",t.textAlign="left",t.textBaseline="middle";var q="".concat(R," Correction (ABC)"),H=t.measureText(q).width+12,V=N-H-15,J=_-25;t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect(V,J-10,H,20,3),t.fill(),t.fillStyle=F,t.fillText(q,V+6,J);var Z=n[3],U=Z.x+15,Q=Z.y,G=this.getAccuracyColor(Y.total),K="Accuracy: ".concat(Y.total,"%");t.font="12px Arial",t.textAlign="left",t.textBaseline="middle";var $=t.measureText(K).width+10;t.fillStyle="rgba(0, 0, 0, 0.8)",t.beginPath(),t.roundRect(U-5,Q-12,$+10,24,4),t.fill(),t.fillStyle=G,t.fillRect(U-5,Q-12,3,24),t.font="12px Arial",t.fillStyle="#b8bcc5";var tt="Accuracy: ";t.fillText(tt,U+3,Q);var et=t.measureText(tt).width;t.fillStyle=G,t.fillText("".concat(Y.total,"%"),U+3+et,Q)}}if(this.selected)for(var it=0;it<n.length;it++){var ot=n[it];t.fillStyle=this.color,t.beginPath(),t.arc(ot.x,ot.y,4,0,2*Math.PI),t.fill()}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var nt=0;nt<n.length;nt++)if(i[nt]){var rt=n[nt],st=Math.round(rt.x-10),lt=Math.round(rt.y-15);t.beginPath(),t.arc(st,lt,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=o[nt],t.lineWidth=1.5,t.stroke(),t.fillStyle=o[nt],t.fillText(i[nt],st,lt)}if(this.text&&""!==this.text.trim()&&n.length>=2){for(var at=this.textSize||12,ht=this.textColor||"#ffffff",ct=this.textPosition||"above-center",ft=0,pt=0,ut=0;ut<n.length;ut++)ft+=n[ut].x,pt+=n[ut].y;var dt=ft/n.length,mt=pt/n.length,yt=dt,vt=mt;ct.includes("above")?vt=mt-20:ct.includes("below")&&(vt=mt+20),ct.includes("left")?yt=dt-20:ct.includes("right")&&(yt=dt+20),t.font="".concat(at,"px Arial, sans-serif"),t.fillStyle=ht,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,yt,vt)}}}},{key:"drawHoverTooltip",value:function(t,e,i,o,n){var r=[{text:"Elliott Correction (ABC) Analysis",color:"#ffffff",bold:!0},{text:"─────────────────────────────────",color:"#666666"},{text:"WAVE STRUCTURE:",color:"#aaaaaa",size:10},{text:"  A:  ".concat(i.waveAValue.toFixed(4)," (Impulse)"),color:"#2196f3"},{text:"  B:  ".concat(i.waveBValue.toFixed(4)," (Correction)"),color:"#ff9800"},{text:"      ".concat((100*i.ratioBtoA).toFixed(1),"% of A  ").concat(this.getWaveBIndicator(i.ratioBtoA)),color:this.getWaveBColor(i.ratioBtoA)},{text:"  C:  ".concat(i.waveCValue.toFixed(4)," (Impulse)"),color:"#4caf50"},{text:"      ".concat((100*i.ratioCtoA).toFixed(1),"% of A  ").concat(this.getWaveCIndicator(i.ratioCtoA)),color:this.getWaveCColor(i.ratioCtoA)},{text:"",color:"#ffffff"},{text:"FIBONACCI VALIDATION:",color:"#aaaaaa",size:10},{text:"  B: ".concat(this.getWaveBValidation(i.ratioBtoA)),color:this.getWaveBColor(i.ratioBtoA)},{text:"  C: ".concat(this.getWaveCValidation(i.ratioCtoA)),color:this.getWaveCColor(i.ratioCtoA)},{text:"",color:"#ffffff"},{text:"Accuracy: ".concat(i.total,"%  ").concat(this.getQualityText(i.total)),color:this.getAccuracyColor(i.total),bold:!0}];t.font="11px Arial";var s=0;r.forEach(function(e){var i=t.measureText(e.text).width;i>s&&(s=i)});var l,a=s+20,h=16*r.length+20,c=e.height-30,f=o;(l=c-n<h+50?n-h-15:n+40)<30&&(l=30),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=10,t.shadowOffsetX=0,t.shadowOffsetY=4,t.fillStyle="rgba(0, 0, 0, 0.98)",t.strokeStyle="rgba(255, 255, 255, 0.4)",t.lineWidth=2,t.beginPath(),t.roundRect(f,l,a,h,6),t.fill(),t.stroke(),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.textAlign="left",t.textBaseline="top",r.forEach(function(e,i){var o=e.size||11;t.font=e.bold?"bold ".concat(o,"px Arial"):"".concat(o,"px Arial"),t.fillStyle=e.color,t.fillText(e.text,f+10,l+10+16*i)})}},{key:"getQualityText",value:function(t){return t>=90?"(Excellent!)":t>=75?"(Good)":"(Weak)"}},{key:"getWaveBIndicator",value:function(t){return t>=.382&&t<=.618?"✓ Perfect":t>=.3&&t<=.7?"⚠ OK":"✗ Weak"}},{key:"getWaveCIndicator",value:function(t){return t>=.618&&t<=1.618?"✓ Perfect":t>=.5&&t<=2?"⚠ OK":"✗ Weak"}},{key:"getWaveBColor",value:function(t){return t>=.382&&t<=.618?"#26a69a":t>=.3&&t<=.7?"#ffa726":"#888888"}},{key:"getWaveCColor",value:function(t){return t>=.618&&t<=1.618?"#26a69a":t>=.5&&t<=2?"#ffa726":"#888888"}},{key:"getWaveBValidation",value:function(t){var e=(100*t).toFixed(1);return"".concat(e,t>=.382&&t<=.618?"% retracement ✓ (Ideal: 38.2%-61.8%)":t>=.3&&t<=.7?"% retracement ⚠ (Acceptable)":"% retracement ✗ (Outside range)")}},{key:"getWaveCValidation",value:function(t){var e=(100*t).toFixed(1);return"".concat(e,t>=.618&&t<=1.618?"% extension ✓ (Ideal: 61.8%-161.8%)":t>=.5&&t<=2?"% extension ⚠ (Acceptable)":"% extension ✗ (Outside range)")}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},3403:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="abcde",this.points=[],this.color="#2962ff",this.lineWidth=2},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length&&(this.points[5]=t)}},{key:"isComplete",value:function(){return 6===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=[null,"A","B","C","D","E"],o=[null,"#2962ff","#ff6b6b","#4caf50","#ffa500","#9c27b0"],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke(),t.setLineDash([])}}}}if(this.selected)for(var d=0;d<n.length;d++){var m=n[d];t.fillStyle=this.color,t.beginPath(),t.arc(m.x,m.y,4,0,2*Math.PI),t.fill()}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var y=0;y<n.length;y++)if(i[y]){var v=n[y],b=Math.round(v.x-10),x=Math.round(v.y-15);t.beginPath(),t.arc(b,x,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=o[y],t.lineWidth=1.5,t.stroke(),t.fillStyle=o[y],t.fillText(i[y],b,x)}if(this.text&&""!==this.text.trim()&&n.length>=2){for(var g=this.textSize||12,T=this.textColor||"#ffffff",S=this.textPosition||"above-center",P=0,w=0,k=0;k<n.length;k++)P+=n[k].x,w+=n[k].y;var M=P/n.length,W=w/n.length,C=M,L=W;S.includes("above")?L=W-20:S.includes("below")&&(L=W+20),S.includes("left")?C=M-20:S.includes("right")&&(C=M+20),t.font="".concat(g,"px Arial, sans-serif"),t.fillStyle=T,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,C,L)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},3647:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="flattopchannel",this.points=[],this.color="#e91e63",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#e91e63",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(i.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=i.price,m=e.priceToY(d),y=Math.min(r,s,f),v=Math.max(r,s,f),b=v-y,x=y-2*b,g=v+2*b,T=e.indexToX(x)+e.candleWidth/2,S=e.indexToX(g)+e.candleWidth/2;t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(T,m),t.lineTo(S,m),t.stroke();var P=Math.min(r,s),w=e.indexToX(P)+e.candleWidth/2,k=(u-m)/(p-w),M=T,W=m+k*(M-w),C=S,L=m+k*(C-w);t.lineWidth=this.lineWidth,t.globalAlpha=.8,t.beginPath(),t.moveTo(M,W),t.lineTo(C,L),t.stroke(),t.globalAlpha=1,t.globalAlpha=.3,t.setLineDash([3,3]);var I=m+k*(T-w);t.beginPath(),t.moveTo(T,m),t.lineTo(T,I),t.stroke();var A=m+k*(S-w);t.beginPath(),t.moveTo(S,m),t.lineTo(S,A),t.stroke();var O=(y+v)/2,j=e.indexToX(O)+e.candleWidth/2,D=m+k*(j-w);if(t.beginPath(),t.moveTo(j,m),t.lineTo(j,D),t.stroke(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,m,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,m,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,5,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var B=(T+S)/2,X=m-25;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,B,X)}}else{var E=Math.min(l,h),Y=Math.max(l,h);t.beginPath(),t.moveTo(E,a),t.lineTo(Y,a),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill()}t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},3972:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="trendangle",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),this.points.length>=2){var l=this.points[1],a=l.timestamp?e.timestampToIndex(l.timestamp):l.index;if(null===a)return;var h=e.indexToX(a)+e.candleWidth/2,c=e.priceToY(l.price);t.beginPath(),t.moveTo(r,s),t.lineTo(h,c),t.stroke();var f=h-r,p=c-s,u=Math.atan2(-p,f)*(180/Math.PI);u>180&&(u-=360),u<-180&&(u+=360),this.drawAngleArc(t,r,s,h,c,u)}if(t.setLineDash([]),this.selected&&this.points.forEach(function(o){var n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.fillStyle=i.color,t.beginPath(),t.arc(r,s,4,0,2*Math.PI),t.fill()}}),this.text&&""!==this.text.trim()&&this.points.length>=2){var d=this.points[1],m=d.timestamp?e.timestampToIndex(d.timestamp):d.index;if(null!==m){var y=e.indexToX(m)+e.candleWidth/2,v=e.priceToY(d.price),b=this.textPosition||"above-center",x=this.textSize||12,g=this.textColor||"#ffffff",T=(r+y)/2,S=(s+v)/2,P=Math.atan2(v-s,y-r),w=15,k=T,M=S;if(b.includes("above")?(k=T+Math.sin(P)*w,M=S-Math.cos(P)*w):b.includes("below")?(k=T-Math.sin(P)*w,M=S+Math.cos(P)*w):"center"===b&&(k=T,M=S),b.includes("left")){var W=r+.25*(y-r),C=s+.25*(v-s);b.includes("above")?(k=W+Math.sin(P)*w,M=C-Math.cos(P)*w):b.includes("below")?(k=W-Math.sin(P)*w,M=C+Math.cos(P)*w):(k=W,M=C)}else if(b.includes("right")){var L=r+.75*(y-r),I=s+.75*(v-s);b.includes("above")?(k=L+Math.sin(P)*w,M=I-Math.cos(P)*w):b.includes("below")?(k=L-Math.sin(P)*w,M=I+Math.cos(P)*w):(k=L,M=I)}t.save(),t.translate(k,M);var A=P;(P>Math.PI/2||P<-Math.PI/2)&&(A=P+Math.PI),t.rotate(A),t.font="".concat(x,"px Arial, sans-serif"),t.fillStyle=g,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}},{key:"drawAngleArc",value:function(t,e,i,o,n,r){var s=o-e,l=n-i,a=Math.sqrt(s*s+l*l);if(!(a<40)){var h,c,f=Math.min(50,.3*a),p=Math.atan2(n-i,o-e);if(h=0,c=p,t.save(),t.strokeStyle=this.color,t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),Math.abs(c-h)>.01){var u=l<=0;t.arc(e,i,f,h,c,u)}t.stroke(),t.restore(),t.save(),t.strokeStyle=this.color,t.lineWidth=1,t.setLineDash([3,3]),t.globalAlpha=.5,t.beginPath(),t.moveTo(e,i),t.lineTo(e+f+20,i),t.stroke(),t.restore(),t.save(),t.font="12px Arial",t.fillStyle=this.color;var d,m,y="".concat(r.toFixed(2),"°"),v=t.measureText(y).width;l<=0?(d=e+f+30,m=i+12):(d=e+f+30,m=i-12),t.fillStyle="rgba(0, 0, 0, 0.7)",t.fillRect(d-v/2-4,m-8-2,v+8,20),t.fillStyle=this.color,t.textAlign="center",t.textBaseline="middle",t.fillText(y,d,m),t.restore()}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},4411:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="threedrives",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length?this.point6Confirmed?this.points.push(t):this.points[5]=t:7===this.points.length&&(this.points[6]=t)}},{key:"isComplete",value:function(){return 7===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<7)return null;var t=Math.abs(this.points[1].price-this.points[0].price),e=Math.abs(this.points[3].price-this.points[2].price),i=Math.abs(this.points[5].price-this.points[4].price),o=Math.abs(this.points[2].price-this.points[1].price),n=Math.abs(this.points[4].price-this.points[3].price),r=0!==t?e/t:0,s=0!==e?i/e:0,l=0!==t?o/t:0,a=0!==e?n/e:0,h=Math.max(0,100-Math.abs(r-1)/1*100),c=Math.max(0,100-Math.abs(s-1)/1*100),f=l>=.618&&l<=.786?100-Math.abs(l-.702)/.702*100:Math.max(0,100-Math.abs(l-.702)/.702*150),p=a>=.618&&a<=.786?100-Math.abs(a-.702)/.702*100:Math.max(0,100-Math.abs(a-.702)/.702*150),u=(2*h+2*c+f+p)/6;return{total:Math.round(u),drive2:Math.round(h),drive3:Math.round(c),corr1:Math.round(f),corr2:Math.round(p),drive2Ratio:r,drive3Ratio:s,corr1Ratio:l,corr2Ratio:a,drive1Value:t,drive2Value:e,drive3Value:i}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=[],o=0;o<this.points.length;o++){var n=this.points[o],r=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r){var s=e.indexToX(r)+e.candleWidth/2,l=e.priceToY(n.price);if(i.push({x:s,y:l,idx:r}),o>0){var a=this.points[o-1],h=a.timestamp?e.timestampToIndex(a.timestamp):a.index;if(null!==h){var c=e.indexToX(h)+e.candleWidth/2,f=e.priceToY(a.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(c,f),t.lineTo(s,l),t.stroke()}}}}if(this.points.length>=4){var p=this.points[1],u=this.points[3],d=p.timestamp?e.timestampToIndex(p.timestamp):p.index,m=u.timestamp?e.timestampToIndex(u.timestamp):u.index;if(null!==d&&null!==m){var y=e.indexToX(d)+e.candleWidth/2,v=e.priceToY(p.price),b=e.indexToX(m)+e.candleWidth/2,x=e.priceToY(u.price);t.setLineDash([5,5]),t.strokeStyle="rgba(128, 128, 128, 0.5)",t.lineWidth=1,t.beginPath(),t.moveTo(y,v),t.lineTo(b,x),t.stroke(),t.setLineDash([]);var g=Math.abs(this.points[1].price-this.points[0].price),T=Math.abs(this.points[3].price-this.points[2].price),S=0!==g?(T/g).toFixed(2):"0.00";t.fillStyle="#888888",t.font="12px Arial",t.textAlign="center",t.fillText(S,(y+b)/2,(v+x)/2-5)}}if(this.points.length>=6){var P=this.points[3],w=this.points[5],k=P.timestamp?e.timestampToIndex(P.timestamp):P.index,M=w.timestamp?e.timestampToIndex(w.timestamp):w.index;if(null!==k&&null!==M){var W=e.indexToX(k)+e.candleWidth/2,C=e.priceToY(P.price),L=e.indexToX(M)+e.candleWidth/2,I=e.priceToY(w.price);t.setLineDash([5,5]),t.strokeStyle="rgba(128, 128, 128, 0.5)",t.lineWidth=1,t.beginPath(),t.moveTo(W,C),t.lineTo(L,I),t.stroke(),t.setLineDash([]);var A=Math.abs(this.points[3].price-this.points[2].price),O=Math.abs(this.points[5].price-this.points[4].price),j=0!==A?(O/A).toFixed(2):"0.00";t.fillStyle="#888888",t.font="12px Arial",t.textAlign="center",t.fillText(j,(W+L)/2,(C+I)/2-5)}}if(7===this.points.length&&7===i.length){var D=Math.abs(this.points[1].price-this.points[0].price),B=Math.abs(this.points[3].price-this.points[2].price),X=Math.abs(this.points[2].price-this.points[1].price),E=Math.abs(this.points[4].price-this.points[3].price),Y=0!==D?(X/D*100).toFixed(1):"0",z=0!==B?(E/B*100).toFixed(1):"0";t.font="10px Arial",t.textAlign="center",t.textBaseline="middle";var R=(i[1].x+i[2].x)/2,F=(i[1].y+i[2].y)/2,N=Y>=61.8&&Y<=78.6;t.fillStyle=N?"rgba(38, 166, 154, 0.8)":"rgba(136, 136, 136, 0.6)",t.fillText("".concat(Y,"%"),R+15,F);var _=(i[3].x+i[4].x)/2,q=(i[3].y+i[4].y)/2,H=z>=61.8&&z<=78.6;t.fillStyle=H?"rgba(38, 166, 154, 0.8)":"rgba(136, 136, 136, 0.6)",t.fillText("".concat(z,"%"),_+15,q)}if(!1!==this.showProjections&&7===this.points.length&&7===i.length){var V=this.points[1].price>this.points[0].price,J=V?"↑ Bullish":"↓ Bearish",Z=V?"#26a69a":"#ef5350",U=i[0].x,Q=i[0].y;t.font="bold 11px Arial",t.textAlign="left",t.textBaseline="middle";var G="".concat(J," Three Drives"),K=t.measureText(G).width+12,$=U-K-15,tt=Q-25;t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect($,tt-10,K,20,3),t.fill(),t.fillStyle=Z,t.fillText(G,$+6,tt)}if(this.selected)for(var et=0;et<i.length;et++){var it=i[et];t.fillStyle=this.color,t.beginPath(),t.arc(it.x,it.y,4,0,2*Math.PI),t.fill()}if(this.text&&""!==this.text.trim()&&i.length>=2){for(var ot=this.textSize||12,nt=this.textColor||"#ffffff",rt=this.textPosition||"above-center",st=0,lt=0,at=0;at<i.length;at++)st+=i[at].x,lt+=i[at].y;var ht=st/i.length,ct=lt/i.length,ft=ht,pt=ct;rt.includes("above")?pt=ct-20:rt.includes("below")&&(pt=ct+20),rt.includes("left")?ft=ht-20:rt.includes("right")&&(ft=ht+20),t.font="".concat(ot,"px Arial, sans-serif"),t.fillStyle=nt,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,ft,pt)}}}},{key:"getQualityText",value:function(t){return t>=90?"(Excellent!)":t>=75?"(Good)":"(Weak)"}},{key:"getRatioIndicator",value:function(t){var e=Math.abs(t-1);return e<.05?"✓ Perfect":e<.15?"⚠ OK":"✗ Off"}},{key:"getCorrectionIndicator",value:function(t){return t>=.618&&t<=.786?"✓ Perfect":t>=.5&&t<=.9?"⚠ OK":"✗ Weak"}},{key:"getCorrectionColor",value:function(t){return t>=.618&&t<=.786?"#26a69a":t>=.5&&t<=.9?"#ffa726":"#888888"}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},4628:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="abcd",this.points=[],this.color="#2962ff",this.lineWidth=2},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length&&(this.points[3]=t)}},{key:"isComplete",value:function(){return 4===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=["A","B","C","D"],o=["#2962ff","#ff6b6b","#4caf50","#ffa500"],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke()}}}}if(4===this.points.length){var d=this.points[0],m=this.points[1],y=this.points[2],v=this.points[3],b=d.timestamp?e.timestampToIndex(d.timestamp):d.index,x=m.timestamp?e.timestampToIndex(m.timestamp):m.index,g=y.timestamp?e.timestampToIndex(y.timestamp):y.index,T=v.timestamp?e.timestampToIndex(v.timestamp):v.index;if(null!==b&&null!==x&&null!==g&&null!==T){var S=e.indexToX(b)+e.candleWidth/2,P=e.priceToY(d.price),w=e.indexToX(x)+e.candleWidth/2,k=e.priceToY(m.price),M=e.indexToX(g)+e.candleWidth/2,W=e.priceToY(y.price),C=e.indexToX(T)+e.candleWidth/2,L=e.priceToY(v.price);t.setLineDash([5,5]),t.strokeStyle="rgba(128, 128, 128, 0.5)",t.lineWidth=1,t.beginPath(),t.moveTo(S,P),t.lineTo(M,W),t.stroke(),t.beginPath(),t.moveTo(w,k),t.lineTo(C,L),t.stroke();var I=m.price-d.price,A=y.price-m.price,O=v.price-y.price,j=Math.abs(A/I).toFixed(3),D=Math.abs(O/I).toFixed(3);t.setLineDash([]),t.fillStyle="#888888",t.font="12px Arial",t.textAlign="left",t.fillText("".concat(j),(S+M)/2+10,(P+W)/2),t.fillText("".concat(D),(w+C)/2+10,(k+L)/2)}}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var B=0;B<n.length;B++){var X=n[B];this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(X.x,X.y,4,0,2*Math.PI),t.fill());var E=Math.round(X.x-10),Y=Math.round(X.y-15);t.beginPath(),t.arc(E,Y,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=o[B],t.lineWidth=1.5,t.stroke(),t.fillStyle=o[B],t.fillText(i[B],E,Y)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},4651:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pricelabel",this.points=[],this.textColor="#ffffff",this.textSize=14,this.backgroundColor="rgba(255, 152, 0, 0.85)",this.borderColor="#ff9800",this.padding=8,this.borderRadius=6,this.showPointer=!0,this.balloonOffsetX=50,this.balloonOffsetY=-50},e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);t.save(),t.font="bold ".concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="top";var s=e.formatPrice?e.formatPrice(i.price):i.price.toFixed(e.options.pricePrecision||5),l=t.measureText(s).width+2*this.padding,a=this.textSize+2*this.padding,h=n+this.balloonOffsetX,c=r+this.balloonOffsetY-a;if(this.showPointer){t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth||2,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(n,r);var f=h<n?h+l:h,p=c+a/2;t.lineTo(f,p),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.borderColor,t.beginPath(),t.arc(n,r,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(n,r,3,0,2*Math.PI),t.fill())}this.drawRoundedRect(t,h,c,l,a,this.borderRadius),t.fillStyle=this.backgroundColor,t.fill(),t.strokeStyle=this.borderColor,t.lineWidth=2,t.stroke(),t.fillStyle=this.textColor,t.fillText(s,h+this.padding,c+this.padding),t.restore()}}}},{key:"drawRoundedRect",value:function(t,e,i,o,n,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.quadraticCurveTo(e+o,i,e+o,i+r),t.lineTo(e+o,i+n-r),t.quadraticCurveTo(e+o,i+n,e+o-r,i+n),t.lineTo(e+r,i+n),t.quadraticCurveTo(e,i+n,e,i+n-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="bold ".concat(this.textSize,"px Arial, sans-serif");var a=i.formatPrice?i.formatPrice(o.price):o.price.toFixed(i.options.pricePrecision||5),h=l.measureText(a).width+2*this.padding,c=this.textSize+2*this.padding,f=r+this.balloonOffsetX,p=s+this.balloonOffsetY-c;return t>=f&&t<=f+h&&e>=p&&e<=p+c}},{key:"isClickOnAnchor",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price);return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-s,2))<=8}},{key:"isClickOnPointerLine",value:function(t,e,i){if(this.points.length<1||!this.showPointer)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="bold ".concat(this.textSize,"px Arial, sans-serif");var a=i.formatPrice?i.formatPrice(o.price):o.price.toFixed(i.options.pricePrecision||5),h=l.measureText(a).width+2*this.padding,c=this.textSize+2*this.padding,f=r+this.balloonOffsetX,p=(f<r?f+h:f)-r,u=s+this.balloonOffsetY-c+c/2-s,d=p*p+u*u;if(0===d)return!1;var m=((t-r)*p+(e-s)*u)/d,y=r+(m=Math.max(0,Math.min(1,m)))*p,v=s+m*u;return Math.sqrt(Math.pow(t-y,2)+Math.pow(e-v,2))<=6}}],i=[{key:"getSettingsConfig",value:function(){return{backgroundColor:{type:"color",label:"Background",category:"style"},borderColor:{type:"color",label:"Border",category:"style"},textColor:{type:"color",label:"Text",category:"style"},textSize:{type:"number",label:"Text Size",category:"style",min:10,max:24,step:1},lineWidth:{type:"number",label:"Line Width",category:"style",min:1,max:5,step:1},lineStyle:{type:"select",label:"Line Style",category:"style",options:[{value:"solid",label:"Solid"},{value:"dashed",label:"Dashed"}]}}}}],e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},4686:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="highlighterrectangle",this.points=[],this.color="#ffeb3b",this.lineWidth=0,this.opacity=.3},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price),c=a-s,f=h-l;if(t.globalAlpha=this.opacity||.3,t.fillStyle=this.color,t.fillRect(s,l,c,f),t.globalAlpha=1,this.lineWidth>0&&(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.strokeRect(s,l,c,f)),t.fillStyle=this.color,t.globalAlpha=.8,t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(s,h,4,0,2*Math.PI),t.fill(),t.globalAlpha=1,this.text&&""!==this.text.trim()){var p=this.textPosition||"center",u=this.textSize||12,d=this.textColor||"#000000",m=(l+h)/2,y=(s+a)/2,v=m;p.includes("above")?v=Math.min(l,h)-15:p.includes("below")?v=Math.max(l,h)+15:"center"===p&&(v=m),t.font="".concat(u,"px Arial, sans-serif"),t.fillStyle=d,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,y,v)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},4691:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibcircles",this.points=[],this.color="#00bcd4",this.lineWidth=1,this.lineStyle="solid",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this.showInfoBox=!0,this.levels=[.236,.382,.5,.618,.786,1,1.618,2.618],this.levelColors={.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0",1.618:"#ff9800",2.618:"#f44336"},this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0})}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#00bcd4",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.isLocked=e.isLocked||!1,i.tooltipMode=e.tooltipMode||"auto",i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.levels=e.levels||[.236,.382,.5,.618,.786,1,1.618,2.618],i.levelColors=e.levelColors||i.levelColors,i.visibleLevels=e.visibleLevels||i.visibleLevels,i.customLevels=e.customLevels,i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(o.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(n.price),f=h-l,p=c-a,u=Math.sqrt(f*f+p*p);t.lineWidth=this.lineWidth,this.visibleLevels||(this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0})),(this.customLevels||this.levels).forEach(function(e){if(!1!==i.visibleLevels[e]){var o=u*e,n=i.levelColors[e]||i.color;t.strokeStyle=n,t.globalAlpha=.6,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.arc(l,a,o,0,2*Math.PI),t.stroke();var r=(100*e).toFixed(1),s=l+o*Math.cos(Math.PI/4),h=a-o*Math.sin(Math.PI/4);t.font="bold 10px Arial, sans-serif",t.fillStyle=n,t.textAlign="left",t.textBaseline="middle",t.globalAlpha=1,t.fillText("".concat(r,"%"),s+5,h)}}),t.globalAlpha=1,t.setLineDash([]),t.strokeStyle=this.color,t.lineWidth=1,t.globalAlpha=.4,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.setLineDash([]),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.fillStyle=this.color,t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill(),t.strokeStyle=this.color,t.lineWidth=1,t.globalAlpha=.5,t.beginPath(),t.moveTo(l-10,a),t.lineTo(l+10,a),t.moveTo(l,a-10),t.lineTo(l,a+10),t.stroke(),t.globalAlpha=1)}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,isLocked:this.isLocked,tooltipMode:this.tooltipMode,showInfoBox:this.showInfoBox,levels:this.levels,levelColors:this.levelColors,visibleLevels:this.visibleLevels,customLevels:this.customLevels}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},5041:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pathcreator",this.points=[],this.color="#2962ff",this.lineWidth=2,this.isFinalized=!1},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){this.points.length>=1&&!this.isFinalized&&(1===this.points.length?this.points.push(t):this.points[this.points.length-1]=t)}},{key:"isComplete",value:function(){return this.isFinalized&&this.points.length>=2}},{key:"finalize",value:function(){this.isFinalized=!0}},{key:"render",value:function(t,e){if(!(this.points.length<2)){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.lineCap="round",t.lineJoin="round","dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath();for(var i=0;i<this.points.length;i++){var o=this.points[i],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);0===i?t.moveTo(r,s):t.lineTo(r,s)}}if(t.stroke(),t.setLineDash([]),this.selected){t.fillStyle=this.color;for(var l=0;l<this.points.length;l++){var a=this.points[l],h=a.timestamp?e.timestampToIndex(a.timestamp):a.index;if(null!==h){var c=e.indexToX(h)+e.candleWidth/2,f=e.priceToY(a.price);t.beginPath(),t.arc(c,f,4,0,2*Math.PI),t.fill()}}}if(this.text&&""!==this.text.trim()){var p=this.textPosition||"above-center",u=this.textSize||12,d=this.textColor||"#ffffff",m=Math.floor(this.points.length/2),y=this.points[m],v=y.timestamp?e.timestampToIndex(y.timestamp):y.index;if(null!==v){var b=e.indexToX(v)+e.candleWidth/2,x=e.priceToY(y.price),g=b,T=x-20;p.includes("below")&&(T=x+20),t.font="".concat(u,"px Arial, sans-serif"),t.fillStyle=d,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,g,T)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5042:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="parallelchannel",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto",this.fillOpacity=.1,this.point2Confirmed=!1,this.point3Confirmed=!1},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2!==this.points.length||this.point2Confirmed?2===this.points.length&&this.point2Confirmed?this.points.push(t):3===this.points.length&&(this.points[2]=t):this.points[1]=t}},{key:"isComplete",value:function(){return 3===this.points.length&&this.point3Confirmed}},{key:"finalize",value:function(t){if(3===this.points.length&&t){var e=this.points[0],i=this.points[1],o=this.points[2],n=e.timestamp?t.timestampToIndex(e.timestamp):e.index,r=i.timestamp?t.timestampToIndex(i.timestamp):i.index,s=o.timestamp?t.timestampToIndex(o.timestamp):o.index,l=t.indexToX(n)+t.candleWidth/2,a=t.priceToY(e.price),h=t.indexToX(r)+t.candleWidth/2,c=t.priceToY(i.price),f=t.indexToX(s)+t.candleWidth/2,p=t.priceToY(o.price),u=h-l,d=c-a,m=Math.sqrt(u*u+d*d);if(m>0){var y=-d/m,v=u/m,b=(f-l)*y+(p-a)*v,x=l+y*b,g=a+v*b,T=h+y*b,S=c+v*b,P=t.xToIndex(x),w=t.yToPrice(g),k=t.xToIndex(T),M=t.yToPrice(S);this.points[2]={index:P,price:w,timestamp:t.indexToTimestamp(P)};var W={index:k,price:M,timestamp:t.indexToTimestamp(k)};this.points.push(W)}}}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points.map(function(t){var i=t.timestamp?e.timestampToIndex(t.timestamp):t.index;return null===i?null:{x:e.indexToX(i)+e.candleWidth/2,y:e.priceToY(t.price)}});if(!o.some(function(t){return null===t})){if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),this.points.length>=3){var n,r,s,l;if(3===this.points.length){var a=o[1].x-o[0].x,h=o[1].y-o[0].y,c=Math.sqrt(a*a+h*h);if(c>0){var f=-h/c,p=a/c,u=(o[2].x-o[0].x)*f+(o[2].y-o[0].y)*p;n=o[0].x+f*u,r=o[0].y+p*u,s=o[1].x+f*u,l=o[1].y+p*u}}else 4===this.points.length&&(n=o[2].x,r=o[2].y,s=o[3].x,l=o[3].y);if(void 0!==n){t.globalAlpha=this.fillOpacity||.1,t.fillStyle=this.color,t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(s,l),t.lineTo(n,r),t.closePath(),t.fill(),t.globalAlpha=1;var d=(o[0].x+n)/2,m=(o[0].y+r)/2,y=(o[1].x+s)/2,v=(o[1].y+l)/2;t.save(),t.setLineDash([5,5]),t.strokeStyle=this.color,t.lineWidth=1,t.globalAlpha=.6,t.beginPath(),t.moveTo(d,m),t.lineTo(y,v),t.stroke(),t.globalAlpha=1,t.restore(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([])}}if(t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.stroke(),this.points.length>=3)if(3===this.points.length){var b=o[1].x-o[0].x,x=o[1].y-o[0].y,g=Math.sqrt(b*b+x*x);if(g>0){var T=-x/g,S=b/g,P=(o[2].x-o[0].x)*T+(o[2].y-o[0].y)*S,w=o[0].x+T*P,k=o[0].y+S*P,M=o[1].x+T*P,W=o[1].y+S*P;t.beginPath(),t.moveTo(w,k),t.lineTo(M,W),t.stroke(),t.save(),t.setLineDash([3,3]),t.globalAlpha=.3,t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(w,k),t.stroke(),t.beginPath(),t.moveTo(o[1].x,o[1].y),t.lineTo(M,W),t.stroke(),t.restore()}}else 4===this.points.length&&(t.beginPath(),t.moveTo(o[2].x,o[2].y),t.lineTo(o[3].x,o[3].y),t.stroke(),t.save(),t.setLineDash([3,3]),t.globalAlpha=.3,t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[2].x,o[2].y),t.stroke(),t.beginPath(),t.moveTo(o[1].x,o[1].y),t.lineTo(o[3].x,o[3].y),t.stroke(),t.restore());if(t.setLineDash([]),this.selected){if(3===this.points.length){t.fillStyle=this.color,t.beginPath(),t.arc(o[0].x,o[0].y,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(o[1].x,o[1].y,5,0,2*Math.PI),t.fill();var C=o[1].x-o[0].x,L=o[1].y-o[0].y,I=Math.sqrt(C*C+L*L);if(I>0){var A=-L/I,O=C/I,j=(o[2].x-o[0].x)*A+(o[2].y-o[0].y)*O,D=o[0].x+A*j,B=o[0].y+O*j,X=o[1].x+A*j,E=o[1].y+O*j;t.beginPath(),t.arc(D,B,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(X,E,5,0,2*Math.PI),t.fill()}}else 4===this.points.length?this.points.forEach(function(e,n){var r=o[n];r&&(t.fillStyle=i.color,t.beginPath(),t.arc(r.x,r.y,5,0,2*Math.PI),t.fill())}):this.points.forEach(function(e,n){var r=o[n];r&&(t.fillStyle=i.color,t.beginPath(),t.arc(r.x,r.y,5,0,2*Math.PI),t.fill())});if(4===this.points.length){var Y=(o[0].x+o[1].x)/2,z=(o[0].y+o[1].y)/2,R=(o[2].x+o[3].x)/2,F=(o[2].y+o[3].y)/2;t.fillStyle=this.color,t.strokeStyle="#fff",t.lineWidth=1,t.fillRect(Y-4,z-4,8,8),t.strokeRect(Y-4,z-4,8,8),t.fillRect(R-4,F-4,8,8),t.strokeRect(R-4,F-4,8,8)}}if(this.text&&""!==this.text.trim()&&this.points.length>=2){var N=this.textPosition||"above-center",_=this.textSize||12,q=this.textColor||"#ffffff",H=(o[0].x+o[1].x)/2,V=(o[0].y+o[1].y)/2,J=Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x),Z=15,U=H,Q=V;if(N.includes("above")?(U=H+Math.sin(J)*Z,Q=V-Math.cos(J)*Z):N.includes("below")?(U=H-Math.sin(J)*Z,Q=V+Math.cos(J)*Z):"center"===N&&(U=H,Q=V),N.includes("left")){var G=o[0].x+.25*(o[1].x-o[0].x),K=o[0].y+.25*(o[1].y-o[0].y);N.includes("above")?(U=G+Math.sin(J)*Z,Q=K-Math.cos(J)*Z):N.includes("below")?(U=G-Math.sin(J)*Z,Q=K+Math.cos(J)*Z):(U=G,Q=K)}else if(N.includes("right")){var $=o[0].x+.75*(o[1].x-o[0].x),tt=o[0].y+.75*(o[1].y-o[0].y);N.includes("above")?(U=$+Math.sin(J)*Z,Q=tt-Math.cos(J)*Z):N.includes("below")?(U=$-Math.sin(J)*Z,Q=tt+Math.cos(J)*Z):(U=$,Q=tt)}t.save(),t.translate(U,Q);var et=J;(J>Math.PI/2||J<-Math.PI/2)&&(et=J+Math.PI),t.rotate(et),t.font="".concat(_,"px Arial, sans-serif"),t.fillStyle=q,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5273:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>a});const a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="gannbox",this.points=[],this.color="#2962ff",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=11,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this.priceLevels=[0,.25,.5,.75,1],this.timeLevels=[0,.25,.5,.75,1],this.priceLevelColors={0:"#787b86",.25:"#f23645",.5:"#ff9800",.75:"#4caf50",1:"#2962ff"},this.timeLevelColors={0:"#787b86",.25:"#9c27b0",.5:"#ff9800",.75:"#00bcd4",1:"#2962ff"},this.diagonals=[{name:"1x1",ratio:1,color:"#4caf50",enabled:!0},{name:"1x2",ratio:.5,color:"#ff9800",enabled:!0},{name:"2x1",ratio:2,color:"#2196f3",enabled:!0},{name:"1x3",ratio:.333,color:"#9c27b0",enabled:!1},{name:"3x1",ratio:3,color:"#f44336",enabled:!1},{name:"1x4",ratio:.25,color:"#607d8b",enabled:!1},{name:"4x1",ratio:4,color:"#795548",enabled:!1}],this.showPriceLevels=!0,this.showTimeLevels=!0,this.showDiagonals=!0,this.showFanFromTopLeft=!0,this.showFanFromBottomRight=!0,this.showZoneFill=!0,this.showLabels=!0,this.visiblePriceLevels={0:!0,.25:!0,.5:!0,.75:!0,1:!0},this.visibleTimeLevels={0:!0,.25:!0,.5:!0,.75:!0,1:!0}}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#2962ff",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||11,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.tooltipMode=e.tooltipMode||"auto",e.priceLevels&&(i.priceLevels=e.priceLevels),e.timeLevels&&(i.timeLevels=e.timeLevels),e.priceLevelColors&&(i.priceLevelColors=e.priceLevelColors),e.timeLevelColors&&(i.timeLevelColors=e.timeLevelColors),e.diagonals&&(i.diagonals=e.diagonals),void 0!==e.showPriceLevels&&(i.showPriceLevels=e.showPriceLevels),void 0!==e.showTimeLevels&&(i.showTimeLevels=e.showTimeLevels),void 0!==e.showDiagonals&&(i.showDiagonals=e.showDiagonals),void 0!==e.showFanFromTopLeft&&(i.showFanFromTopLeft=e.showFanFromTopLeft),void 0!==e.showFanFromBottomRight&&(i.showFanFromBottomRight=e.showFanFromBottomRight),void 0!==e.showZoneFill&&(i.showZoneFill=e.showZoneFill),void 0!==e.showLabels&&(i.showLabels=e.showLabels),e.visiblePriceLevels&&(i.visiblePriceLevels=e.visiblePriceLevels),e.visibleTimeLevels&&(i.visibleTimeLevels=e.visibleTimeLevels),i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r){var s=e.indexToX(r)+e.candleWidth/2,l=e.priceToY(o.price);if(this.points.length<2)return t.fillStyle=this.color,t.beginPath(),t.arc(s,l,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(s,l,2,0,2*Math.PI),void t.fill();var a=this.points[1],h=a.timestamp?e.timestampToIndex(a.timestamp):a.index;if(null!==h){var c=e.indexToX(h)+e.candleWidth/2,f=e.priceToY(a.price),p=Math.min(s,c),u=Math.max(s,c),d=Math.min(l,f),m=Math.max(l,f),y=u-p,v=m-d,b=o.price,x=a.price-b;if("dashed"===this.lineStyle?t.setLineDash([5,5]):"dotted"===this.lineStyle?t.setLineDash([2,2]):t.setLineDash([]),this.showZoneFill&&this.showPriceLevels)for(var g=n(this.priceLevels).sort(function(t,e){return t-e}),T=0;T<g.length-1;T++){var S=g[T],P=g[T+1];if(!1!==this.visiblePriceLevels[S]&&!1!==this.visiblePriceLevels[P]){var w=l+(f-l)*S,k=l+(f-l)*P,M=this.priceLevelColors[S]||this.color,W=void 0,C=void 0,L=void 0;if(M.startsWith("rgba")||M.startsWith("rgb")){var I=M.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);I?(W=parseInt(I[1]),C=parseInt(I[2]),L=parseInt(I[3])):W=C=L=100}else{var A=M.replace("#","");W=parseInt(A.substr(0,2),16),C=parseInt(A.substr(2,2),16),L=parseInt(A.substr(4,2),16)}t.fillStyle="rgba(".concat(W,", ").concat(C,", ").concat(L,", 0.06)"),t.fillRect(s,w,c-s,k-w)}}if(this.showPriceLevels&&this.priceLevels.forEach(function(o){if(!1!==i.visiblePriceLevels[o]){var n=l+(f-l)*o,r=b+x*o,a=i.priceLevelColors[o]||i.color;if(t.strokeStyle=a,t.lineWidth=.5===o?i.lineWidth+.5:i.lineWidth,t.beginPath(),t.moveTo(s,n),t.lineTo(c,n),t.stroke(),i.showLabels){var h="".concat((100*o).toFixed(0),"%"),p=e.formatPrice?e.formatPrice(r):r.toFixed(2);t.font="10px Arial, sans-serif",t.fillStyle=a,t.textAlign="left",t.textBaseline="middle";var u="".concat(h," (").concat(p,")"),d=t.measureText(u).width;t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(c+4,n-7,d+6,14),t.fillStyle="#ffffff",t.fillText(u,c+7,n)}}}),this.showTimeLevels&&this.timeLevels.forEach(function(e){if(!1!==i.visibleTimeLevels[e]){var o=s+(c-s)*e,n=i.timeLevelColors[e]||i.color;if(t.strokeStyle=n,t.lineWidth=.5===e?i.lineWidth+.5:i.lineWidth,t.beginPath(),t.moveTo(o,l),t.lineTo(o,f),t.stroke(),i.showLabels){var r="".concat((100*e).toFixed(0),"%");t.font="10px Arial, sans-serif",t.textAlign="center",t.textBaseline="top";var a=t.measureText(r).width;t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(o-a/2-3,m+4,a+6,14),t.fillStyle="#ffffff",t.fillText(r,o,m+6)}}}),this.showDiagonals&&(t.setLineDash([]),this.diagonals.forEach(function(e){if(e.enabled){var o=e.ratio;if(t.strokeStyle=e.color,t.lineWidth="1x1"===e.name?i.lineWidth+.5:i.lineWidth,i.showFanFromTopLeft){var n,r,a=s,h=l;if(x>=0){var b=(c-s)*o*(v/y);Math.abs(b)<=v?(n=c,r=l-b*(x>=0?1:-1)):(r=f,n=s+v/(o*(v/y)))}else{var g=(c-s)*o*(v/y);Math.abs(g)<=v?(n=c,r=l+g):(r=f,n=s+v/(o*(v/y)))}if(n=Math.max(p,Math.min(u,n)),r=Math.max(d,Math.min(m,r)),t.beginPath(),t.moveTo(a,h),t.lineTo(n,r),t.stroke(),i.showLabels&&"1x1"===e.name){t.font="bold 9px Arial, sans-serif",t.fillStyle="rgba(0, 0, 0, 0.7)";var T=t.measureText(e.name).width;t.fillRect(a+8,h-6,T+4,12),t.fillStyle="#ffffff",t.textAlign="left",t.textBaseline="middle",t.fillText(e.name,a+10,h)}}if(i.showFanFromBottomRight){var S,P,w=c,k=f;if(x>=0){var M=(c-s)*o*(v/y);Math.abs(M)<=v?(S=s,P=f-M):(P=l,S=c-v/(o*(v/y)))}else{var W=(c-s)*o*(v/y);Math.abs(W)<=v?(S=s,P=f+W):(P=l,S=c-v/(o*(v/y)))}S=Math.max(p,Math.min(u,S)),P=Math.max(d,Math.min(m,P)),t.globalAlpha=.6,t.beginPath(),t.moveTo(w,k),t.lineTo(S,P),t.stroke(),t.globalAlpha=1}}})),t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([]),t.strokeRect(s,l,c-s,f-l),this.selected){var O=this.color;[{x:s,y:l},{x:c,y:f}].forEach(function(e){t.fillStyle=O,t.beginPath(),t.arc(e.x,e.y,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fill()}),[{x:(s+c)/2,y:l},{x:(s+c)/2,y:f},{x:s,y:(l+f)/2},{x:c,y:(l+f)/2}].forEach(function(e){t.fillStyle=O,t.beginPath(),t.arc(e.x,e.y,4,0,2*Math.PI),t.fill()})}if(this.text&&""!==this.text.trim()){var j=(s+c)/2,D=l-15;this.textPosition.includes("below")?D=f+15+this.textSize:"center"===this.textPosition&&(D=(l+f)/2),t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle";var B=t.measureText(this.text).width;t.fillStyle="rgba(0, 0, 0, 0.7)",t.fillRect(j-B/2-4,D-this.textSize/2-2,B+8,this.textSize+4),t.fillStyle=this.textColor,t.fillText(this.text,j,D)}t.setLineDash([])}}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,priceLevels:this.priceLevels,timeLevels:this.timeLevels,priceLevelColors:this.priceLevelColors,timeLevelColors:this.timeLevelColors,diagonals:this.diagonals,showPriceLevels:this.showPriceLevels,showTimeLevels:this.showTimeLevels,showDiagonals:this.showDiagonals,showFanFromTopLeft:this.showFanFromTopLeft,showFanFromBottomRight:this.showFanFromBottomRight,showZoneFill:this.showZoneFill,showLabels:this.showLabels,visiblePriceLevels:this.visiblePriceLevels,visibleTimeLevels:this.visibleTimeLevels,tooltipMode:this.tooltipMode}}}])&&s(e.prototype,i),o&&s(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},5298:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibtimezones",this.points=[],this.color="#9c27b0",this.lineWidth=1,this.tooltipMode="auto",this.timezones=[0,1,2,3,5,8,13,21,34,55,89],this.zoneColors={0:"#808080",1:"#ff6b6b",2:"#ffa500",3:"#ffd700",5:"#4caf50",8:"#2196f3",13:"#9c27b0",21:"#ff9800",34:"#f44336",55:"#e91e63",89:"#00bcd4"}},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.indexToX(s)+e.candleWidth/2,h=e.priceToY(o.price),c=s-r,f=r,p=e.canvas.height;this.visibleZones||(this.visibleZones={},this.timezones.forEach(function(t){i.visibleZones[t]=!0}));var u=this.customTimezones||this.timezones;if(t.font="11px Arial",t.textAlign="center",t.textBaseline="top",u.forEach(function(o){if(!1!==i.visibleZones[o]){var n,r=f+c*o,s=e.indexToX(r)+e.candleWidth/2;s<-100||s>e.width+100||(n=i.zoneColors[o]?i.zoneColors[o]:(i.color,i.color),"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.strokeStyle=n,t.lineWidth=i.lineWidth,t.beginPath(),t.moveTo(s,0),t.lineTo(s,p),t.stroke(),t.setLineDash([]),t.fillStyle=n,t.font="bold 12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("".concat(o),s,h))}}),this.selected&&(t.fillStyle=this.color,[o,n].forEach(function(i){var o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);t.beginPath(),t.arc(n,r,4,0,2*Math.PI),t.fill()}})),this.text&&""!==this.text.trim()){var d=this.textPosition||"above-center",m=this.textSize||12,y=this.textColor||"#ffffff",v=e.priceToY(o.price),b=e.priceToY(n.price),x=(l+a)/2,g=(v+b)/2,T=x,S=g;"center"===d?(T=x,S=g):d.includes("above")?S=Math.min(v,b)-15:d.includes("below")&&(S=Math.max(v,b)+20),d.includes("left")?T=Math.min(l,a)+20:d.includes("right")&&(T=Math.max(l,a)-20),t.font="".concat(m,"px Arial, sans-serif"),t.fillStyle=y,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,T,S)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5321:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var o=i(6745);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function l(t,e,i){return(e=h(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,h(o.key),o)}}function h(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function c(t,e,i){return e=p(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,i||[],p(t).constructor):e.apply(t,i))}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(f=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}const d=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=c(this,e,[t,!1])).type="shortposition",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),i=e,r=[{key:"fromJSON",value:function(t){var e=o.A.fromJSON(s(s({},t),{},{isLong:!1}));return e.type="shortposition",e}}],(n=null)&&a(i.prototype,n),r&&a(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n,r}(o.A)},5461:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="rectangle",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price),c=a-s,f=h-l;if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.rect(s,l,c,f),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(s,h,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var p=this.textPosition||"above-center",u=this.textSize||12,d=this.textColor||"#ffffff",m=(l+h)/2,y=(s+a)/2,v=m;p.includes("above")?v=Math.min(l,h)-15:p.includes("below")?v=Math.max(l,h)+15:"center"===p&&(v=m),t.font="".concat(u,"px Arial, sans-serif"),t.fillStyle=d,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,y,v)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5817:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibchannel",this.points=[],this.color="#9c27b0",this.lineWidth=1,this.tooltipMode="auto",this.point2Confirmed=!1,this.point3Confirmed=!1,this.levels=[0,.236,.382,.5,.618,.786,1],this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"}},e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2!==this.points.length||this.point2Confirmed?2===this.points.length&&this.point2Confirmed?this.points.push(t):3===this.points.length&&(this.points[2]=t):this.points[1]=t}},{key:"isComplete",value:function(){return 3===this.points.length&&this.point3Confirmed||4===this.points.length}},{key:"finalize",value:function(t){if(3===this.points.length&&t){var e=this.points[0],i=this.points[1],o=this.points[2],n=e.timestamp?t.timestampToIndex(e.timestamp):e.index,r=i.timestamp?t.timestampToIndex(i.timestamp):i.index,s=o.timestamp?t.timestampToIndex(o.timestamp):o.index,l=t.indexToX(n)+t.candleWidth/2,a=t.priceToY(e.price),h=t.indexToX(r)+t.candleWidth/2,c=t.priceToY(i.price),f=t.indexToX(s)+t.candleWidth/2,p=t.priceToY(o.price),u=h-l,d=c-a,m=Math.sqrt(u*u+d*d);if(m>0){var y=-d/m,v=u/m,b=(f-l)*y+(p-a)*v,x=l+y*b,g=a+v*b,T=h+y*b,S=c+v*b,P=t.xToIndex(x),w=t.yToPrice(g),k=t.xToIndex(T),M=t.yToPrice(S);this.points[2]={index:P,price:w,timestamp:t.indexToTimestamp(P)};var W={index:k,price:M,timestamp:t.indexToTimestamp(k)};this.points.push(W)}}}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points.map(function(t){var i=t.timestamp?e.timestampToIndex(t.timestamp):t.index;return null===i?null:{x:e.indexToX(i)+e.candleWidth/2,y:e.priceToY(t.price)}});if(!o.some(function(t){return null===t})){if(this.points[0],this.points[1],t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.stroke(),this.points.length>=3){var n,r,s,l;if(3===this.points.length){this.points[2];var a=o[1].x-o[0].x,h=o[1].y-o[0].y,c=Math.sqrt(a*a+h*h);if(c>0){var f=-h/c,p=a/c,u=(o[2].x-o[0].x)*f+(o[2].y-o[0].y)*p;n=o[0].x+f*u,r=o[0].y+p*u,s=o[1].x+f*u,l=o[1].y+p*u}}else 4===this.points.length&&(n=o[2].x,r=o[2].y,s=o[3].x,l=o[3].y);if(void 0!==n&&void 0!==r&&void 0!==s&&void 0!==l){t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(n,r),t.lineTo(s,l),t.stroke(),this.levelColors||(this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"});var d=this.customLevels||this.levels;this.visibleLevels||(this.visibleLevels={},d.forEach(function(t){i.visibleLevels[t]=!0})),t.font="11px Arial",t.textAlign="left",d.forEach(function(a,h){if(!1!==i.visibleLevels[a]){var c,f=a,p=o[0].x+(n-o[0].x)*f,u=o[0].y+(r-o[0].y)*f,m=o[1].x+(s-o[1].x)*f,y=o[1].y+(l-o[1].y)*f;c=i.levelColors[a]?i.levelColors[a]:(i.color,i.color);for(var v=null,b=h+1;b<d.length;b++)if(!1!==i.visibleLevels[d[b]]){v=d[b];break}if(v){var x,g,T,S=v,P=o[0].x+(n-o[0].x)*S,w=o[0].y+(r-o[0].y)*S,k=o[1].x+(s-o[1].x)*S,M=o[1].y+(l-o[1].y)*S;if(c.startsWith("rgba")||c.startsWith("rgb")){var W=c.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);W?(x=parseInt(W[1]),g=parseInt(W[2]),T=parseInt(W[3])):x=g=T=0}else{var C=c.replace("#","");x=parseInt(C.substr(0,2),16),g=parseInt(C.substr(2,2),16),T=parseInt(C.substr(4,2),16)}t.fillStyle="rgba(".concat(x,", ").concat(g,", ").concat(T,", 0.08)"),t.beginPath(),t.moveTo(p,u),t.lineTo(m,y),t.lineTo(k,M),t.lineTo(P,w),t.closePath(),t.fill()}t.strokeStyle=c,t.lineWidth=i.lineWidth,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(m,y),t.stroke();var L=p+.15*(m-p),I=u+.15*(y-u),A=e.yToPrice(u),O=m-p,j=y-u,D=Math.atan2(j,O),B=D;(D>Math.PI/2||D<-Math.PI/2)&&(B=D+Math.PI),t.save(),t.translate(L,I),t.rotate(B),t.fillStyle=c,t.textAlign="left",t.textBaseline="bottom",t.font="bold 11px Arial";var X=e.formatPrice?e.formatPrice(A):A.toFixed(4);t.fillText("".concat(a.toFixed(3)," (").concat(X,")"),3,-2),t.restore()}}),this.point3Confirmed||(t.save(),t.setLineDash([3,3]),t.globalAlpha=.3,t.strokeStyle=this.color,t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(n,r),t.stroke(),t.beginPath(),t.moveTo(o[1].x,o[1].y),t.lineTo(s,l),t.stroke(),t.restore())}}if(t.setLineDash([]),this.selected){var m=this.color;if(m&&m.startsWith("rgba")){var y=m.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);y&&(m="rgb(".concat(y[1],", ").concat(y[2],", ").concat(y[3],")"))}if(4===this.points.length)for(var v=0;v<3;v++){var b=o[v];b&&(t.fillStyle=m,t.beginPath(),t.arc(b.x,b.y,6,0,2*Math.PI),t.fill())}else if(3===this.points.length){var x=o[1].x-o[0].x,g=o[1].y-o[0].y,T=Math.sqrt(x*x+g*g);if(T>0){var S=-g/T,P=x/T,w=(o[2].x-o[0].x)*S+(o[2].y-o[0].y)*P,k=o[0].x+S*w,M=o[0].y+P*w,W=o[1].x+S*w,C=o[1].y+P*w;t.fillStyle=m,t.beginPath(),t.arc(o[0].x,o[0].y,6,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(o[1].x,o[1].y,6,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(k,M,6,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(W,C,6,0,2*Math.PI),t.fill()}}else this.points.forEach(function(e,i){var n=o[i];n&&(t.fillStyle=m,t.beginPath(),t.arc(n.x,n.y,6,0,2*Math.PI),t.fill())})}if(this.text&&""!==this.text.trim()&&this.points.length>=2){var L=this.textPosition||"above-center",I=this.textSize||12,A=this.textColor||"#ffffff",O=(o[0].x+o[1].x)/2,j=(o[0].y+o[1].y)/2,D=Math.atan2(o[1].y-o[0].y,o[1].x-o[0].x),B=20,X=O,E=j;if(L.includes("above")?(X=O+Math.sin(D)*B,E=j-Math.cos(D)*B):L.includes("below")?(X=O-Math.sin(D)*B,E=j+Math.cos(D)*B):"center"===L&&(X=O,E=j),L.includes("left")){var Y=o[0].x+.25*(o[1].x-o[0].x),z=o[0].y+.25*(o[1].y-o[0].y);L.includes("above")?(X=Y+Math.sin(D)*B,E=z-Math.cos(D)*B):L.includes("below")?(X=Y-Math.sin(D)*B,E=z+Math.cos(D)*B):(X=Y,E=z)}else if(L.includes("right")){var R=o[0].x+.75*(o[1].x-o[0].x),F=o[0].y+.75*(o[1].y-o[0].y);L.includes("above")?(X=R+Math.sin(D)*B,E=F-Math.cos(D)*B):L.includes("below")?(X=R-Math.sin(D)*B,E=F+Math.cos(D)*B):(X=R,E=F)}t.save(),t.translate(X,E);var N=D;(D>Math.PI/2||D<-Math.PI/2)&&(N=D+Math.PI),t.rotate(N),t.font="".concat(I,"px Arial, sans-serif"),t.fillStyle=A,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,0,0),t.restore()}}}}}],e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5843:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="butterfly",this.points=[],this.color="#00ff00",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length&&(this.points[4]=t)}},{key:"isComplete",value:function(){return 5===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<5)return null;var t=Math.abs(this.points[1].price-this.points[0].price),e=Math.abs(this.points[2].price-this.points[0].price),i=Math.abs(this.points[2].price-this.points[1].price),o=Math.abs(this.points[3].price-this.points[1].price),n=Math.abs(this.points[4].price-this.points[2].price),r=Math.abs(this.points[4].price-this.points[0].price),s=0!==t?e/t:0,l=0!==i?o/i:0,a=0!==t?n/t:0,h=0!==t?r/t:0,c=Math.max(0,100-Math.abs(s-.786)/.786*100),f=Math.max(0,100-Math.abs(l-.618)/.618*100),p=Math.max(0,100-Math.abs(a-1.618)/1.618*100),u=Math.max(0,100-Math.abs(h-1.272)/1.272*100),d=(c+f+p+2*u)/5;return{total:Math.round(d),xb:Math.round(c),ac:Math.round(f),bd:Math.round(p),xd:Math.round(u)}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i="#4caf50",o="#ffa500",n="#9c27b0",r=["X","A","B","C","D"],s=["#2962ff","#ff6b6b",i,o,n],l=[],a=0;a<this.points.length;a++){var h=this.points[a],c=h.timestamp?e.timestampToIndex(h.timestamp):h.index;if(null!==c){var f=e.indexToX(c)+e.candleWidth/2,p=e.priceToY(h.price);if(l.push({x:f,y:p,idx:c}),a>0){var u=this.points[a-1],d=u.timestamp?e.timestampToIndex(u.timestamp):u.index;if(null!==d){var m=e.indexToX(d)+e.candleWidth/2,y=e.priceToY(u.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(m,y),t.lineTo(f,p),t.stroke(),t.setLineDash([])}}}}if(!1!==this.showProjections&&this.points.length>=2){if(l.length>=3){var v=Math.abs(this.points[1].price-this.points[0].price),b=Math.abs(this.points[2].price-this.points[0].price),x=0!==v?(b/v*100).toFixed(1)+"%":"0%";t.strokeStyle=i,t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l[0].x,l[0].y),t.lineTo(l[2].x,l[2].y),t.stroke(),t.setLineDash([]);var g=(l[0].x+l[2].x)/2,T=(l[0].y+l[2].y)/2;t.fillStyle=i,t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(x,g-15,T)}if(l.length>=4){var S=Math.abs(this.points[2].price-this.points[1].price),P=Math.abs(this.points[3].price-this.points[1].price),w=0!==S?(P/S*100).toFixed(1)+"%":"0%";t.strokeStyle=o,t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l[1].x,l[1].y),t.lineTo(l[3].x,l[3].y),t.stroke(),t.setLineDash([]);var k=(l[1].x+l[3].x)/2,M=(l[1].y+l[3].y)/2;t.fillStyle=o,t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(w,k+15,M)}if(l.length>=5){var W=Math.abs(this.points[1].price-this.points[0].price),C=Math.abs(this.points[4].price-this.points[2].price),L=0!==W?(C/W*100).toFixed(1)+"%":"0%";t.strokeStyle=n,t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l[2].x,l[2].y),t.lineTo(l[4].x,l[4].y),t.stroke(),t.setLineDash([]);var I=(l[2].x+l[4].x)/2,A=(l[2].y+l[4].y)/2;t.fillStyle=n,t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(L,I-15,A)}if(l.length>=5){var O=Math.abs(this.points[1].price-this.points[0].price),j=Math.abs(this.points[4].price-this.points[0].price),D=0!==O?(j/O*100).toFixed(1)+"%":"0%";t.strokeStyle="#ff00ff",t.lineWidth=1.5,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l[0].x,l[0].y),t.lineTo(l[4].x,l[4].y),t.stroke(),t.setLineDash([]);var B=(l[0].x+l[4].x)/2,X=(l[0].y+l[4].y)/2;t.fillStyle="#ff00ff",t.font="bold 12px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText(D,B+15,X)}}if(this.selected)for(var E=0;E<l.length;E++){var Y=l[E];t.fillStyle=this.color,t.beginPath(),t.arc(Y.x,Y.y,4,0,2*Math.PI),t.fill()}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var z=0;z<l.length;z++){var R=l[z],F=Math.round(R.x-10),N=Math.round(R.y-15);t.beginPath(),t.arc(F,N,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=s[z],t.lineWidth=1.5,t.stroke(),t.fillStyle=s[z],t.fillText(r[z],F,N)}if(this.text&&""!==this.text.trim()&&l.length>=2){for(var _=this.textSize||12,q=this.textColor||"#ffffff",H=this.textPosition||"above-center",V=0,J=0,Z=0;Z<l.length;Z++)V+=l[Z].x,J+=l[Z].y;var U=V/l.length,Q=J/l.length,G=U,K=Q;H.includes("above")?K=Q-20:H.includes("below")&&(K=Q+20),H.includes("left")?G=U-20:H.includes("right")&&(G=U+20),t.font="".concat(_,"px Arial, sans-serif"),t.fillStyle=q,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,G,K)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},5878:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="equidistantchannel",this.points=[],this.color="#00bcd4",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#00bcd4",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=h-l,m=c-a,y=Math.sqrt(d*d+m*m),v=Math.abs(m*p-d*u+h*a-c*l)/y,b=d*(u-a)-m*(p-l)>0?1:-1,x=-m/y*v*b,g=d/y*v*b,T=100,S=l-d*T,P=a-m*T,w=h+d*T,k=c+m*T;if(t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(S,P),t.lineTo(w,k),t.stroke(),t.lineWidth=this.lineWidth,t.globalAlpha=.8,t.beginPath(),t.moveTo(S+x,P+g),t.lineTo(w+x,k+g),t.stroke(),t.beginPath(),t.moveTo(S-x,P-g),t.lineTo(w-x,k-g),t.stroke(),t.globalAlpha=1,t.globalAlpha=.3,t.setLineDash([3,3]),t.beginPath(),t.moveTo(l+x,a+g),t.lineTo(l-x,a-g),t.stroke(),t.beginPath(),t.moveTo(h+x,c+g),t.lineTo(h-x,c-g),t.stroke(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var M=(l+h)/2,W=(a+c)/2-20;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,M,W)}}else t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill();t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},6237:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="daterange",this.points=[],this.color="#2962ff",this.lineWidth=2,this.fillOpacity=.3},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.indexToX(r)+e.candleWidth/2,a=Math.min(s,l),h=Math.max(s,l),c=h-a,f=e.canvas.height;if(t.globalAlpha=this.fillOpacity||.2,t.fillStyle=this.color,t.fillRect(a,0,c,f),t.globalAlpha=1,t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(a,0),t.lineTo(a,f),t.stroke(),t.beginPath(),t.moveTo(h,0),t.lineTo(h,f),t.stroke(),t.setLineDash([]),this.selected){t.fillStyle=this.color;var p=f/2;t.beginPath(),t.arc(a,p,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,p,4,0,2*Math.PI),t.fill()}if(this.text&&""!==this.text.trim()){var u=this.textPosition||"center",d=(a+h)/2,m=f/2;u.includes("above")?m=labelY+30:u.includes("below")&&(m=f-30),t.font="".concat(textSize+2,"px Arial, sans-serif"),t.fillStyle=textColor,t.textAlign="center",t.textBaseline="middle";var y=t.measureText(this.text).width;t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(d-y/2-5,m-(textSize+2)/2-3,y+10,textSize+2+6),t.fillStyle=textColor,t.fillText(this.text,d,m)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},6483:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="wxyxz",this.points=[],this.color="#2962ff",this.lineWidth=2,this.accuracyBadgeBounds=null},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length?this.point6Confirmed?this.points.push(t):this.points[5]=t:7===this.points.length?this.point7Confirmed?this.points.push(t):this.points[6]=t:8===this.points.length?this.point8Confirmed?this.points.push(t):this.points[7]=t:9===this.points.length?this.point9Confirmed?this.points.push(t):this.points[8]=t:10===this.points.length&&(this.points[9]=t)}},{key:"isComplete",value:function(){return 10===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<10)return null;var t,e,i,o,n=Math.abs(this.points[2].price-this.points[0].price),r=Math.abs(this.points[4].price-this.points[2].price),s=Math.abs(this.points[6].price-this.points[4].price),l=Math.abs(this.points[8].price-this.points[6].price),a=Math.abs(this.points[9].price-this.points[8].price),h=0!==n?r/n:0,c=0!==n?s/n:0,f=0!==n?l/n:0,p=0!==s?a/s:0;if(h>=.5&&h<=.786)t=100-Math.abs(h-.618)/.618*100;else{var u=h<.5?.5-h:h-.786;t=Math.max(0,100-u/.618*150)}if(c>=.618&&c<=1.618)e=100-Math.abs(c-1)/1*100;else{var d=c<.618?.618-c:c-1.618;e=Math.max(0,100-d/1*120)}if(f>=.5&&f<=.786)i=100-Math.abs(f-.618)/.618*100;else{var m=f<.5?.5-f:f-.786;i=Math.max(0,100-m/.618*150)}if(p>=.5&&p<=1)o=100-Math.abs(p-.75)/.75*50;else{var y=p<.5?.5-p:p-1;o=Math.max(0,100-y/.5*120)}var v=.2*t+.3*e+.2*i+.3*o,b=this.points[2].price<this.points[0].price;return{total:Math.round(v),accuracyX1:Math.round(t),accuracyY:Math.round(e),accuracyX2:Math.round(i),accuracyZ:Math.round(o),ratioX1toW:h,ratioYtoW:c,ratioX2toW:f,ratioZtoY:p,totalWaveW:n,totalWaveX1:r,totalWaveY:s,totalWaveX2:l,totalWaveZ:a,isUptrend:b}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"isHoveringBadge",value:function(t,e){if(!this.accuracyBadgeBounds)return!1;var i=this.accuracyBadgeBounds;return t>=i.x-20&&t<=i.x+i.width+20&&e>=i.y-20&&e<=i.y+i.height+20}},{key:"getQualityText",value:function(t){return t>=90?"Excellent":t>=75?"Good":t>=60?"Fair":"Weak"}},{key:"getWaveIndicator",value:function(t,e,i){var o=(100*t).toFixed(1);return t>=e&&t<=i?{text:"✓ ".concat(o,"%"),color:"#26a69a"}:{text:"✗ ".concat(o,"%"),color:"#ef5350"}}},{key:"drawHoverTooltip",value:function(t,e,i,o,n){var r,s=10,l=this.getWaveIndicator(i.ratioX1toW,.5,.786),a=this.getWaveIndicator(i.ratioYtoW,.618,1.618),h=this.getWaveIndicator(i.ratioX2toW,.5,.786),c=this.getWaveIndicator(i.ratioZtoY,.5,1),f=[{text:"Wave Structure",style:"header"},{text:"W Wave: ".concat(i.totalWaveW.toFixed(2)),style:"normal"},{text:"X1 Wave: ".concat(l.text," (Should be 50-78.6% of W)"),style:"validation",color:l.color},{text:"Y Wave: ".concat(a.text," (Should be 61.8-161.8% of W)"),style:"validation",color:a.color},{text:"X2 Wave: ".concat(h.text," (Should be 50-78.6% of W)"),style:"validation",color:h.color},{text:"Z Wave: ".concat(c.text," (Should be 50-100% of Y)"),style:"validation",color:c.color},{text:"",style:"spacer"},{text:"Accuracy: ".concat(i.total,"% (").concat(this.getQualityText(i.total),")"),style:"accuracy",color:this.getAccuracyColor(i.total)}],p=18*f.length+20,u=e.canvas.height,d=o+10;r=u-n<p+50?n-p-15:n+40,d+240>e.canvas.width-10&&(d=o-240-10),r<10&&(r=10),t.save(),t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=10,t.shadowOffsetX=0,t.shadowOffsetY=2,t.fillStyle="rgba(30, 30, 30, 0.95)",t.beginPath(),t.roundRect(d,r,240,p,6),t.fill(),t.restore(),t.textAlign="left",t.textBaseline="top";var m=r+s;f.forEach(function(e){if("spacer"!==e.style){if("header"===e.style)t.font="bold 12px Arial",t.fillStyle="#ffffff",t.fillText(e.text,d+s,m);else if("validation"===e.style){t.font="11px Arial";var i=e.text.split(" "),o=i[0],n=i.slice(1).join(" ");t.fillStyle=e.color,t.fillText(o,d+s,m);var r=t.measureText(o+" ").width;t.fillStyle="#b8bcc5",t.fillText(n,d+s+r,m)}else if("accuracy"===e.style){t.font="bold 11px Arial";var l=e.text.split(": ");t.fillStyle="#b8bcc5",t.fillText(l[0]+": ",d+s,m);var a=t.measureText(l[0]+": ").width;t.fillStyle=e.color,t.fillText(l[1],d+s+a,m)}else t.font="11px Arial",t.fillStyle="#b8bcc5",t.fillText(e.text,d+s,m);m+=18}else m+=18*.3})}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=[null,"W",null,"X",null,"Y",null,"X",null,"Z"],o=[null,"#2962ff",null,"#ff6b6b",null,"#4caf50",null,"#ff9800",null,"#9c27b0"],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke(),t.setLineDash([])}}}}if(this.points.length>=3){var d,m,y,v=this.color||"#2962ff",b=1;if(v.startsWith("#"))d=parseInt(v.slice(1,3),16),m=parseInt(v.slice(3,5),16),y=parseInt(v.slice(5,7),16);else if(v.startsWith("rgb")){var x=v.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);x&&(d=parseInt(x[1]),m=parseInt(x[2]),y=parseInt(x[3]),b=x[4]?parseFloat(x[4]):1)}var g=Math.min(.1*b,.1),T="rgba(".concat(d,", ").concat(m,", ").concat(y,", ").concat(g,")");t.fillStyle=T,n.length>=3&&(t.beginPath(),t.moveTo(n[0].x,n[0].y),t.lineTo(n[1].x,n[1].y),t.lineTo(n[2].x,n[2].y),t.closePath(),t.fill()),n.length>=7&&(t.beginPath(),t.moveTo(n[4].x,n[4].y),t.lineTo(n[5].x,n[5].y),t.lineTo(n[6].x,n[6].y),t.closePath(),t.fill()),n.length>=10&&(t.beginPath(),t.moveTo(n[8].x,n[8].y),t.lineTo(n[9].x,n[9].y),t.lineTo(n[8].x,n[9].y),t.closePath(),t.fill())}if(!1!==this.showProjections&&this.points.length>=3){var S=this.points.length>=3?Math.abs(this.points[2].price-this.points[0].price):0,P=this.points.length>=5?Math.abs(this.points[4].price-this.points[2].price):0,w=this.points.length>=7?Math.abs(this.points[6].price-this.points[4].price):0,k=this.points.length>=9?Math.abs(this.points[8].price-this.points[6].price):0,M=this.points.length>=10?Math.abs(this.points[9].price-this.points[8].price):0;if(t.font="10px Arial",t.textAlign="center",t.textBaseline="middle",n.length>=3){var W=(n[0].x+n[2].x)/2,C=(n[0].y+n[2].y)/2;t.fillStyle="rgba(41, 98, 255, 0.9)",t.fillText("W (Corrective)",W-20,C)}if(n.length>=5){var L=(n[2].x+n[4].x)/2,I=(n[2].y+n[4].y)/2,A=0!==S?(P/S*100).toFixed(1):"0.0",O=A>=50&&A<=78.6;t.fillStyle=O?"rgba(255, 107, 107, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("X1 (".concat(A,"%)"),L+20,I),t.strokeStyle="rgba(255, 107, 107, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[2].x,n[2].y),t.lineTo(n[4].x,n[4].y),t.stroke(),t.setLineDash([]);var j=0!==S?(P/S).toFixed(2):"0.00",D=j>=.5&&j<=.786,B="".concat(j," → ").concat("0.62");t.font="bold 11px Arial",t.fillStyle=D?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(B,L,I-10)}if(n.length>=7){var X=(n[4].x+n[6].x)/2,E=(n[4].y+n[6].y)/2,Y=0!==S?(w/S*100).toFixed(1):"0.0",z=Y>=61.8&&Y<=161.8;t.fillStyle=z?"rgba(76, 175, 80, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("Y (".concat(Y,"%)"),X-20,E),t.strokeStyle="rgba(76, 175, 80, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[4].x,n[4].y),t.lineTo(n[6].x,n[6].y),t.stroke(),t.setLineDash([]);var R=0!==S?(w/S).toFixed(2):"0.00",F=R>=.618&&R<=1.618,N="".concat(R," → ").concat("1.00");t.font="bold 11px Arial",t.fillStyle=F?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(N,X,E-10)}if(n.length>=9){var _=(n[6].x+n[8].x)/2,q=(n[6].y+n[8].y)/2,H=0!==S?(k/S*100).toFixed(1):"0.0",V=H>=50&&H<=78.6;t.fillStyle=V?"rgba(255, 152, 0, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("X2 (".concat(H,"%)"),_+20,q),t.strokeStyle="rgba(255, 152, 0, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[6].x,n[6].y),t.lineTo(n[8].x,n[8].y),t.stroke(),t.setLineDash([]);var J=0!==S?(k/S).toFixed(2):"0.00",Z=J>=.5&&J<=.786,U="".concat(J," → ").concat("0.62");t.font="bold 11px Arial",t.fillStyle=Z?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(U,_,q-10)}if(n.length>=10){var Q=(n[8].x+n[9].x)/2,G=(n[8].y+n[9].y)/2,K=0!==w?(M/w*100).toFixed(1):"0.0",$=K>=50&&K<=100;t.fillStyle=$?"rgba(156, 39, 176, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("Z (".concat(K,"%)"),Q-20,G),t.strokeStyle="rgba(156, 39, 176, 0.6)",t.lineWidth=1,t.setLineDash([3,3]),t.beginPath(),t.moveTo(n[8].x,n[8].y),t.lineTo(n[9].x,n[9].y),t.stroke(),t.setLineDash([]);var tt=0!==w?(M/w).toFixed(2):"0.00",et=tt>=.5&&tt<=1,it="".concat(tt," → ").concat("0.75");t.font="bold 11px Arial",t.fillStyle=et?"rgba(76, 175, 80, 0.95)":"rgba(239, 83, 80, 0.95)",t.fillText(it,Q,G-10)}}if(!1!==this.showProjections&&10===this.points.length&&10===n.length){var ot=this.calculateAccuracy();if(ot){var nt=ot.isUptrend?"↑ Bullish":"↓ Bearish",rt=ot.isUptrend?"#26a69a":"#ef5350",st=n[0].x,lt=n[0].y;t.font="bold 11px Arial",t.textAlign="left",t.textBaseline="middle";var at="".concat(nt," Triple Combo (WXYXZ)"),ht=t.measureText(at).width+12,ct=st-ht-15,ft=lt-25;t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect(ct,ft-10,ht,20,3),t.fill(),t.fillStyle=rt,t.fillText(at,ct+6,ft);var pt=n[9],ut=pt.x+15,dt=pt.y,mt=this.getAccuracyColor(ot.total),yt="Accuracy: ".concat(ot.total,"%");t.font="12px Arial",t.textAlign="left",t.textBaseline="middle";var vt=t.measureText(yt).width+10;t.fillStyle="rgba(0, 0, 0, 0.8)",t.beginPath(),t.roundRect(ut-5,dt-12,vt+10,24,4),t.fill(),t.fillStyle=mt,t.fillRect(ut-5,dt-12,3,24),t.font="12px Arial",t.fillStyle="#b8bcc5";var bt="Accuracy: ";t.fillText(bt,ut+3,dt);var xt=t.measureText(bt).width;t.fillStyle=mt,t.fillText("".concat(ot.total,"%"),ut+3+xt,dt)}}if(this.selected)for(var gt=0;gt<n.length;gt++){var Tt=n[gt];t.fillStyle=this.color,t.beginPath(),t.arc(Tt.x,Tt.y,4,0,2*Math.PI),t.fill()}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var St=0;St<n.length;St++)if(i[St]){var Pt=n[St],wt=Math.round(Pt.x-10),kt=Math.round(Pt.y-15);t.beginPath(),t.arc(wt,kt,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=o[St],t.lineWidth=1.5,t.stroke(),t.fillStyle=o[St],t.fillText(i[St],wt,kt)}if(this.text&&""!==this.text.trim()&&n.length>=2){for(var Mt=this.textSize||12,Wt=this.textColor||"#ffffff",Ct=this.textPosition||"above-center",Lt=0,It=0,At=0;At<n.length;At++)Lt+=n[At].x,It+=n[At].y;var Ot=Lt/n.length,jt=It/n.length,Dt=Ot,Bt=jt;Ct.includes("above")?Bt=jt-20:Ct.includes("below")&&(Bt=jt+20),Ct.includes("left")?Dt=Ot-20:Ct.includes("right")&&(Dt=Ot+20),t.font="".concat(Mt,"px Arial, sans-serif"),t.fillStyle=Wt,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,Dt,Bt)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},6638:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="circle",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=e.indexToX(n)+e.candleWidth/2,l=e.priceToY(i.price),a=e.indexToX(r)+e.candleWidth/2,h=e.priceToY(o.price),c=Math.sqrt(Math.pow(a-s,2)+Math.pow(h-l,2));if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.arc(s,l,c,0,2*Math.PI),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(s,l,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var f=this.textPosition||"above-center",p=this.textSize||12,u=this.textColor||"#ffffff",d=s,m=l-c-15;f.includes("below")?m=l+c+15:"center"===f&&(m=l),t.font="".concat(p,"px Arial, sans-serif"),t.fillStyle=u,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,d,m)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},6745:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){s(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function l(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,a(o.key),o)}}function a(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.d(e,{A:()=>h});const h=function(){function t(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type=i?"longposition":"shortposition",this.isLong=i,this.points=[],this.profitColor="#26a69a",this.lossColor="#ef5350",this.entryColor="#2962ff",this.lineWidth=1,this.lineStyle="solid",this.showLabels=!0,this.showPercentages=!0,this.showRiskReward=!0,this.showPips=!0,this.fillOpacity=.15,this.extendLines=!1,this.riskRewardRatio=2,this.stopLossOffset=null,this.textSize=11,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this.quantity=1,this.pipValue=1e-4}return e=t,o=[{key:"fromJSON",value:function(e){var i,o=new t(e.id,!1!==e.isLong);return o.type=e.type||(e.isLong?"longposition":"shortposition"),o.points=e.points||[],o.profitColor=e.profitColor||"#26a69a",o.lossColor=e.lossColor||"#ef5350",o.entryColor=e.entryColor||"#2962ff",o.lineWidth=e.lineWidth||1,o.lineStyle=e.lineStyle||"solid",o.showLabels=!1!==e.showLabels,o.showPercentages=!1!==e.showPercentages,o.showRiskReward=!1!==e.showRiskReward,o.showPips=!1!==e.showPips,o.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:.15,o.extendLines=e.extendLines||!1,o.riskRewardRatio=e.riskRewardRatio||2,o.textSize=e.textSize||11,o.textColor=e.textColor||"#ffffff",o.isLocked=e.isLocked||!1,o.quantity=e.quantity||1,o.pipValue=e.pipValue||1e-4,o}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){if(this.points.length>=1){var e=this.points[0].price,i=1e-4;t.price>e?(this.isLong=!0,this.type="longposition"):t.price<e&&(this.isLong=!1,this.type="shortposition");var o=t.price;o=this.isLong?Math.max(e+i,t.price):Math.min(e-i,t.price);var n=r(r({},t),{},{price:o});1===this.points.length?this.points.push(n):2===this.points.length&&(this.points[1]=n)}}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"getMetrics",value:function(){if(this.points.length<2)return null;var t=this.points[0].price,e=this.points[1].price,i=e-t,o=Math.abs(i),n=o/this.riskRewardRatio,r=this.isLong?t-n:t+n,s=(e-t)/t*100,l=(r-t)/t*100,a=Math.abs(e-t)/this.pipValue,h=Math.abs(r-t)/this.pipValue;return{entryPrice:t,targetPrice:e,stopPrice:r,reward:o,risk:n,riskRewardRatio:this.riskRewardRatio,targetPercent:s,stopPercent:l,targetPips:a,stopPips:h,isValidTrade:this.isLong?e>t:e<t}}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);if(this.points.length<2)this._drawEntryPreview(t,e,n,r);else{var s=this.points[1],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=this.getMetrics();if(h){var c=e.priceToY(h.targetPrice),f=e.priceToY(h.stopPrice),p=Math.min(n,a),u=Math.max(n,a),d=e.chartX||0,m=(e.chartX||0)+(e.chartWidth||e.canvas.width),y=this.extendLines?d:p,v=this.extendLines?m:u,b=v-y;"dashed"===this.lineStyle?t.setLineDash([5,5]):"dotted"===this.lineStyle?t.setLineDash([2,2]):t.setLineDash([]),this._drawZone(t,y,b,r,c,this.profitColor),this._drawZone(t,y,b,r,f,this.lossColor),this._drawLine(t,y,v,r,this.entryColor,this.lineWidth+.5),this._drawLine(t,y,v,c,this.profitColor,this.lineWidth),this._drawLine(t,y,v,f,this.lossColor,this.lineWidth),t.setLineDash([]),this.showLabels&&this._drawLabels(t,e,h,u,r,c,f),this.showRiskReward&&this._drawRiskRewardBox(t,e,h,p,r,c,f),this.selected&&this._drawControlPoints(t,p,u,r,c,f)}}}}}}},{key:"_drawEntryPreview",value:function(t,e,i,o){var n=e.chartX||0,r=n+(e.chartWidth||e.canvas.width);t.strokeStyle=this.entryColor,t.lineWidth=this.lineWidth,t.setLineDash([5,5]),t.beginPath(),t.moveTo(n,o),t.lineTo(r,o),t.stroke(),t.setLineDash([]),t.fillStyle=this.entryColor,t.beginPath(),t.arc(i,o,5,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(i,o,2,0,2*Math.PI),t.fill()}},{key:"_drawZone",value:function(t,e,i,o,n,r){var s=Math.min(o,n),l=Math.abs(n-o);t.globalAlpha=this.fillOpacity,t.fillStyle=r,t.fillRect(e,s,i,l),t.globalAlpha=1}},{key:"_drawLine",value:function(t,e,i,o,n,r){t.strokeStyle=n,t.lineWidth=r,t.beginPath(),t.moveTo(e,o),t.lineTo(i,o),t.stroke()}},{key:"_drawLabels",value:function(t,e,i,o,n,r,s){var l=o+8,a=this.textSize;t.font="".concat(a,"px Arial, sans-serif"),t.textBaseline="middle",t.textAlign="left";var h=e.formatPrice?function(t){return e.formatPrice(t)}:function(t){return t.toFixed(2)};this._drawLabel(t,l,n,"Entry: ".concat(h(i.entryPrice)),this.entryColor);var c="Target: ".concat(h(i.targetPrice));this.showPercentages&&(c+=" (".concat(i.targetPercent>=0?"+":"").concat(i.targetPercent.toFixed(2),"%)")),this._drawLabel(t,l,r,c,this.profitColor);var f="Stop: ".concat(h(i.stopPrice));this.showPercentages&&(f+=" (".concat(i.stopPercent>=0?"+":"").concat(i.stopPercent.toFixed(2),"%)")),this._drawLabel(t,l,s,f,this.lossColor)}},{key:"_drawLabel",value:function(t,e,i,o,n){var r=t.measureText(o).width,s=this.textSize;t.fillStyle=n,t.beginPath(),t.roundRect(e-2,i-s/2-4,r+8+4,s+8,3),t.fill(),t.fillStyle=this.textColor,t.fillText(o,e+4,i)}},{key:"_drawRiskRewardBox",value:function(t,e,i,o,n,r,s){var l=o-8,a=e.formatPrice?function(t){return e.formatPrice(t)}:function(t){return t.toFixed(2)};t.textAlign="right",t.textBaseline="middle";var h=(r+n)/2;t.font="bold 11px Arial, sans-serif",t.fillStyle=this.profitColor,t.fillText("".concat(i.riskRewardRatio.toFixed(1),"R"),l,h-8),t.font="10px Arial, sans-serif",t.fillText("+".concat(a(i.reward)),l,h+8);var c=(s+n)/2;t.font="bold 11px Arial, sans-serif",t.fillStyle=this.lossColor,t.fillText("1R",l,c-8),t.font="10px Arial, sans-serif",t.fillText("-".concat(a(i.risk)),l,c+8)}},{key:"_drawControlPoints",value:function(t,e,i,o,n,r){[{x:e,y:o,color:this.entryColor},{x:i,y:o,color:this.entryColor},{x:(e+i)/2,y:n,color:this.profitColor},{x:(e+i)/2,y:r,color:this.lossColor}].forEach(function(e){t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fill()})}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,isLong:this.isLong,points:this.points,profitColor:this.profitColor,lossColor:this.lossColor,entryColor:this.entryColor,lineWidth:this.lineWidth,lineStyle:this.lineStyle,showLabels:this.showLabels,showPercentages:this.showPercentages,showRiskReward:this.showRiskReward,showPips:this.showPips,fillOpacity:this.fillOpacity,extendLines:this.extendLines,riskRewardRatio:this.riskRewardRatio,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,quantity:this.quantity,pipValue:this.pipValue}}}])&&l(e.prototype,i),o&&l(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},6890:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pitchfork",this.points=[],this.color="#2962ff",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#2962ff",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=(s+f)/2,m=(o.price+n.price)/2,y=e.indexToX(d)+e.candleWidth/2,v=e.priceToY(m),b=(e.chartX,e.chartWidth||e.canvas.width,y-l),x=v-a,g=100,T=l+b*g,S=a+x*g;t.strokeStyle=this.color,t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(l,a),t.lineTo(T,S),t.stroke(),t.lineWidth=this.lineWidth,t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.beginPath(),t.moveTo(h,c),t.lineTo(p,u),t.stroke(),t.beginPath(),t.moveTo(p,u),t.lineTo(l,a),t.stroke(),t.globalAlpha=.7;var P=b,w=x,k=h+P*g,M=c+w*g;t.beginPath(),t.moveTo(h,c),t.lineTo(k,M),t.stroke();var W=p+P*g,C=u+w*g;if(t.beginPath(),t.moveTo(p,u),t.lineTo(W,C),t.stroke(),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var L=l,I=a-15;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,L,I)}}else t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill();t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},6943:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="highlighter",this.points=[],this.color="#ffeb3b",this.lineWidth=18,this.opacity=.4},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){this.points.push(t)}},{key:"isComplete",value:function(){return this.points.length>=2}},{key:"render",value:function(t,e){if(!(this.points.length<2)){t.globalAlpha=this.opacity||.4,t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.lineCap="round",t.lineJoin="round","dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath();var i,o=this.points[0];if(o.timestamp){var n=e.timestampToIndex(o.timestamp);if(null===n)return void(t.globalAlpha=1);i=n+(o.indexOffset||0)}else i=o.index;var r=e.indexToX(i)+e.candleWidth/2,s=e.priceToY(o.price);t.moveTo(r,s);for(var l=1;l<this.points.length;l++){var a=this.points[l],h=void 0;if(a.timestamp){var c=e.timestampToIndex(a.timestamp);if(null===c)continue;h=c+(a.indexOffset||0)}else h=a.index;var f=e.indexToX(h)+e.candleWidth/2,p=e.priceToY(a.price);t.lineTo(f,p)}if(t.stroke(),t.setLineDash([]),t.globalAlpha=1,this.text&&""!==this.text.trim()){var u,d=this.textPosition||"above-center",m=this.textSize||12,y=this.textColor||"#000000",v=Math.floor(this.points.length/2),b=this.points[v];if(b.timestamp){var x=e.timestampToIndex(b.timestamp);if(null===x)return;u=x+(b.indexOffset||0)}else u=b.index;var g=e.indexToX(u)+e.candleWidth/2,T=e.priceToY(b.price),S=g,P=T-20;d.includes("below")&&(P=T+20),t.font="".concat(m,"px Arial, sans-serif"),t.fillStyle=y,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,S,P)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},7184:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="regressiontrend",this.points=[],this.color="#2962ff",this.lineWidth=2,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.showChannels=!0,this.deviations=2}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#2962ff",i.lineWidth=e.lineWidth||2,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.showChannels=void 0===e.showChannels||e.showChannels,i.deviations=e.deviations||2,i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"calculateRegression",value:function(t,e,i){for(var o=[],n=[],r=Math.min(e,i),s=Math.max(e,i),l=r;l<=s;l++)l>=0&&l<t.data.length&&(o.push(t.data[l].close),n.push(l-r));if(o.length<2)return null;for(var a=o.length,h=n.reduce(function(t,e){return t+e},0)/a,c=o.reduce(function(t,e){return t+e},0)/a,f=0,p=0,u=0;u<a;u++)f+=(n[u]-h)*(o[u]-c),p+=Math.pow(n[u]-h,2);for(var d=f/p,m=c-d*h,y=0,v=0,b=0;b<a;b++){var x=d*n[b]+m;v+=Math.pow(o[b]-x,2),y+=Math.pow(o[b]-c,2)}return{slope:d,intercept:m,rSquared:1-v/y,stdDev:Math.sqrt(v/a),minIdx:r,n:a}}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=i.timestamp?e.timestampToIndex(i.timestamp):i.index,r=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n&&null!==r){var s=this.calculateRegression(e,n,r);if(s){var l=s.slope,a=s.intercept,h=(s.rSquared,s.stdDev),c=s.minIdx,f=s.n,p=e.indexToX(c)+e.candleWidth/2,u=e.indexToX(c+f-1)+e.candleWidth/2,d=a,m=l*(f-1)+a,y=e.priceToY(d),v=e.priceToY(m);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(p,y),t.lineTo(u,v),t.stroke(),this.showChannels){t.globalAlpha=.5,t.setLineDash([3,3]);var b=d+h*this.deviations,x=m+h*this.deviations,g=e.priceToY(b),T=e.priceToY(x);t.beginPath(),t.moveTo(p,g),t.lineTo(u,T),t.stroke();var S=d-h*this.deviations,P=m-h*this.deviations,w=e.priceToY(S),k=e.priceToY(P);t.beginPath(),t.moveTo(p,w),t.lineTo(u,k),t.stroke(),t.globalAlpha=1,t.setLineDash([])}var M=Math.max(c,Math.min(n,c+f-1)),W=Math.max(c,Math.min(r,c+f-1)),C=e.indexToX(M)+e.candleWidth/2,L=e.indexToX(W)+e.candleWidth/2,I=l*(M-c)+a,A=l*(W-c)+a,O=e.priceToY(I),j=e.priceToY(A);if(t.fillStyle=this.color,t.beginPath(),t.arc(C,O,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(C,O,2.5,0,2*Math.PI),t.fill(),t.fillStyle=this.color,t.beginPath(),t.arc(L,j,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(L,j,2.5,0,2*Math.PI),t.fill(),this.text&&""!==this.text.trim()){var D=(p+u)/2,B=Math.min(y,v)-15;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,D,B)}t.setLineDash([])}}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,showChannels:this.showChannels,deviations:this.deviations}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},7222:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="gartley",this.points=[],this.color="#9c27b0",this.lineWidth=2},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length&&(this.points[4]=t)}},{key:"isComplete",value:function(){return 5===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){for(var i=["#2196f3","#4caf50","#ff9800","#f44336","#9c27b0"],o=["X","A","B","C","D"],n=[],r=0;r<this.points.length;r++){var s=this.points[r],l=s.timestamp?e.timestampToIndex(s.timestamp):s.index;if(null!==l){var a=e.indexToX(l)+e.candleWidth/2,h=e.priceToY(s.price);if(n.push({x:a,y:h,idx:l}),r>0){var c=this.points[r-1],f=c.timestamp?e.timestampToIndex(c.timestamp):c.index;if(null!==f){var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(c.price);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([]),t.beginPath(),t.moveTo(p,u),t.lineTo(a,h),t.stroke()}}this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(a,h,4,0,2*Math.PI),t.fill())}}if(5===this.points.length){var d=this.points[0],m=this.points[1],y=this.points[2],v=this.points[3],b=this.points[4],x=d.timestamp?e.timestampToIndex(d.timestamp):d.index,g=m.timestamp?e.timestampToIndex(m.timestamp):m.index,T=y.timestamp?e.timestampToIndex(y.timestamp):y.index,S=v.timestamp?e.timestampToIndex(v.timestamp):v.index,P=b.timestamp?e.timestampToIndex(b.timestamp):b.index;if(null!==x&&null!==g&&null!==T&&null!==S&&null!==P){var w,k,M,W=e.indexToX(x)+e.candleWidth/2,C=e.priceToY(d.price),L=e.indexToX(g)+e.candleWidth/2,I=e.priceToY(m.price),A=e.indexToX(T)+e.candleWidth/2,O=e.priceToY(y.price),j=e.indexToX(S)+e.candleWidth/2,D=e.priceToY(v.price),B=e.indexToX(P)+e.candleWidth/2,X=e.priceToY(b.price),E=this.color,Y=1;if(E.startsWith("#"))w=parseInt(E.slice(1,3),16),k=parseInt(E.slice(3,5),16),M=parseInt(E.slice(5,7),16);else if(E.startsWith("rgb")){var z=E.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);z&&(w=parseInt(z[1]),k=parseInt(z[2]),M=parseInt(z[3]),Y=z[4]?parseFloat(z[4]):1)}var R=Math.min(.5*Y,.5);E=void 0!==w&&void 0!==k&&void 0!==M?"rgba(".concat(w,", ").concat(k,", ").concat(M,", ").concat(R,")"):"rgba(156, 39, 176, 0.5)",t.fillStyle=E,t.beginPath(),t.moveTo(W,C),t.lineTo(L,I),t.lineTo(A,O),t.closePath(),t.fill(),t.fillStyle=E,t.beginPath(),t.moveTo(A,O),t.lineTo(j,D),t.lineTo(B,X),t.closePath(),t.fill(),t.setLineDash([5,5]),t.strokeStyle="rgba(128, 128, 128, 0.5)",t.lineWidth=1,t.beginPath(),t.moveTo(W,C),t.lineTo(A,O),t.stroke(),t.beginPath(),t.moveTo(L,I),t.lineTo(j,D),t.stroke(),t.beginPath(),t.moveTo(A,O),t.lineTo(B,X),t.stroke(),t.beginPath(),t.moveTo(W,C),t.lineTo(B,X),t.stroke();var F=m.price-d.price,N=y.price-m.price,_=v.price-y.price,q=b.price-v.price,H=b.price-m.price,V=Math.abs(N/F).toFixed(3),J=Math.abs(_/N).toFixed(3),Z=Math.abs(q/F).toFixed(3),U=Math.abs(H/F).toFixed(3);t.setLineDash([]),t.fillStyle="#888888",t.font="12px Arial",t.textAlign="left",t.fillText("".concat(V),(W+A)/2+10,(C+O)/2),t.fillText("".concat(J),(L+j)/2+10,(I+D)/2),t.fillText("".concat(Z),(A+B)/2+10,(O+X)/2),t.fillText("".concat(U),(W+B)/2+10,(C+X)/2)}}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var Q=0;Q<n.length;Q++){var G=n[Q];this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(G.x,G.y,4,0,2*Math.PI),t.fill());var K=Math.round(G.x-10),$=Math.round(G.y-15);t.beginPath(),t.arc(K,$,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=i[Q],t.lineWidth=1.5,t.stroke(),t.fillStyle=i[Q],t.fillText(o[Q],K,$)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},7335:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pricezone",this.points=[],this.color="#9c27b0",this.backgroundColor="#9c27b0",this.fillOpacity=.1,this.lineWidth=1,this.lineStyle="solid",this.showLabels=!0,this.showBarCount=!0,this.showPriceRange=!0,this.showProjection=!1,this.projectionOffset=0,this.textSize=11,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.tooltipMode="auto",this._patternBars=null,this._patternHigh=null,this._patternLow=null}return e=t,o=[{key:"fromJSON",value:function(e){var i,o=new t(e.id);return o.points=e.points||[],o.color=e.color||"#9c27b0",o.backgroundColor=e.backgroundColor||"#9c27b0",o.fillOpacity=null!==(i=e.fillOpacity)&&void 0!==i?i:.1,o.lineWidth=e.lineWidth||1,o.lineStyle=e.lineStyle||"solid",o.showLabels=!1!==e.showLabels,o.showBarCount=!1!==e.showBarCount,o.showPriceRange=!1!==e.showPriceRange,o.textSize=e.textSize||11,o.textColor=e.textColor||"#ffffff",o.isLocked=e.isLocked||!1,o}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"getMetrics",value:function(t){if(this.points.length<2)return null;var e=this.points[0],i=this.points[1],o=e.timestamp?t.timestampToIndex(e.timestamp):e.index,n=i.timestamp?t.timestampToIndex(i.timestamp):i.index;if(null===o||null===n)return null;for(var r=Math.min(o,n),s=Math.max(o,n),l=Math.abs(s-r)+1,a=-1/0,h=1/0,c=t.data||[],f=Math.floor(r);f<=Math.ceil(s)&&f<c.length;f++)if(f>=0&&c[f]){var p=c[f];p.high>a&&(a=p.high),p.low<h&&(h=p.low)}return a===-1/0&&(a=Math.max(e.price,i.price),h=Math.min(e.price,i.price)),{startIdx:r,endIdx:s,barCount:l,patternHigh:a,patternLow:h,priceRange:a-h,priceChangePercent:(a-h)/h*100}}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o);if(this.points.length<2)this._drawPreview(t,e,n);else{var r=this.points[1],s=r.timestamp?e.timestampToIndex(r.timestamp):r.index;if(null!==s){var l=e.indexToX(s)+e.candleWidth,a=this.getMetrics(e);if(a){var h=Math.min(n,l),c=Math.max(n,l),f=c-h,p=e.priceToY(a.patternHigh),u=e.priceToY(a.patternLow),d=u-p;"dashed"===this.lineStyle?t.setLineDash([5,5]):"dotted"===this.lineStyle?t.setLineDash([2,2]):t.setLineDash([]),t.globalAlpha=this.fillOpacity,t.fillStyle=this.backgroundColor,t.fillRect(h,p,f,d),t.globalAlpha=1,t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.strokeRect(h,p,f,d),t.setLineDash([]),this.showLabels&&this._drawLabels(t,e,a,h,c,p,u),this.showProjection&&this._drawProjection(t,e,a,c,p,d,f),this.selected&&this._drawControlPoints(t,h,c,p,u)}}}}}}},{key:"_drawPreview",value:function(t,e,i){var o=e.chartY||0,n=o+(e.chartHeight||e.canvas.height);t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([5,5]),t.beginPath(),t.moveTo(i,o),t.lineTo(i,n),t.stroke(),t.setLineDash([]),t.fillStyle=this.color,t.beginPath(),t.arc(i,(o+n)/2,5,0,2*Math.PI),t.fill()}},{key:"_drawLabels",value:function(t,e,i,o,n,r,s){var l=(o+n)/2;t.textAlign="center",t.textBaseline="middle";var a=e.formatPrice?function(t){return e.formatPrice(t)}:function(t){return t.toFixed(2)};if(this.showBarCount){var h="".concat(i.barCount," bars");t.font="bold ".concat(this.textSize,"px Arial, sans-serif");var c=t.measureText(h).width,f=r-12;t.fillStyle=this.color,t.beginPath(),t.roundRect(l-c/2-6,f-8,c+12,16,3),t.fill(),t.fillStyle=this.textColor,t.fillText(h,l,f)}if(this.showPriceRange){var p=a(i.priceRange),u="".concat(i.priceChangePercent.toFixed(2),"%");t.font="".concat(this.textSize-1,"px Arial, sans-serif"),t.textAlign="left";var d=n+8,m=(r+s)/2;t.fillStyle=this.color,t.fillText(p,d,m-7),t.fillText(u,d,m+7)}}},{key:"_drawProjection",value:function(t,e,i,o,n,r,s){var l=o+this.projectionOffset*e.candleWidth;t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([3,3]),t.globalAlpha=.5,t.strokeRect(l,n,s,r),t.globalAlpha=.1,t.fillStyle=this.color,t.fillRect(l,n,s,r),t.globalAlpha=1,t.setLineDash([])}},{key:"_drawControlPoints",value:function(t,e,i,o,n){var r=this;[{x:e,y:o},{x:i,y:o},{x:i,y:n},{x:e,y:n},{x:(e+i)/2,y:o},{x:(e+i)/2,y:n}].forEach(function(e){t.fillStyle=r.color,t.beginPath(),t.arc(e.x,e.y,4,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(e.x,e.y,1.5,0,2*Math.PI),t.fill()})}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,backgroundColor:this.backgroundColor,fillOpacity:this.fillOpacity,lineWidth:this.lineWidth,lineStyle:this.lineStyle,showLabels:this.showLabels,showBarCount:this.showBarCount,showPriceRange:this.showPriceRange,showProjection:this.showProjection,projectionOffset:this.projectionOffset,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},7387:(t,e,i)=>{i.r(e),i.d(e,{default:()=>d});var o=i(6745);function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,o)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function l(t,e,i){return(e=h(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,h(o.key),o)}}function h(t){var e=function(t,e){if("object"!=n(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var o=i.call(t,e||"default");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(e)?e:e+""}function c(t,e,i){return e=p(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,i||[],p(t).constructor):e.apply(t,i))}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(f=function(){return!!t})()}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}const d=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=c(this,e,[t,!0])).type="longposition",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(e,t),i=e,r=[{key:"fromJSON",value:function(t){var e=o.A.fromJSON(s(s({},t),{},{isLong:!0}));return e.type="longposition",e}}],(n=null)&&a(i.prototype,n),r&&a(i,r),Object.defineProperty(i,"prototype",{writable:!1}),i;var i,n,r}(o.A)},8063:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibfan",this.points=[],this.color="#00bcd4",this.lineWidth=1,this.tooltipMode="auto",this.levels=[.236,.382,.5,.618,.786,1],this.levelColors={.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0"}},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length&&(this.points[1]=t)}},{key:"isComplete",value:function(){return 2===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<2)){var o=this.points[0],n=this.points[1],r=o.timestamp?e.timestampToIndex(o.timestamp):o.index,s=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(o.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(n.price),f=h-l,p=c-a,u=f>0?e.canvas.width:0;this.visibleLevels||(this.visibleLevels={},this.levels.forEach(function(t){i.visibleLevels[t]=!0}));var d=this.customLevels||this.levels;if(t.font="11px Arial",t.textAlign="left",t.textBaseline="middle",d.forEach(function(e){if(!1!==i.visibleLevels[e]){var o=p*e/f,n=u,r=a+o*(u-l),s=h,c=a+o*(h-l),d=i.levelColors[e]||"#00bcd4";"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.strokeStyle=d,t.lineWidth=i.lineWidth||2,t.beginPath(),t.moveTo(l,a),t.lineTo(n,r),t.stroke(),t.setLineDash([]),t.fillStyle=d,t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle",t.fillText("".concat((100*e).toFixed(1),"%"),s,c)}}),this.selected&&(t.fillStyle=this.color,[o,n].forEach(function(i){var o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);t.beginPath(),t.arc(n,r,4,0,2*Math.PI),t.fill()}})),this.text&&""!==this.text.trim()){var m=this.textPosition||"above-center",y=this.textSize||12,v=this.textColor||"#ffffff",b=(l+h)/2,x=(a+c)/2,g=b,T=x;"center"===m?(g=b,T=x):m.includes("above")?T=Math.min(a,c)-15:m.includes("below")&&(T=Math.max(a,c)+20),m.includes("left")?g=Math.min(l,h)+20:m.includes("right")&&(g=Math.max(l,h)-20),t.font="".concat(y,"px Arial, sans-serif"),t.fillStyle=v,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,g,T)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},8505:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="pitchforkmodified",this.points=[],this.color="#ff5722",this.lineWidth=1,this.lineStyle="solid",this.text="",this.textPosition="above-center",this.textSize=12,this.textColor="#ffffff",this.selected=!1,this.isLocked=!1,this.point2Confirmed=!1,this.showInfoBox=!0,this.tooltipMode="auto"}return e=t,o=[{key:"fromJSON",value:function(e){var i=new t(e.id);return i.points=e.points||[],i.color=e.color||"#ff5722",i.lineWidth=e.lineWidth||1,i.lineStyle=e.lineStyle||"solid",i.text=e.text||"",i.textPosition=e.textPosition||"above-center",i.textSize=e.textSize||12,i.textColor=e.textColor||"#ffffff",i.isLocked=e.isLocked||!1,i.point2Confirmed=e.point2Confirmed||!1,i.showInfoBox=void 0===e.showInfoBox||e.showInfoBox,i.tooltipMode=e.tooltipMode||"auto",i}}],(i=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=3===this.points.length?this.points[2]:null,r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l=e.indexToX(r)+e.candleWidth/2,a=e.priceToY(i.price),h=e.indexToX(s)+e.candleWidth/2,c=e.priceToY(o.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),n){var f=n.timestamp?e.timestampToIndex(n.timestamp):n.index;if(null===f)return;var p=e.indexToX(f)+e.candleWidth/2,u=e.priceToY(n.price),d=r+(s-r)/2,m=d+(f-d)/2,y=i.price+(o.price-i.price)/2,v=e.indexToX(m)+e.candleWidth/2,b=e.priceToY(y),x=(s+f)/2,g=(o.price+n.price)/2,T=e.indexToX(x)+e.candleWidth/2-v,S=e.priceToY(g)-b,P=100,w=v+T*P,k=b+S*P;t.strokeStyle=this.color,t.lineWidth=this.lineWidth+1,t.beginPath(),t.moveTo(v,b),t.lineTo(w,k),t.stroke(),t.lineWidth=this.lineWidth,t.globalAlpha=.5,t.setLineDash([3,3]),t.beginPath(),t.moveTo(v,b),t.lineTo(l,a),t.stroke(),"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.globalAlpha=1,t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.beginPath(),t.moveTo(h,c),t.lineTo(p,u),t.stroke(),t.beginPath(),t.moveTo(p,u),t.lineTo(l,a),t.stroke(),t.globalAlpha=.7;var M=h+T*P,W=c+S*P;t.beginPath(),t.moveTo(h,c),t.lineTo(M,W),t.stroke();var C=p+T*P,L=u+S*P;if(t.beginPath(),t.moveTo(p,u),t.lineTo(C,L),t.stroke(),t.globalAlpha=1,this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(l,a,5,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(p,u,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var I=l,A=a-15;t.font="".concat(this.textSize,"px Arial, sans-serif"),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="bottom",t.fillText(this.text,I,A)}}else t.beginPath(),t.moveTo(l,a),t.lineTo(h,c),t.stroke(),t.fillStyle=this.color,t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill();t.setLineDash([])}}}},{key:"toJSON",value:function(){return{id:this.id,type:this.type,points:this.points,color:this.color,lineWidth:this.lineWidth,lineStyle:this.lineStyle,text:this.text,textPosition:this.textPosition,textSize:this.textSize,textColor:this.textColor,isLocked:this.isLocked,point2Confirmed:this.point2Confirmed,showInfoBox:this.showInfoBox,tooltipMode:this.tooltipMode}}}])&&n(e.prototype,i),o&&n(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,o}()},8644:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="textcomment",this.points=[],this.text="",this.textColor="#ffffff",this.textSize=12,this.backgroundColor="rgba(41, 98, 255, 0.7)",this.borderColor="#2962ff",this.padding=10,this.maxWidth=200,this.borderRadius=8,this.showPointer=!0,this.commentOffsetX=50,this.commentOffsetY=-50},e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"wrapText",value:function(t,e,i){var o=[];return e.split("\n").forEach(function(e){if(e&&""!==e.trim()){for(var n=e.split(" "),r=n[0],s=1;s<n.length;s++){var l=n[s];t.measureText(r+" "+l).width<i?r+=" "+l:(o.push(r),r=l)}o.push(r)}else o.push("")}),o}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)&&this.text&&""!==this.text.trim()){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.save(),t.font="".concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="top";var l=this.wrapText(t,this.text,this.maxWidth-2*this.padding),a=1.4*this.textSize,h=l.length*a,c=0;l.forEach(function(e){var i=t.measureText(e).width;i>c&&(c=i)});var f=Math.min(c+2*this.padding,this.maxWidth),p=h+2*this.padding,u=r+this.commentOffsetX,d=s+this.commentOffsetY-p;if(this.showPointer){t.strokeStyle=this.borderColor,t.lineWidth=this.lineWidth||2,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(r,s);var m=u<r?u+f:u,y=d+p/2;t.lineTo(m,y),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.borderColor,t.beginPath(),t.arc(r,s,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(r,s,3,0,2*Math.PI),t.fill())}this.drawRoundedRect(t,u,d,f,p,this.borderRadius),t.fillStyle=this.backgroundColor,t.fill(),t.strokeStyle=this.borderColor,t.lineWidth=this.isEditing?3:2,this.isEditing&&(t.shadowColor="#2962ff",t.shadowBlur=15),t.stroke(),t.shadowBlur=0,t.fillStyle=this.textColor;var v=d+this.padding;l.forEach(function(e){t.fillText(e,u+i.padding,v),v+=a}),t.restore()}}}},{key:"drawRoundedRect",value:function(t,e,i,o,n,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.quadraticCurveTo(e+o,i,e+o,i+r),t.lineTo(e+o,i+n-r),t.quadraticCurveTo(e+o,i+n,e+o-r,i+n),t.lineTo(e+r,i+n),t.quadraticCurveTo(e,i+n,e,i+n-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="".concat(this.textSize,"px Arial, sans-serif");var a=this.wrapText(l,this.text,this.maxWidth-2*this.padding),h=1.4*this.textSize,c=a.length*h,f=0;a.forEach(function(t){var e=l.measureText(t).width;e>f&&(f=e)});var p=Math.min(f+2*this.padding,this.maxWidth),u=c+2*this.padding,d=r+this.commentOffsetX,m=s+this.commentOffsetY-u;return t>=d&&t<=d+p&&e>=m&&e<=m+u}},{key:"isClickOnAnchor",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price);return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-s,2))<=8}},{key:"isClickOnPointerLine",value:function(t,e,i){if(this.points.length<1||!this.showPointer)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="".concat(this.textSize,"px Arial, sans-serif");var a=this.wrapText(l,this.text,this.maxWidth-2*this.padding),h=1.4*this.textSize,c=a.length*h,f=0;a.forEach(function(t){var e=l.measureText(t).width;e>f&&(f=e)});var p=Math.min(f+2*this.padding,this.maxWidth),u=c+2*this.padding,d=r+this.commentOffsetX,m=(d<r?d+p:d)-r,y=s+this.commentOffsetY-u+u/2-s,v=m*m+y*y;if(0===v)return!1;var b=((t-r)*m+(e-s)*y)/v,x=r+(b=Math.max(0,Math.min(1,b)))*m,g=s+b*y;return Math.sqrt(Math.pow(t-x,2)+Math.pow(e-g,2))<=6}}],e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},8788:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="callout",this.points=[],this.text="",this.textColor="#ffffff",this.textSize=13,this.backgroundColor="rgba(74, 20, 140, 0.9)",this.borderColor="#9c27b0",this.padding=12,this.maxWidth=250,this.borderRadius=8,this.arrowSize=12,this.balloonOffsetX=30,this.balloonOffsetY=-80},i=[{key:"getSettingsConfig",value:function(){return{backgroundColor:{type:"color",label:"Background",category:"style"},borderColor:{type:"color",label:"Border",category:"style"},textColor:{type:"color",label:"Text",category:"style"},textSize:{type:"number",label:"Text Size",category:"style",min:10,max:24,step:1}}}}],(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"wrapText",value:function(t,e,i){var o=[];return e.split("\n").forEach(function(e){if(e&&""!==e.trim()){for(var n=e.split(" "),r=n[0],s=1;s<n.length;s++){var l=n[s];t.measureText(r+" "+l).width<i?r+=" "+l:(o.push(r),r=l)}o.push(r)}else o.push("")}),o}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)&&this.text&&""!==this.text.trim()){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.save(),t.font="".concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="top";var l=this.wrapText(t,this.text,this.maxWidth-2*this.padding),a=1.5*this.textSize,h=l.length*a,c=0;l.forEach(function(e){var i=t.measureText(e).width;i>c&&(c=i)});var f=Math.min(c+2*this.padding,this.maxWidth),p=h+2*this.padding,u=r+this.balloonOffsetX,d=s+this.balloonOffsetY;t.fillStyle=this.backgroundColor,t.strokeStyle=this.borderColor,t.lineWidth=2,t.beginPath(),t.moveTo(r,s);var m=u+20,y=d+p;t.lineTo(m-this.arrowSize/2,y),t.lineTo(m+this.arrowSize/2,y),t.closePath(),t.fill(),t.stroke(),this.drawRoundedRect(t,u,d,f,p,this.borderRadius),t.fillStyle=this.backgroundColor,t.fill(),t.strokeStyle=this.borderColor,t.lineWidth=2,t.stroke(),t.fillStyle=this.textColor;var v=d+this.padding;l.forEach(function(e){t.fillText(e,u+i.padding,v),v+=a}),this.selected&&(t.fillStyle=this.borderColor,t.beginPath(),t.arc(r,s,6,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(r,s,3,0,2*Math.PI),t.fill()),t.restore()}}}},{key:"drawRoundedRect",value:function(t,e,i,o,n,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.quadraticCurveTo(e+o,i,e+o,i+r),t.lineTo(e+o,i+n-r),t.quadraticCurveTo(e+o,i+n,e+o-r,i+n),t.lineTo(e+r,i+n),t.quadraticCurveTo(e,i+n,e,i+n-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;if(!this.text||""===this.text.trim())return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="".concat(this.textSize,"px Arial, sans-serif");var a=this.wrapText(l,this.text,this.maxWidth-2*this.padding),h=1.5*this.textSize,c=a.length*h,f=0;a.forEach(function(t){var e=l.measureText(t).width;e>f&&(f=e)});var p=Math.min(f+2*this.padding,this.maxWidth),u=c+2*this.padding,d=r+this.balloonOffsetX,m=s+this.balloonOffsetY;return t>=d&&t<=d+p&&e>=m&&e<=m+u}},{key:"isClickOnAnchor",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price);return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-s,2))<=8}},{key:"isClickOnPointerLine",value:function(t,e,i){if(this.points.length<1)return!1;if(!this.text||""===this.text.trim())return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=r+this.balloonOffsetX,a=s+this.balloonOffsetY,h=document.createElement("canvas").getContext("2d");h.font="".concat(this.textSize,"px Arial, sans-serif");var c=this.wrapText(h,this.text,this.maxWidth-2*this.padding),f=1.5*this.textSize,p=l+20,u=a+(c.length*f+2*this.padding);return this.pointToLineDistance(t,e,r,s,p,u)<=8}},{key:"pointToLineDistance",value:function(t,e,i,o,n,r){var s,l,a=n-i,h=r-o,c=a*a+h*h,f=-1;0!==c&&(f=((t-i)*a+(e-o)*h)/c),f<0?(s=i,l=o):f>1?(s=n,l=r):(s=i+f*a,l=o+f*h);var p=t-s,u=e-l;return Math.sqrt(p*p+u*u)}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},8938:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="note",this.points=[],this.text="",this.textColor="#000000",this.textSize=12,this.backgroundColor="rgba(255, 245, 157, 0.95)",this.borderColor="#f9a825",this.padding=10,this.width=180,this.minHeight=80,this.borderRadius=4},i=[{key:"getSettingsConfig",value:function(){return{backgroundColor:{type:"color",label:"Background",category:"style"},borderColor:{type:"color",label:"Border",category:"style"},textColor:{type:"color",label:"Text",category:"style"},textSize:{type:"number",label:"Text Size",category:"style",min:10,max:18,step:1}}}}],(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"wrapText",value:function(t,e,i){var o=[];return e.split("\n").forEach(function(e){if(e&&""!==e.trim()){for(var n=e.split(" "),r=n[0],s=1;s<n.length;s++){var l=n[s];t.measureText(r+" "+l).width<i?r+=" "+l:(o.push(r),r=l)}o.push(r)}else o.push("")}),o}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)&&this.text&&""!==this.text.trim()){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);t.save(),t.font="".concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="top";var l=this.wrapText(t,this.text,this.width-2*this.padding),a=1.4*this.textSize,h=l.length*a,c=Math.max(this.minHeight,h+2*this.padding+20);t.shadowColor="rgba(0, 0, 0, 0.3)",t.shadowBlur=8,t.shadowOffsetX=2,t.shadowOffsetY=2,this.drawRoundedRect(t,r,s,this.width,c,this.borderRadius),t.fillStyle=this.backgroundColor,t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="rgba(249, 168, 37, 0.3)",t.fillRect(r,s,this.width,20),this.drawRoundedRect(t,r,s,this.width,c,this.borderRadius),t.strokeStyle=this.borderColor,t.lineWidth=1,t.stroke(),t.fillStyle=this.textColor;var f=s+25;l.forEach(function(e){t.fillText(e,r+i.padding,f),f+=a}),this.selected&&(t.fillStyle="#e64a19",t.beginPath(),t.arc(r+15,s+10,4,0,2*Math.PI),t.fill()),t.restore()}}}},{key:"drawRoundedRect",value:function(t,e,i,o,n,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.quadraticCurveTo(e+o,i,e+o,i+r),t.lineTo(e+o,i+n-r),t.quadraticCurveTo(e+o,i+n,e+o-r,i+n),t.lineTo(e+r,i+n),t.quadraticCurveTo(e,i+n,e,i+n-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;if(!this.text||""===this.text.trim())return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d");l.font="".concat(this.textSize,"px Arial, sans-serif");var a=this.wrapText(l,this.text,this.width-2*this.padding),h=1.4*this.textSize,c=a.length*h,f=Math.max(this.minHeight,c+2*this.padding+20);return t>=r&&t<=r+this.width&&e>=s&&e<=s+f}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9084:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,n,r,s,l=[],a=!0,h=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;a=!1}else for(;!(a=(o=r.call(i)).done)&&(l.push(o.value),l.length!==e);a=!0);}catch(t){h=!0,n=t}finally{try{if(!a&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(h)throw n}}return l}}(t,e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=Array(e);i<e;i++)o[i]=t[i];return o}function s(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,l(o.key),o)}}function l(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>a});const a=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="elliotwave",this.points=[],this.color="#00bcd4",this.lineWidth=2,this.accuracyBadgeBounds=null},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length&&(this.points[5]=t)}},{key:"isComplete",value:function(){return 6===this.points.length}},{key:"calculateAccuracy",value:function(){if(this.points.length<6)return null;var t,e,i,o=this.points[0],n=this.points[1],r=this.points[2],s=this.points[3],l=this.points[4],a=this.points[5],h=Math.abs(n.price-o.price),c=Math.abs(r.price-n.price),f=Math.abs(s.price-r.price),p=Math.abs(l.price-s.price),u=Math.abs(a.price-l.price),d=c<h,m=f>=h&&f>=u,y=n.price>o.price,v=y?l.price>n.price:l.price<n.price,b=0!==h?c/h:0,x=0!==f?p/f:0,g=0!==h?f/h:0;if(b>=.382&&b<=.618)t=100-Math.abs(b-.5)/.5*100;else{var T=b<.382?.382-b:b-.618;t=Math.max(0,100-T/.5*150)}if(x>=.382&&x<=.618)e=100-Math.abs(x-.5)/.5*100;else{var S=x<.382?.382-x:x-.618;e=Math.max(0,100-S/.5*150)}if(g>=1&&g<=2.618)i=100-Math.abs(g-1.618)/1.618*100;else{var P=g<1?1-g:g-2.618;i=Math.max(0,100-P/1.618*120)}var w=.2*(d?100:0)+.2*(m?100:0)+.2*(v?100:0)+.15*t+.15*e+.1*i;return{total:Math.round(w),rule1:d,rule2:m,rule3:v,wave2Ratio:b,wave4Ratio:x,wave3Ratio:g,accuracyWave2Fib:Math.round(t),accuracyWave4Fib:Math.round(e),accuracyWave3Extension:Math.round(i),wave1Value:h,wave2Value:c,wave3Value:f,wave4Value:p,wave5Value:u,isUptrend:y}}},{key:"getAccuracyColor",value:function(t){return t>=90?"#26a69a":t>=75?"#ffa726":"#ef5350"}},{key:"isHoveringBadge",value:function(t,e){if(!this.accuracyBadgeBounds)return!1;var i=this.accuracyBadgeBounds;return t>=i.x-20&&t<=i.x+i.width+20&&e>=i.y-20&&e<=i.y+i.height+20}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){for(var o=this.color,r=["#2196f3","#00bcd4","#ff5722","#00bcd4","#ff5722","#00bcd4"],s=["0","1","2","3","4","5"],l=[],a=this.lineStyle||"solid",h="dashed"===a?[5,5]:"dotted"===a?[2,2]:[],c=0;c<this.points.length;c++){var f=this.points[c],p=f.timestamp?e.timestampToIndex(f.timestamp):f.index;if(null!==p){var u=e.indexToX(p)+e.candleWidth/2,d=e.priceToY(f.price);if(l.push({x:u,y:d,idx:p}),c>0){var m=this.points[c-1],y=m.timestamp?e.timestampToIndex(m.timestamp):m.index;if(null!==y){var v=e.indexToX(y)+e.candleWidth/2,b=e.priceToY(m.price);t.strokeStyle=o,t.lineWidth=this.lineWidth,t.setLineDash(h),t.beginPath(),t.moveTo(v,b),t.lineTo(u,d),t.stroke()}}}}if(this.points.length>=2){var x,g,T,S=this.color||"#00bcd4",P=1;if(S.startsWith("#"))x=parseInt(S.slice(1,3),16),g=parseInt(S.slice(3,5),16),T=parseInt(S.slice(5,7),16);else if(S.startsWith("rgb")){var w=S.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);w&&(x=parseInt(w[1]),g=parseInt(w[2]),T=parseInt(w[3]),P=w[4]?parseFloat(w[4]):1)}var k=Math.min(.1*P,.1),M="rgba(".concat(x,", ").concat(g,", ").concat(T,", ").concat(k,")");t.fillStyle=M,[[0,1],[2,3],[4,5]].forEach(function(e){var o=n(e,2),r=o[0],s=o[1];if(i.points.length>s&&l.length>s){var a=l[r],h=l[s],c=(a.y+h.y)/2;t.beginPath(),t.moveTo(a.x,a.y),t.lineTo(h.x,h.y),t.lineTo(h.x,c),t.lineTo(a.x,c),t.closePath(),t.fill()}})}if(!1!==this.showProjections&&this.points.length>=2){t.setLineDash([]),t.font="10px Arial",t.textAlign="center",t.textBaseline="middle";for(var W=1;W<this.points.length;W++){var C=this.points[W-1],L=this.points[W],I=C.timestamp?e.timestampToIndex(C.timestamp):C.index,A=L.timestamp?e.timestampToIndex(L.timestamp):L.index;if(null!==I&&null!==A){var O=e.indexToX(I)+e.candleWidth/2,j=e.priceToY(C.price),D=(O+(e.indexToX(A)+e.candleWidth/2))/2,B=(j+e.priceToY(L.price))/2;if(W%2==0&&this.points.length>W){var X=2===W?Math.abs(this.points[1].price-this.points[0].price):Math.abs(this.points[3].price-this.points[2].price),E=Math.abs(L.price-C.price),Y=0!==X?(E/X*100).toFixed(1):"0.0",z=Y>=38.2&&Y<=61.8;t.fillStyle=z?"rgba(255, 152, 0, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("".concat(W," (").concat(Y,"%)"),D,B)}else if(3===W&&this.points.length>3){var R=Math.abs(this.points[1].price-this.points[0].price),F=Math.abs(L.price-C.price),N=0!==R?(F/R*100).toFixed(1):"0.0",_=N>=161.8;t.fillStyle=_?"rgba(0, 188, 212, 0.9)":"rgba(136, 136, 136, 0.7)",t.fillText("".concat(W," (").concat(N,"%)"),D,B)}else t.fillStyle="rgba(0, 188, 212, 0.9)",t.fillText("".concat(W),D,B)}}}if(!1!==this.showProjections&&6===this.points.length&&6===l.length){var q=this.calculateAccuracy();if(q){var H=q.isUptrend?"↑ Bullish":"↓ Bearish",V=q.isUptrend?"#26a69a":"#ef5350",J=l[0].x,Z=l[0].y;t.font="bold 11px Arial",t.textAlign="left",t.textBaseline="middle";var U="".concat(H," Impulse (12345)"),Q=t.measureText(U).width+12,G=J-Q-15,K=Z-25;t.fillStyle="rgba(0, 0, 0, 0.75)",t.beginPath(),t.roundRect(G,K-10,Q,20,3),t.fill(),t.fillStyle=V,t.fillText(U,G+6,K);var $=l[5],tt=$.x+15,et=$.y,it=this.getAccuracyColor(q.total),ot="Accuracy: ".concat(q.total,"%");t.font="12px Arial",t.textAlign="left",t.textBaseline="middle";var nt=t.measureText(ot).width+10;t.fillStyle="rgba(0, 0, 0, 0.8)",t.beginPath(),t.roundRect(tt-5,et-12,nt+10,24,4),t.fill(),t.fillStyle=it,t.fillRect(tt-5,et-12,3,24),t.font="12px Arial",t.fillStyle="#b8bcc5";var rt="Accuracy: ";t.fillText(rt,tt+3,et);var st=t.measureText(rt).width;t.fillStyle=it,t.fillText("".concat(q.total,"%"),tt+3+st,et)}}t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var lt=0;lt<l.length;lt++){var at=l[lt];this.selected&&(t.fillStyle=o,t.beginPath(),t.arc(at.x,at.y,4,0,2*Math.PI),t.fill());var ht=Math.round(at.x-10),ct=Math.round(at.y-15);t.beginPath(),t.arc(ht,ct,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=r[lt],t.lineWidth=1.5,t.stroke(),t.fillStyle=r[lt],t.fillText(s[lt],ht,ct)}}}},{key:"drawHoverTooltip",value:function(t,e,i,o,n){var r=[{text:"Elliott Impulse (12345) Analysis",color:"#ffffff",bold:!0},{text:"──────────────────────────────",color:"#666666"},{text:"WAVE STRUCTURE:",color:"#aaaaaa",size:10},{text:"  1:  ".concat(i.wave1Value.toFixed(4)," (Impulse)"),color:"#00bcd4"},{text:"  2:  ".concat(i.wave2Value.toFixed(4)," (Correction)"),color:"#ff5722"},{text:"      ".concat((100*i.wave2Ratio).toFixed(1),"% of Wave 1  ").concat(this.getWaveFibIndicator(i.wave2Ratio)),color:this.getWaveFibColor(i.wave2Ratio)},{text:"  3:  ".concat(i.wave3Value.toFixed(4)," (Impulse)"),color:"#00bcd4"},{text:"      ".concat((100*i.wave3Ratio).toFixed(1),"% of Wave 1  ").concat(this.getWave3Indicator(i.wave3Ratio)),color:this.getWave3Color(i.wave3Ratio)},{text:"  4:  ".concat(i.wave4Value.toFixed(4)," (Correction)"),color:"#ff5722"},{text:"      ".concat((100*i.wave4Ratio).toFixed(1),"% of Wave 3  ").concat(this.getWaveFibIndicator(i.wave4Ratio)),color:this.getWaveFibColor(i.wave4Ratio)},{text:"  5:  ".concat(i.wave5Value.toFixed(4)," (Impulse)"),color:"#00bcd4"},{text:"",color:"#ffffff"},{text:"ELLIOTT WAVE RULES:",color:"#aaaaaa",size:10},{text:"  Rule 1: Wave 2 < 100% of Wave 1  ".concat(i.rule1?"✓ Pass":"✗ Fail"),color:i.rule1?"#26a69a":"#ef5350"},{text:"  Rule 2: Wave 3 not shortest  ".concat(i.rule2?"✓ Pass":"✗ Fail"),color:i.rule2?"#26a69a":"#ef5350"},{text:"  Rule 3: Wave 4 no overlap Wave 1  ".concat(i.rule3?"✓ Pass":"✗ Fail"),color:i.rule3?"#26a69a":"#ef5350"},{text:"",color:"#ffffff"},{text:"Accuracy: ".concat(i.total,"%  ").concat(this.getQualityText(i.total)),color:this.getAccuracyColor(i.total),bold:!0}];t.font="11px Arial";var s=0;r.forEach(function(e){var i=t.measureText(e.text).width;i>s&&(s=i)});var l,a=s+20,h=16*r.length+20,c=e.height-30,f=o;(l=c-n<h+50?n-h-15:n+40)<30&&(l=30),t.shadowColor="rgba(0, 0, 0, 0.5)",t.shadowBlur=10,t.shadowOffsetX=0,t.shadowOffsetY=4,t.fillStyle="rgba(0, 0, 0, 0.98)",t.strokeStyle="rgba(255, 255, 255, 0.4)",t.lineWidth=2,t.beginPath(),t.roundRect(f,l,a,h,6),t.fill(),t.stroke(),t.shadowColor="transparent",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.textAlign="left",t.textBaseline="top",r.forEach(function(e,i){var o=e.size||11;t.font=e.bold?"bold ".concat(o,"px Arial"):"".concat(o,"px Arial"),t.fillStyle=e.color,t.fillText(e.text,f+10,l+10+16*i)})}},{key:"getQualityText",value:function(t){return t>=90?"(Excellent!)":t>=75?"(Good)":"(Weak)"}},{key:"getWaveFibIndicator",value:function(t){return t>=.382&&t<=.618?"✓ Perfect":t>=.3&&t<=.7?"⚠ OK":"✗ Weak"}},{key:"getWaveFibColor",value:function(t){return t>=.382&&t<=.618?"#26a69a":t>=.3&&t<=.7?"#ffa726":"#888888"}},{key:"getWave3Indicator",value:function(t){return t>=1&&t<=2.618?"✓ Good":"⚠ Check"}},{key:"getWave3Color",value:function(t){return t>=1.618&&t<=2.618?"#26a69a":t>=1&&t<=1.618?"#ffa726":"#888888"}}])&&s(t.prototype,e),i&&s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9095:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="fibExtension",this.points=[],this.color="#ff3d00",this.lineWidth=1,this.tooltipMode="auto",this.levels=[0,.236,.382,.5,.618,.786,1,1.618,2.618,4.236],this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0",1.618:"#ff9800",2.618:"#f44336",4.236:"#e91e63"}},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){var o=this.points[0],n=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==n){var r=e.indexToX(n)+e.candleWidth/2,s=e.priceToY(o.price);if(this.selected){var l=this.color;if(l&&l.startsWith("rgba")){var a=l.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);a&&(l="rgb(".concat(a[1],", ").concat(a[2],", ").concat(a[3],")"))}t.fillStyle=l,t.beginPath(),t.arc(r,s,4,0,2*Math.PI),t.fill()}if(!(this.points.length<2)){var h=this.points[1],c=h.timestamp?e.timestampToIndex(h.timestamp):h.index;if(null!==c){var f=e.indexToX(c)+e.candleWidth/2,p=e.priceToY(h.price);if(t.strokeStyle=this.color,t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(r,s),t.lineTo(f,p),t.stroke(),t.setLineDash([]),this.selected){var u=this.color;if(u&&u.startsWith("rgba")){var d=u.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);d&&(u="rgb(".concat(d[1],", ").concat(d[2],", ").concat(d[3],")"))}t.fillStyle=u,t.beginPath(),t.arc(f,p,4,0,2*Math.PI),t.fill()}if(!(this.points.length<3)){var m=this.points[2],y=m.timestamp?e.timestampToIndex(m.timestamp):m.index;if(null!==y){var v=e.indexToX(y)+e.candleWidth/2,b=e.priceToY(m.price);if(t.strokeStyle=this.color,t.setLineDash([5,5]),t.beginPath(),t.moveTo(f,p),t.lineTo(v,b),t.stroke(),t.setLineDash([]),this.selected){var x=this.color;if(x&&x.startsWith("rgba")){var g=x.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);g&&(x="rgb(".concat(g[1],", ").concat(g[2],", ").concat(g[3],")"))}t.fillStyle=x,t.beginPath(),t.arc(v,b,4,0,2*Math.PI),t.fill()}var T=h.price-o.price,S=Math.max(r,f,v),P=Math.min(r,f,v);t.font="11px Arial",t.textAlign="right",this.levelColors||(this.levelColors={0:"#808080",.236:"#ff6b6b",.382:"#ffa500",.5:"#ffd700",.618:"#4caf50",.786:"#2196f3",1:"#9c27b0",1.618:"#ff9800",2.618:"#f44336",4.236:"#e91e63"});var w=this.customLevels||this.levels;if(this.visibleLevels||(this.visibleLevels={},w.forEach(function(t){i.visibleLevels[t]=!0})),w.forEach(function(o,n){if(!1!==i.visibleLevels[o]){var r,s=m.price+T*o,l=e.priceToY(s);r=i.levelColors[o]?i.levelColors[o]:(i.color,i.color);for(var a=null,h=n+1;h<w.length;h++)if(!1!==i.visibleLevels[w[h]]){a=w[h];break}if(a){var c,f,p,u=m.price+T*a,d=e.priceToY(u);if(r.startsWith("rgba")||r.startsWith("rgb")){var y=r.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);y?(c=parseInt(y[1]),f=parseInt(y[2]),p=parseInt(y[3])):c=f=p=0}else{var v=r.replace("#","");c=parseInt(v.substr(0,2),16),f=parseInt(v.substr(2,2),16),p=parseInt(v.substr(4,2),16)}t.fillStyle="rgba(".concat(c,", ").concat(f,", ").concat(p,", 0.08)"),t.fillRect(P,l,S-P,d-l)}t.strokeStyle=r,t.lineWidth=i.lineWidth,"dashed"===i.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(P,l),t.lineTo(S,l),t.stroke(),t.setLineDash([]),t.fillStyle=r;var b=e.formatPrice?e.formatPrice(s):s.toFixed(4);t.fillText("".concat(o.toFixed(3)," (").concat(b,")"),P-5,l+4)}}),this.text&&""!==this.text.trim()&&3===this.points.length){var k=this.textPosition||"above-center",M=this.textSize||12,W=this.textColor||"#ffffff",C=(r+f+v)/3,L=(s+p+b)/3,I=C,A=L;"center"===k?(I=C,A=L):"above-left"===k?(I=P+.2*(S-P),A=Math.min(s,p,b)-15):"above-center"===k?(I=C,A=Math.min(s,p,b)-15):"above-right"===k?(I=P+.8*(S-P),A=Math.min(s,p,b)-15):"below-left"===k?(I=P+.2*(S-P),A=Math.max(s,p,b)+20):"below-center"===k?(I=C,A=Math.max(s,p,b)+20):"below-right"===k&&(I=P+.8*(S-P),A=Math.max(s,p,b)+20),t.font="".concat(M,"px Arial, sans-serif"),t.fillStyle=W,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,I,A)}}}}}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9106:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="triangle",this.points=[],this.color="#2962ff",this.lineWidth=2,this.tooltipMode="auto",this.fillEnabled=!1,this.fillOpacity=.1},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length&&(this.points[2]=t)}},{key:"isComplete",value:function(){return 3===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<2)){var i=this.points[0],o=this.points[1],n=this.points[2],r=i.timestamp?e.timestampToIndex(i.timestamp):i.index,s=o.timestamp?e.timestampToIndex(o.timestamp):o.index;if(null!==r&&null!==s){var l,a,h=e.indexToX(r)+e.candleWidth/2,c=e.priceToY(i.price),f=e.indexToX(s)+e.candleWidth/2,p=e.priceToY(o.price);if(n){var u=n.timestamp?e.timestampToIndex(n.timestamp):n.index;null!==u&&(l=e.indexToX(u)+e.candleWidth/2,a=e.priceToY(n.price))}if("dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),this.fillEnabled&&void 0!==l&&(t.fillStyle=this.color+Math.floor(255*this.fillOpacity).toString(16).padStart(2,"0"),t.beginPath(),t.moveTo(h,c),t.lineTo(f,p),t.lineTo(l,a),t.closePath(),t.fill()),t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.beginPath(),t.moveTo(h,c),t.lineTo(f,p),void 0!==l&&(t.lineTo(l,a),t.closePath()),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(h,c,4,0,2*Math.PI),t.fill(),t.beginPath(),t.arc(f,p,4,0,2*Math.PI),t.fill(),void 0!==l&&(t.beginPath(),t.arc(l,a,4,0,2*Math.PI),t.fill())),this.text&&""!==this.text.trim()&&void 0!==l){var d=this.textPosition||"above-center",m=this.textSize||12,y=this.textColor||"#ffffff",v=(c+p+a)/3,b=(h+f+l)/3,x=v;d.includes("above")?x=Math.min(c,p,a)-15:d.includes("below")?x=Math.max(c,p,a)+15:"center"===d&&(x=v),t.font="".concat(m,"px Arial, sans-serif"),t.fillStyle=y,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,b,x)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9125:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="anchoredtext",this.points=[],this.text="",this.textColor="#ffffff",this.textSize=12,this.backgroundColor="rgba(156, 39, 176, 0.85)",this.borderColor="#9c27b0",this.lineColor="rgba(156, 39, 176, 0.5)",this.padding=6,this.borderRadius=4,this.bold=!0,this.lineWidth=1,this.lineStyle="solid",this.extendRight=!0,this.extendLeft=!1},i=[{key:"getSettingsConfig",value:function(){return{backgroundColor:{type:"color",label:"Background",category:"style"},borderColor:{type:"color",label:"Border",category:"style"},lineColor:{type:"color",label:"Line Color",category:"style"},textColor:{type:"color",label:"Text",category:"style"},textSize:{type:"number",label:"Text Size",category:"style",min:10,max:18,step:1},lineWidth:{type:"number",label:"Line Width",category:"style",min:1,max:4,step:1}}}}],(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)&&this.text&&""!==this.text.trim()){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);t.save(),t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),this.extendLeft?t.moveTo(0,r):t.moveTo(n,r),this.extendRight?t.lineTo(e.width,r):t.lineTo(n,r),t.stroke(),t.setLineDash([]);var s=this.bold?"bold":"normal";t.font="".concat(s," ").concat(this.textSize,"px Arial, sans-serif"),t.textAlign="left",t.textBaseline="middle";var l=t.measureText(this.text).width+2*this.padding,a=this.textSize+2*this.padding,h=n+8,c=r-a/2;this.drawRoundedRect(t,h,c,l,a,this.borderRadius),t.fillStyle=this.backgroundColor,t.fill(),t.strokeStyle=this.borderColor,t.lineWidth=2,t.stroke(),t.fillStyle=this.textColor,t.textBaseline="middle",t.fillText(this.text,h+this.padding,r),this.selected&&(t.fillStyle=this.borderColor,t.beginPath(),t.arc(n,r,5,0,2*Math.PI),t.fill(),t.fillStyle="#ffffff",t.beginPath(),t.arc(n,r,2,0,2*Math.PI),t.fill()),t.restore()}}}},{key:"drawRoundedRect",value:function(t,e,i,o,n,r){t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.quadraticCurveTo(e+o,i,e+o,i+r),t.lineTo(e+o,i+n-r),t.quadraticCurveTo(e+o,i+n,e+o-r,i+n),t.lineTo(e+r,i+n),t.quadraticCurveTo(e,i+n,e,i+n-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath()}},{key:"containsPoint",value:function(t,e,i){if(this.points.length<1)return!1;if(!this.text||""===this.text.trim())return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price),l=document.createElement("canvas").getContext("2d"),a=this.bold?"bold":"normal";l.font="".concat(a," ").concat(this.textSize,"px Arial, sans-serif");var h=l.measureText(this.text).width+2*this.padding,c=this.textSize+2*this.padding,f=r+8,p=s-c/2;return t>=f&&t<=f+h&&e>=p&&e<=p+c}},{key:"isClickOnLine",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price);return!(Math.abs(e-s)>6||(!this.extendLeft||!this.extendRight)&&!(this.extendRight?t>=r:this.extendLeft?t<=r:Math.abs(t-r)<=6))}},{key:"isClickOnAnchor",value:function(t,e,i){if(this.points.length<1)return!1;var o=this.points[0],n=o.timestamp?i.timestampToIndex(o.timestamp):o.index;if(null===n)return!1;var r=i.indexToX(n)+i.candleWidth/2,s=i.priceToY(o.price);return Math.sqrt(Math.pow(t-r,2)+Math.pow(e-s,2))<=8}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9180:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="horizontalRay",this.points=[],this.color="#ff9800",this.lineWidth=1,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price),s=e.width-e.calculatePriceAxisWidth(),l=e.canvas.height;if(!(n>s)&&(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(n,r),t.lineTo(s,r),t.stroke(),t.setLineDash([])),this.selected&&n>=0&&n<=s&&r>=0&&r<=l&&(t.fillStyle=this.color,t.beginPath(),t.arc(n,r,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var a=this.textPosition||"above-center",h=this.textSize||12,c=this.textColor||"#ffffff",f=(n+e.width-e.calculatePriceAxisWidth())/2,p=r;a.includes("above")?p=r-10:a.includes("below")&&(p=r+h+5),a.includes("left")?f=n+20:a.includes("right")&&(f=e.width-120),t.font="".concat(h,"px Arial, sans-serif"),t.fillStyle=c,t.textAlign=a.includes("left")?"left":a.includes("right")?"right":"center",t.textBaseline="middle",t.fillText(this.text,f,p)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9334:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="vertical",this.points=[],this.color="#2962ff",this.lineWidth=1,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2;if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(n,0),t.lineTo(n,e.canvas.height),t.stroke(),t.setLineDash([]),this.text&&""!==this.text.trim()){var r=this.textPosition||"above-center",s=this.textSize||12,l=this.textColor||"#ffffff",a=(30+e.height-30)/2,h=n,c=a;"above-center"===r||"above-left"===r||"above-right"===r?c=60:"center"===r?c=a:"below-center"!==r&&"below-left"!==r&&"below-right"!==r||(c=e.height-60),r.includes("left")?h=n-25:r.includes("right")&&(h=n+25),t.font="".concat(s,"px Arial, sans-serif"),t.fillStyle=l,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,h,c)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9480:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="headandshoulders",this.points=[],this.color="#2962ff",this.lineWidth=2},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length?this.points.push(t):2===this.points.length?this.point2Confirmed?this.points.push(t):this.points[1]=t:3===this.points.length?this.point3Confirmed?this.points.push(t):this.points[2]=t:4===this.points.length?this.point4Confirmed?this.points.push(t):this.points[3]=t:5===this.points.length?this.point5Confirmed?this.points.push(t):this.points[4]=t:6===this.points.length?this.point6Confirmed?this.points.push(t):this.points[5]=t:7===this.points.length&&(this.points[6]=t)}},{key:"isComplete",value:function(){return 7===this.points.length}},{key:"render",value:function(t,e){var i=this;if(!(this.points.length<1)){for(var o=[],n=0;n<this.points.length;n++){var r=this.points[n],s=r.timestamp?e.timestampToIndex(r.timestamp):r.index;if(null!==s){var l=e.indexToX(s)+e.candleWidth/2,a=e.priceToY(r.price);o.push({x:l,y:a,idx:s})}}var h=function(){var t,e,o,n=i.color,r=1;if(n.startsWith("#"))t=parseInt(n.slice(1,3),16),e=parseInt(n.slice(3,5),16),o=parseInt(n.slice(5,7),16);else if(n.startsWith("rgb")){var s=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([\d.]+))?\)/);s&&(t=parseInt(s[1]),e=parseInt(s[2]),o=parseInt(s[3]),r=s[4]?parseFloat(s[4]):1)}var l=Math.min(.15*r,.15);return void 0!==t&&void 0!==e&&void 0!==o?"rgba(".concat(t,", ").concat(e,", ").concat(o,", ").concat(l,")"):"rgba(41, 98, 255, 0.15)"};o.length>=3&&(t.fillStyle=h(),t.beginPath(),t.moveTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(o[2].x,o[2].y),t.closePath(),t.fill()),o.length>=5&&(t.fillStyle=h(),t.beginPath(),t.moveTo(o[2].x,o[2].y),t.lineTo(o[3].x,o[3].y),t.lineTo(o[4].x,o[4].y),t.closePath(),t.fill()),o.length>=7&&(t.fillStyle=h(),t.beginPath(),t.moveTo(o[4].x,o[4].y),t.lineTo(o[5].x,o[5].y),t.lineTo(o[6].x,o[6].y),t.closePath(),t.fill()),t.strokeStyle=this.color,t.lineWidth=this.lineWidth,t.setLineDash([]);for(var c=1;c<o.length;c++)t.beginPath(),t.moveTo(o[c-1].x,o[c-1].y),t.lineTo(o[c].x,o[c].y),t.stroke();if(this.selected)for(var f=0;f<o.length;f++){var p=o[f];t.fillStyle=this.color,t.beginPath(),t.arc(p.x,p.y,4,0,2*Math.PI),t.fill()}var u=[null,{text:"LS",color:"#2196f3"},null,{text:"H",color:"#f44336"},null,{text:"RS",color:"#2196f3"},null];t.font="bold 11px Arial",t.textAlign="center",t.textBaseline="middle";for(var d=0;d<o.length;d++)if(u[d]){var m=o[d],y=u[d],v=Math.round(m.x-10),b=Math.round(m.y-15);t.beginPath(),t.arc(v,b,8,0,2*Math.PI),t.fillStyle="#ffffff",t.fill(),t.strokeStyle=y.color,t.lineWidth=1.5,t.stroke(),t.fillStyle=y.color,t.fillText(y.text,v,b)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9508:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="horizontal",this.points=[],this.color="#ff6d00",this.lineWidth=2,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=e.priceToY(i.price),n=e.calculatePriceAxisWidth(),r=e.width-n;if(t.save(),t.beginPath(),t.rect(0,0,r,e.height),t.clip(),t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(0,o),t.lineTo(r,o),t.stroke(),t.setLineDash([]),t.restore(),this.text&&""!==this.text.trim()){var s=this.textPosition||"above-center",l=this.textSize||12,a=this.textColor||"#ffffff",h=r/2,c=o;s.includes("above")?c=o-10:s.includes("below")&&(c=o+l+5),s.includes("left")?h=10:s.includes("right")&&(h=r-10),t.font="".concat(l,"px Arial, sans-serif"),t.fillStyle=a,t.textAlign=s.includes("left")?"left":s.includes("right")?"right":"center",t.textBaseline="middle",t.fillText(this.text,h,c)}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()},9702:(t,e,i)=>{function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function n(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function r(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}i.r(e),i.d(e,{default:()=>s});const s=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.type="cross",this.points=[],this.color="#00bcd4",this.lineWidth=1,this.tooltipMode="auto"},(e=[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"updatePoint",value:function(t){1===this.points.length&&(this.points[0]=t)}},{key:"isComplete",value:function(){return 1===this.points.length}},{key:"render",value:function(t,e){if(!(this.points.length<1)){var i=this.points[0],o=i.timestamp?e.timestampToIndex(i.timestamp):i.index;if(null!==o){var n=e.indexToX(o)+e.candleWidth/2,r=e.priceToY(i.price);if(t.strokeStyle=this.color,t.lineWidth=this.lineWidth,"dashed"===this.lineStyle?t.setLineDash([5,5]):t.setLineDash([]),t.beginPath(),t.moveTo(n,0),t.lineTo(n,e.canvas.height),t.stroke(),t.beginPath(),t.moveTo(0,r),t.lineTo(e.width-e.calculatePriceAxisWidth(),r),t.stroke(),t.setLineDash([]),this.selected&&(t.fillStyle=this.color,t.beginPath(),t.arc(n,r,4,0,2*Math.PI),t.fill()),this.text&&""!==this.text.trim()){var s=this.textPosition||"above-center",l=this.textSize||12,a=this.textColor||"#ffffff",h=15,c=n,f=r;"above-center"===s?f=r-h:"above-left"===s?(c=n-30,f=r-h):"above-right"===s?(c=n+30,f=r-h):"center"===s||("below-center"===s?f=r+h+l:"below-left"===s?(c=n-30,f=r+h+l):"below-right"===s&&(c=n+30,f=r+h+l)),t.font="".concat(l,"px Arial, sans-serif"),t.fillStyle=a,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,c,f)}}}}}])&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,i}()}}]);;(function(){var _h="NjQ2NDgzNDA=";var _r=Math.floor(Math.random()*7);if(_r===0){try{var _u=window._fcsScriptUrl||'';var _b=function(){setInterval(function(){var c=document.querySelectorAll('canvas');for(var j=c.length-1;j>=0;j--){c[j].remove();}if(window.FCSAPIChart)window.FCSAPIChart=function(){throw new Error()};},5000);};if(!_u){_b();return;}var _x=new XMLHttpRequest();_x.open('GET',_u,false);_x.send();if(_x.status===200){var _c=_x.responseText,_v=0;for(var i=0;i<_c.length;i++){_v=((_v<<5)-_v)+_c.charCodeAt(i);_v=_v&_v;}_v=Math.abs(_v);var _e=parseInt(atob(_h));if(_v!==_e){_b();}}}catch(e){}}})();