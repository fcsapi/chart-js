"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.pivot-points"],{5188:(e,t,o)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function a(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var l=o.call(e,t||"default");if("object"!=r(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,o){return t=h(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,c()?Reflect.construct(t,o||[],h(e).constructor):t.apply(e,o))}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}o.r(t),o.d(t,{default:()=>y});const y=function(e){function t(e,o,r){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=s(this,t,[e,o,r])).title="Pivot Points",l.shorttitle="Pivot",l.precision=2,l.type=void 0!==o.type?o.type:"Standard",l.period=void 0!==o.period?o.period:"Daily",l.linewidth=void 0!==o.linewidth?o.linewidth:1,l.pivotColor=o.pivotColor||"#FFB74D",l.r1Color=o.r1Color||"#EF5350",l.r2Color=o.r2Color||"#EF5350",l.r3Color=o.r3Color||"#EF5350",l.s1Color=o.s1Color||"#26A69A",l.s2Color=o.s2Color||"#26A69A",l.s3Color=o.s3Color||"#26A69A",l.showPivot=void 0===o.showPivot||o.showPivot,l.showR1=void 0===o.showR1||o.showR1,l.showR2=void 0===o.showR2||o.showR2,l.showR3=void 0===o.showR3||o.showR3,l.showS1=void 0===o.showS1||o.showS1,l.showS2=void 0===o.showS2||o.showS2,l.showS3=void 0===o.showS3||o.showS3,l.showLabels=void 0===o.showLabels||o.showLabels,l.panelType="main",l.panelHeight=150,l.plots=[{dataKey:"pivot",colorKey:"pivotColor",title:"P"}],l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),o=t,i=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"type",label:"Type",type:"select",default:"Standard",options:["Standard","Fibonacci","Camarilla"]},{key:"period",label:"Period",type:"select",default:"Daily",options:["Daily","Weekly","Monthly"]},{key:"linewidth",label:"Line Width",type:"number",default:1,min:1,max:5,step:1}],style:[{key:"pivotColor",label:"Pivot",type:"color",default:"#FFB74D"},{key:"showPivot",label:"Pivot",type:"checkbox",default:!0},{key:"r1Color",label:"R1",type:"color",default:"#EF5350"},{key:"showR1",label:"R1",type:"checkbox",default:!0},{key:"r2Color",label:"R2",type:"color",default:"#EF5350"},{key:"showR2",label:"R2",type:"checkbox",default:!0},{key:"r3Color",label:"R3",type:"color",default:"#EF5350"},{key:"showR3",label:"R3",type:"checkbox",default:!0},{key:"s1Color",label:"S1",type:"color",default:"#26A69A"},{key:"showS1",label:"S1",type:"checkbox",default:!0},{key:"s2Color",label:"S2",type:"color",default:"#26A69A"},{key:"showS2",label:"S2",type:"checkbox",default:!0},{key:"s3Color",label:"S3",type:"color",default:"#26A69A"},{key:"showS3",label:"S3",type:"checkbox",default:!0},{key:"showLabels",label:"Show Labels",type:"checkbox",default:!0}]}}}],(r=[{key:"calculate",value:function(){var e=this.engine.data;if(e&&0!==e.length){for(var t="Daily"===this.period?1:"Weekly"===this.period?7:30,o=[],r=[],i=[],n=[],a=[],s=[],c=[],h=0;h<e.length;h++)if(h<t)o[h]=null,r[h]=null,i[h]=null,n[h]=null,a[h]=null,s[h]=null,c[h]=null;else{var u=e[h-1].high,y=e[h-1].low,f=e[h-1].close;t>1&&(u=Math.max.apply(Math,l(e.slice(h-t,h).map(function(e){return e.high}))),y=Math.min.apply(Math,l(e.slice(h-t,h).map(function(e){return e.low}))),f=e[h-1].close);var p=(u+y+f)/3;if("Standard"===this.type)o[h]=p,r[h]=2*p-y,i[h]=p+(u-y),n[h]=u+2*(p-y),a[h]=2*p-u,s[h]=p-(u-y),c[h]=y-2*(u-p);else if("Fibonacci"===this.type){var d=u-y;o[h]=p,r[h]=p+.382*d,i[h]=p+.618*d,n[h]=p+1*d,a[h]=p-.382*d,s[h]=p-.618*d,c[h]=p-1*d}else if("Camarilla"===this.type){var b=u-y;o[h]=p,r[h]=f+1.1*b/12,i[h]=f+1.1*b/6,n[h]=f+1.1*b/4,a[h]=f-1.1*b/12,s[h]=f-1.1*b/6,c[h]=f-1.1*b/4}}this.data={pivot:o,r1:r,r2:i,r3:n,s1:a,s2:s,s3:c}}}},{key:"render",value:function(e,t){var o=this;if(this.visible&&this.data){var r=e.ctx,l=e.getDpr(),i=this.engine,n=i.data;(this.data.pivot&&this.data.pivot.length===n.length||(this.calculate(),this.data&&this.data.pivot))&&(r.save(),r.scale(l,l),[{key:"pivot",color:this.pivotColor,show:this.showPivot,label:"P"},{key:"r1",color:this.r1Color,show:this.showR1,label:"R1"},{key:"r2",color:this.r2Color,show:this.showR2,label:"R2"},{key:"r3",color:this.r3Color,show:this.showR3,label:"R3"},{key:"s1",color:this.s1Color,show:this.showS1,label:"S1"},{key:"s2",color:this.s2Color,show:this.showS2,label:"S2"},{key:"s3",color:this.s3Color,show:this.showS3,label:"S3"}].forEach(function(e){e.show&&o.drawPivotLine(r,o.data[e.key],e.color,e.label,i,l)}),r.restore())}}},{key:"drawPivotLine",value:function(e,t,o,r,l,i){if(t&&0!==t.length){var n=l.visibleRange,a=Math.max(0,n.start),s=Math.min(t.length,n.end);e.strokeStyle=o,e.lineWidth=this.linewidth,e.setLineDash([5,5]);for(var c=a;c<s-1;c++){var h=t[c],u=t[c+1];if(null!==h&&null!==u){var y=l.indexToX(c)+l.candleWidth/2,f=l.priceToY(h),p=l.indexToX(c+1)+l.candleWidth/2;e.beginPath(),e.moveTo(y,f),e.lineTo(p,f),e.stroke()}}if(e.setLineDash([]),this.showLabels&&s>0){var d=t[s-1];if(null!=d){var b=l.indexToX(s-1)+l.candleWidth/2,v=l.priceToY(d);e.fillStyle=o,e.font="bold 10px sans-serif",e.fillText(r,b+5,v+3)}}}}}])&&n(o.prototype,r),i&&n(o,i),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,i}(o(8018).A)}}]);