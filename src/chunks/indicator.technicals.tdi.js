"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.technicals.tdi"],{9090:(e,t,l)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var l=0;l<t.length;l++){var o=t[l];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,i(o.key),o)}}function i(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function a(e,t,l){return t=s(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,n()?Reflect.construct(t,l||[],s(e).constructor):t.apply(e,l))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(n=function(){return!!e})()}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}l.r(t),l.d(t,{default:()=>h});const h=function(e){function t(e,l,o){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=a(this,t,[e,l,o])).title="Traders Dynamic Index",r.shorttitle="TDI",r.precision=2,r.rsiLength=void 0!==l.rsiLength?l.rsiLength:13,r.fastMALength=void 0!==l.fastMALength?l.fastMALength:2,r.slowMALength=void 0!==l.slowMALength?l.slowMALength:7,r.bbLength=void 0!==l.bbLength?l.bbLength:34,r.bbMult=void 0!==l.bbMult?l.bbMult:1.6185,r.linewidth=void 0!==l.linewidth?l.linewidth:2,r.rsiColor=l.rsiColor||"#FF6D00",r.fastMAColor=l.fastMAColor||"#4CAF50",r.slowMAColor=l.slowMAColor||"#F44336",r.upperBBColor=l.upperBBColor||"#2196F3",r.lowerBBColor=l.lowerBBColor||"#2196F3",r.middleBBColor=l.middleBBColor||"#FFC107",r.fillColor=l.fillColor||"rgba(33, 150, 243, 0.1)",r.levelColor=l.levelColor||"#787B86",r.panelType="separate",r.panelHeight=150,r.plots=[{dataKey:"rsi",colorKey:"rsiColor",title:"RSI"},{dataKey:"fastMA",colorKey:"fastMAColor",title:"Fast MA"},{dataKey:"slowMA",colorKey:"slowMAColor",title:"Slow MA"},{dataKey:"upperBB",colorKey:"upperBBColor",title:"Upper BB"},{dataKey:"lowerBB",colorKey:"lowerBBColor",title:"Lower BB"},{dataKey:"middleBB",colorKey:"middleBBColor",title:"Middle BB"}],r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),l=t,i=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"rsiLength",label:"RSI Length",type:"number",default:13,min:1,max:500,step:1},{key:"fastMALength",label:"Fast MA",type:"number",default:2,min:1,max:50,step:1},{key:"slowMALength",label:"Slow MA",type:"number",default:7,min:1,max:50,step:1},{key:"bbLength",label:"BB Length",type:"number",default:34,min:1,max:500,step:1},{key:"bbMult",label:"BB Multiplier",type:"number",default:1.6185,min:.1,max:5,step:.1},{key:"linewidth",label:"Line Width",type:"number",default:2,min:1,max:5,step:1}],style:[{key:"rsiColor",label:"RSI Line",type:"color",default:"#FF6D00"},{key:"fastMAColor",label:"Fast MA",type:"color",default:"#4CAF50"},{key:"slowMAColor",label:"Slow MA",type:"color",default:"#F44336"},{key:"upperBBColor",label:"Upper/Lower BB",type:"color",default:"#2196F3"},{key:"middleBBColor",label:"Middle BB",type:"color",default:"#FFC107"},{key:"fillColor",label:"BB Fill",type:"color",default:"rgba(33, 150, 243, 0.1)"},{key:"levelColor",label:"Levels",type:"color",default:"#787B86"}]}}}],(o=[{key:"calculate",value:function(){var e=this,t=this.engine.data,l=this.engine.dataManager;if(t&&0!==t.length){for(var o=l.calculateRSI(t,this.rsiLength),r=l.calculateSMAFromArray(o,this.fastMALength),i=l.calculateSMAFromArray(o,this.slowMALength),a=l.calculateSMAFromArray(o,this.bbLength),n=[],s=0;s<o.length;s++)if(s<this.bbLength-1||null===a[s])n[s]=null;else{for(var u=0,h=0;h<this.bbLength;h++)null!==o[s-h]&&(u+=Math.pow(o[s-h]-a[s],2));n[s]=Math.sqrt(u/this.bbLength)}var d=a.map(function(t,l){return null!==t&&null!==n[l]?t+e.bbMult*n[l]:null}),c=a.map(function(t,l){return null!==t&&null!==n[l]?t-e.bbMult*n[l]:null});this.data={rsi:o,fastMA:r,slowMA:i,upperBB:d,middleBB:a,lowerBB:c}}}},{key:"render",value:function(e,t){if(this.visible&&this.data){var l=e.ctx,o=e.dpr,r=this.engine;if(this.data.rsi&&this.data.rsi.length===r.data.length||(this.calculate(),this.data&&this.data.rsi)){var i=t?t.top:0,a=i+0,n=i+(t?t.height:100)-0-a;l.save(),l.scale(o,o),this.drawHLine(l,a,n,68,this.levelColor,r,o,t),this.drawHLine(l,a,n,50,this.levelColor,r,o,t),this.drawHLine(l,a,n,32,this.levelColor,r,o,t),this.drawBBFill(l,a,n,r,t),this.drawLine(l,this.data.upperBB,this.upperBBColor,1,a,n,r,t),this.drawLine(l,this.data.lowerBB,this.lowerBBColor,1,a,n,r,t),this.drawLine(l,this.data.middleBB,this.middleBBColor,this.linewidth,a,n,r,t),this.drawLine(l,this.data.rsi,this.rsiColor,this.linewidth,a,n,r,t),this.drawLine(l,this.data.fastMA,this.fastMAColor,this.linewidth,a,n,r,t),this.drawLine(l,this.data.slowMA,this.slowMAColor,this.linewidth,a,n,r,t),l.restore()}}}},{key:"drawBBFill",value:function(e,t,l,o,r){var i=o.visibleRange,a=Math.max(0,i.start),n=Math.min(this.data.upperBB.length,i.end);e.fillStyle=this.fillColor,e.beginPath();for(var s=!1,u=!1,h=a;h<n;h++)if(null!==this.data.upperBB[h]){var d=o.indexToX(h)+o.candleWidth/2,c=r&&void 0!==r.minValue?r.minValue:0,f=(r&&void 0!==r.maxValue?r.maxValue:100)-c,p=t+l-(this.data.upperBB[h]-c)/f*l;s?e.lineTo(d,p):(e.moveTo(d,p),s=!0)}for(var b=n-1;b>=a;b--)if(null!==this.data.lowerBB[b]){var y=o.indexToX(b)+o.candleWidth/2,B=r&&void 0!==r.minValue?r.minValue:0,m=(r&&void 0!==r.maxValue?r.maxValue:100)-B,v=t+l-(this.data.lowerBB[b]-B)/m*l;u||(u=!0),e.lineTo(y,v)}e.closePath(),e.fill()}},{key:"drawLine",value:function(e,t,l,o,r,i,a,n){if(t){var s=a.visibleRange,u=Math.max(0,s.start),h=Math.min(t.length,s.end);e.strokeStyle=l,e.lineWidth=o,e.beginPath();for(var d=!1,c=u;c<h;c++){var f=t[c];if(null!==f&&!isNaN(f)){var p=a.indexToX(c)+a.candleWidth/2,b=n&&void 0!==n.minValue?n.minValue:0,y=r+i-(f-b)/((n&&void 0!==n.maxValue?n.maxValue:100)-b)*i;d?e.lineTo(p,y):(e.moveTo(p,y),d=!0)}}e.stroke()}}},{key:"drawHLine",value:function(e,t,l,o,r,i,a,n){var s=n&&void 0!==n.minValue?n.minValue:0,u=t+l-(o-s)/((n&&void 0!==n.maxValue?n.maxValue:100)-s)*l;e.strokeStyle=r,e.lineWidth=1,e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,u),e.lineTo(i.canvas.width/a,u),e.stroke(),e.setLineDash([])}}])&&r(l.prototype,o),i&&r(l,i),Object.defineProperty(l,"prototype",{writable:!1}),l;var l,o,i}(l(8018).A)}}]);