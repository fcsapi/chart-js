"use strict";(self.webpackChunkfcsapi_chart=self.webpackChunkfcsapi_chart||[]).push([["indicator.patterns.doji"],{2069:(t,e,o)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t,e){if("object"!=r(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,e||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==r(e)?e:e+""}function l(t,e,o){return e=s(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,i()?Reflect.construct(e,o||[],s(t).constructor):e.apply(t,o))}function i(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(i=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function d(t,e){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},d(t,e)}o.r(e),o.d(e,{default:()=>f});const f=function(t){function e(t,o,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=l(this,e,[t,o,r])).title="Doji Pattern",n.shorttitle="Doji",n.precision=2,n.bodyThreshold=void 0!==o.bodyThreshold?o.bodyThreshold:.1,n.showStandard=void 0===o.showStandard||o.showStandard,n.showGravestone=void 0===o.showGravestone||o.showGravestone,n.showDragonfly=void 0===o.showDragonfly||o.showDragonfly,n.standardColor=o.standardColor||"#ffeb3b",n.gravestoneColor=o.gravestoneColor||"#ef5350",n.dragonflyColor=o.dragonflyColor||"#26a69a",n.panelType="main",n.plots=[{dataKey:"standard",colorKey:"standardColor",title:"Standard Doji"},{dataKey:"gravestone",colorKey:"gravestoneColor",title:"Gravestone Doji"},{dataKey:"dragonfly",colorKey:"dragonflyColor",title:"Dragonfly Doji"}],n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(e,t),o=e,a=[{key:"getSettingsConfig",value:function(){return{inputs:[{key:"bodyThreshold",label:"Body Threshold %",type:"number",default:.1,min:.01,max:.5,step:.01},{key:"showStandard",label:"Show Standard Doji",type:"checkbox",default:!0},{key:"showGravestone",label:"Show Gravestone Doji",type:"checkbox",default:!0},{key:"showDragonfly",label:"Show Dragonfly Doji",type:"checkbox",default:!0}],style:[{key:"standardColor",label:"Standard Color",type:"color",default:"#ffeb3b"},{key:"gravestoneColor",label:"Gravestone Color",type:"color",default:"#ef5350"},{key:"dragonflyColor",label:"Dragonfly Color",type:"color",default:"#26a69a"}]}}}],(r=[{key:"calculate",value:function(){for(var t=this.engine.data,e=[],o=[],r=[],n=0;n<t.length;n++){e.push(null),o.push(null),r.push(null);var a=t[n],l=a.open,i=a.high,s=a.low,d=a.close,f=i-s;if(0!==f&&!(Math.abs(d-l)/f>this.bodyThreshold)){var u=i-Math.max(l,d),c=Math.min(l,d)-s;u>2*c&&c/f<.1?o[n]=i:c>2*u&&u/f<.1?r[n]=s:e[n]=(i+s)/2}}this.data={standard:e,gravestone:o,dragonfly:r}}},{key:"render",value:function(t,e){if(this.visible&&this.data){var o=t.ctx,r=t.getDpr(),n=this.engine,a=n.data;if(this.data.standard&&this.data.standard.length===a.length||(this.calculate(),this.data)){o.save(),o.scale(r,r);var l=n.visibleRange,i=Math.max(0,l.start),s=Math.min(a.length,l.end);if(this.showStandard){o.fillStyle=this.standardColor;for(var d=i;d<s;d++)if(null!==this.data.standard[d]){var f=n.indexToX(d)+n.candleWidth/2,u=n.priceToY(a[d].high)-12;this.drawDiamond(o,f,u,6)}}if(this.showGravestone){o.fillStyle=this.gravestoneColor;for(var c=i;c<s;c++){var h=this.data.gravestone[c];if(null!==h){var y=n.indexToX(c)+n.candleWidth/2,p=n.priceToY(h)-15;this.drawTriangle(o,y,p,7,"down")}}}if(this.showDragonfly){o.fillStyle=this.dragonflyColor;for(var b=i;b<s;b++){var v=this.data.dragonfly[b];if(null!==v){var g=n.indexToX(b)+n.candleWidth/2,w=n.priceToY(v)+15;this.drawTriangle(o,g,w,7,"up")}}}o.restore()}}}},{key:"drawTriangle",value:function(t,e,o,r,n){t.beginPath(),"up"===n?(t.moveTo(e,o-r),t.lineTo(e-r,o+r),t.lineTo(e+r,o+r)):(t.moveTo(e,o+r),t.lineTo(e-r,o-r),t.lineTo(e+r,o-r)),t.closePath(),t.fill()}},{key:"drawDiamond",value:function(t,e,o,r){t.beginPath(),t.moveTo(e,o-r),t.lineTo(e+r,o),t.lineTo(e,o+r),t.lineTo(e-r,o),t.closePath(),t.fill()}}])&&n(o.prototype,r),a&&n(o,a),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,r,a}(o(8018).A)}}]);